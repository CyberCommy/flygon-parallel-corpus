- en: Chapter 2. Getting Started with JSON
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: JSON or JavaScript Object Notation is a very popular data interchange format.
    It was developed by Douglas Crockford. JSON is text-based, lightweight, and a
    human-readable format for data exchange between clients and servers. JSON is derived
    from JavaScript and bears a close resemblance to JavaScript objects, but it is
    not dependent on JavaScript. JSON is language-independent, and support for the
    JSON data format is available in all the popular languages, some of which are
    C#, PHP, Java, C++, Python, and Ruby.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
- en: Note
  id: totrans-2
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: JSON is a format and not a language.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
- en: 'JSON can be used in web applications for data transfer. Prior to JSON, XML
    was considered to be the chosen data interchange format. XML parsing required
    an XML DOM implementation on the client side that would ingest the XML response,
    and then XPath was used to query the response in order to access and retrieve
    the data. That made life tedious, as querying for data had to be performed at
    two levels: first on the server side where the data was being queried from a database,
    and the second time was on the client side using XPath. JSON does not need any
    specific implementations; the JavaScript engine in the browser handles JSON parsing.'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
- en: XML messages often tend to be heavy and verbose, and take up a lot of bandwidth
    while sending the data over a network connection. Once the XML message is retrieved,
    it has to be loaded into memory to parse it; let us take a look at a `students`
    data feed in XML and JSON.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
- en: 'The following is an example in XML:'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
- en: '![Getting Started with JSON](img/6034OS_02_01.jpg)'
  id: totrans-7
  prefs: []
  type: TYPE_IMG
- en: 'Let us take a look at the example in JSON:'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
- en: '![Getting Started with JSON](img/6034OS_02_02.jpg)'
  id: totrans-9
  prefs: []
  type: TYPE_IMG
- en: As we notice, the size of the XML message is bigger when compared to its JSON
    counterpart, and this is just for two records. A real-time feed will begin with
    a few thousands and go upwards. Another point to note is the amount of data that
    has to be generated by the server and then transmitted over the Internet is already
    big, and XML, as it is verbose, makes it bigger. Given that we are in the age
    of mobile devices where smart phones and tablets are getting more and more popular
    by the day, transmitting such large volumes of data on a slower network causes
    slow page loads, hang ups, and poor user experience, thus driving the users away
    from the site. JSON has come about to be the preferred Internet data interchange
    format, to avoid the issues mentioned earlier.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
- en: Since JSON is used to transmit serialized data over the Internet, we will need
    to make a note of its MIME type. A **MIME** (**Multipurpose Internet Mail Extensions**)
    type is an Internet media type, which is a two-part identifier for content that
    is being transferred over the Internet. The MIME types are passed through the
    HTTP headers of an HTTP Request and an HTTP Response. The MIME type is the communication
    of content type between the server and the browser. In general, a MIME type will
    have two or more parts that give the browser information about the type of data
    that is being sent either in the HTTP Request or in the HTTP Response. The MIME
    type for JSON data is `application/json`. If the MIME type headers are not sent
    across the browser, it treats the incoming JSON as plain text.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
- en: The Hello World program with JSON
  id: totrans-12
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Now that we have a basic understanding of JSON, let us work on our Hello World
    program. This is shown in the screenshot that follows:'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
- en: '![The Hello World program with JSON](img/6034OS_02_03.jpg)'
  id: totrans-14
  prefs: []
  type: TYPE_IMG
- en: The preceding program will alert World onto the screen when it is invoked from
    a browser. Let us pay close attention to the script between the `<script>` tags.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
- en: '![The Hello World program with JSON](img/6034OS_02_04.jpg)'
  id: totrans-16
  prefs: []
  type: TYPE_IMG
- en: In the first step, we are creating a JavaScript variable and initializing the
    variable with a JavaScript object. Similar to how we retrieve data from a JavaScript
    object, we use the key-value pair to retrieve the value. Simply put, JSON is a
    collection of key and value pairs, where every key is a reference to the memory
    location where the value is stored on the computer. Now let us take a step back
    and analyze why we need JSON, if all we are doing is assigning JavaScript objects
    that are readily available. The answer is, JSON is a different format altogether,
    unlike JavaScript, which is a language.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
- en: Note
  id: totrans-18
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: JSON keys and values have to be enclosed in double quotes, if either are enclosed
    in single quotes, we will receive an error.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
- en: 'Now, let us take a quick look at the similarities and differences between JSON
    and a normal JavaScript object. If we were to create a similar JavaScript object
    like our `hello_world` JSON variable from the earlier example, it would look like
    the JavaScript object that follows:'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
- en: '![The Hello World program with JSON](img/6034OS_02_05.jpg)'
  id: totrans-21
  prefs: []
  type: TYPE_IMG
- en: The big difference here is that the key is not wrapped in double quotes. Since
    a JSON key is a string, we can use any valid string for a key. We can use spaces,
    special characters, and hyphens in our keys, which is not valid in a normal JavaScript
    object.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
- en: '![The Hello World program with JSON](img/6034OS_02_06.jpg)'
  id: totrans-23
  prefs: []
  type: TYPE_IMG
- en: When we use special characters, hyphens, or spaces in our keys, we have to be
    careful while accessing them.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
- en: '![The Hello World program with JSON](img/6034OS_02_07.jpg)'
  id: totrans-25
  prefs: []
  type: TYPE_IMG
- en: 'The reason the preceding JavaScript statement doesn''t work is that JavaScript
    doesn''t accept keys with special characters, hyphens, or strings. So we have
    to retrieve the data using a method where we will handle the JSON object as an
    associative array with a string key. This is shown in the screenshot that follows:'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
- en: '![The Hello World program with JSON](img/6034OS_02_08.jpg)'
  id: totrans-27
  prefs: []
  type: TYPE_IMG
- en: 'Another difference between the two is that a JavaScript object can carry functions
    within, while a JSON object cannot carry any functions. The example that follows
    has the property `getName`, which has a function that alerts the name `John Doe`
    when it is invoked:'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
- en: '![The Hello World program with JSON](img/6034OS_02_09.jpg)'
  id: totrans-29
  prefs: []
  type: TYPE_IMG
- en: Finally, the biggest difference is that a JavaScript object was never intended
    to be a data interchange format, while the sole purpose of JSON was to use it
    as a data interchange format.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
- en: Datatypes in JSON
  id: totrans-31
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Now, let us take a look at a more complex example of JSON. We''ll also go over
    all the datatypes that are supported by JSON. JSON supports six datatypes: strings,
    numbers, Booleans, arrays, objects, and null.'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
- en: '![Datatypes in JSON](img/6034OS_02_10.jpg)'
  id: totrans-33
  prefs: []
  type: TYPE_IMG
- en: 'In the preceding example, we have five key-value pairs of different datatypes.
    Now let us take a close look at each of these key-value pairs:'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
- en: '![Datatypes in JSON](img/6034OS_02_11.jpg)'
  id: totrans-35
  prefs: []
  type: TYPE_IMG
- en: The datatype of the value that `"id"` references is a number.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
- en: '![Datatypes in JSON](img/6034OS_02_12.jpg)'
  id: totrans-37
  prefs: []
  type: TYPE_IMG
- en: Here, the datatype of the value that `"name"` references is a string.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
- en: '![Datatypes in JSON](img/6034OS_02_13.jpg)'
  id: totrans-39
  prefs: []
  type: TYPE_IMG
- en: In the preceding screenshot, the datatype of the value that `"isStudent"` references
    is a Boolean.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
- en: '![Datatypes in JSON](img/6034OS_02_14.jpg)'
  id: totrans-41
  prefs: []
  type: TYPE_IMG
- en: The datatype of the value that `"scores"` references here is an array.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
- en: '![Datatypes in JSON](img/6034OS_02_15.jpg)'
  id: totrans-43
  prefs: []
  type: TYPE_IMG
- en: Here the datatype of the value that `"courses"` references is an object.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
- en: 'We know that JSON supports six datatypes; they are strings, numbers, Booleans,
    arrays, objects, and null. Yes, JSON supports null data, and real-time business
    implementations need accurate information. There might be cases where null was
    substituted with an empty string, but that is inaccurate. Let us take a quick
    look at the following example:'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
- en: '![Datatypes in JSON](img/6034OS_02_16.jpg)'
  id: totrans-46
  prefs: []
  type: TYPE_IMG
- en: Note
  id: totrans-47
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Arrays and null values are objects in JavaScript.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
- en: In the earlier example, we are using the `typeof` operator that takes an operand,
    and returns the datatype of that operand. On line 4, we are determining the type
    of an empty string, while on line 8 we are determining the type of a null value.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 在前面的例子中，我们使用了`typeof`运算符，它接受一个操作数，并返回该操作数的数据类型。在第4行，我们确定了空字符串的类型，而在第8行，我们确定了空值的类型。
- en: 'Now, let us implement our JSON object in a page and retrieve the values, as
    shown in the following screenshot:'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们在页面中实现我们的JSON对象并检索值，如下面的屏幕截图所示：
- en: '![Datatypes in JSON](img/6034OS_02_17.jpg)'
  id: totrans-51
  prefs: []
  type: TYPE_IMG
  zh: '![JSON中的数据类型](img/6034OS_02_17.jpg)'
- en: 'To retrieve the `id` from the variable `complexJson`, we need to do the following:'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 要从变量`complexJson`中检索`id`，我们需要执行以下操作：
- en: '![Datatypes in JSON](img/6034OS_02_18.jpg)'
  id: totrans-53
  prefs: []
  type: TYPE_IMG
  zh: '![JSON中的数据类型](img/6034OS_02_18.jpg)'
- en: 'To retrieve the `name` from the variable `complexJson`, look at the screenshot
    that is shown:'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 要从变量`complexJson`中检索`name`，请查看所示的屏幕截图：
- en: '![Datatypes in JSON](img/6034OS_02_19.jpg)'
  id: totrans-55
  prefs: []
  type: TYPE_IMG
  zh: '![JSON中的数据类型](img/6034OS_02_19.jpg)'
- en: 'Look at the following screenshot to retrieve `isStudent` from the variable
    `complexJson`:'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 查看以下屏幕截图，以从变量`complexJson`中检索`isStudent`：
- en: '![Datatypes in JSON](img/6034OS_02_20.jpg)'
  id: totrans-57
  prefs: []
  type: TYPE_IMG
  zh: '![JSON中的数据类型](img/6034OS_02_20.jpg)'
- en: 'Retrieving data from arrays and objects gets a little tricky, as we have to
    traverse through the array or object. Let us see how values can be retrieved from
    arrays:'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 从数组和对象中检索数据有点棘手，因为我们必须遍历数组或对象。让我们看看如何从数组中检索值：
- en: '![Datatypes in JSON](img/6034OS_02_21.jpg)'
  id: totrans-59
  prefs: []
  type: TYPE_IMG
  zh: '![JSON中的数据类型](img/6034OS_02_21.jpg)'
- en: In the preceding example, we are retrieving the second element from the `scores`
    array. Although `scores` is an array inside the `complexJson` object, it is still
    treated as a regular key-value pair. It is handled differently when the key is
    accessed; the first thing that the interpreter has to assess, when a key is accessed,
    is to get the datatype of its value. If the retrieved value is a string, number,
    Boolean, or null, there will not be any extra operations that are performed on
    the value. But if it is an array or an object, the value's dependencies are taken
    into consideration.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 在上面的例子中，我们从`scores`数组中检索了第二个元素。尽管`scores`是`complexJson`对象内的一个数组，但它仍然被视为常规键值对。当访问键时，处理方式不同；解释器在访问键时首先要评估的是获取其值的数据类型。如果检索到的值是字符串、数字、布尔值或空值，则不会对该值执行任何额外的操作。但如果它是一个数组或对象，则会考虑值的依赖关系。
- en: 'To retrieve an element from the object inside a JSON object, we will have to
    access the key that is the reference for that value, as shown:'
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 要从JSON对象内部检索元素，我们必须访问作为该值引用的键，如下所示：
- en: '![Datatypes in JSON](img/6034OS_02_22.jpg)'
  id: totrans-62
  prefs: []
  type: TYPE_IMG
  zh: '![JSON中的数据类型](img/6034OS_02_22.jpg)'
- en: Since objects do not have a numeric index, JavaScript might rearrange the order
    of items inside an object. If you notice that the order of key-value pairs during
    the initialization of the JSON object is different from when you are accessing
    the data, there is nothing to worry about. There is no loss of data; the JavaScript
    engine has just reordered your object.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 由于对象没有数值索引，JavaScript可能会重新排列对象内部项目的顺序。如果您注意到在初始化JSON对象时键值对的顺序与访问数据时不同，那就没什么好担心的。数据没有丢失；JavaScript引擎只是重新排列了您的对象。
- en: Languages that support JSON
  id: totrans-64
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 支持JSON的语言
- en: Until now, we have seen how the parsers in JavaScript support JSON. There are
    many other programming languages that provide implementations for JSON. Languages
    such as PHP, Python, C#, C++, and Java provide a very good support for the JSON
    data interchange format. All of the popular programming languages that support
    service-oriented architecture have understood the importance of JSON and its implementation
    for data transfer, thus, they have provided great support for JSON. Let us take
    a quick detour from implementing JSON in JavaScript, and see how JSON is implemented
    in other languages, such as PHP and Python.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，我们已经看到JavaScript中的解析器如何支持JSON。还有许多其他编程语言提供了JSON的实现。诸如PHP、Python、C＃、C ++和Java等语言对JSON数据交换格式提供了很好的支持。所有支持面向服务的流行编程语言都理解了JSON及其用于数据传输的重要性，因此它们对JSON提供了很好的支持。让我们暂时离开JavaScript中JSON的实现，看看JSON在其他语言中的实现，比如PHP和Python。
- en: PHP
  id: totrans-66
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: PHP
- en: PHP is considered to be one of the most popular languages for building web applications.
    It is a server-side scripting language that allows developers to build applications
    that can perform operations on the server, connect to a database to perform CRUD
    (Create, Read, Update, Delete) operations, and provide a stately environment for
    real-time applications. JSON support has been built into the PHP core from PHP
    5.2.0; this helps users avoid going through any complex installations or configurations.
    Given that JSON is just a data interchange format, PHP consists of two functions.
    These functions handle JSON that comes in via a request or generate JSON that
    will be sent via a response. PHP is a weakly-typed language; for this example,
    we will use the data stored in a PHP array and convert that data into a JSON string,
    which can be utilized as a data feed. Let us recreate the student example that
    we have used in an earlier section, build it in PHP, and convert it into JSON.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: PHP被认为是构建Web应用程序的最流行语言之一。它是一种服务器端脚本语言，允许开发人员构建可以在服务器上执行操作、连接到数据库执行CRUD（创建、读取、更新、删除）操作，并为实时应用程序提供稳定环境的应用程序。JSON支持已经内置到PHP核心中，从PHP
    5.2.0开始；这有助于用户避免进行任何复杂的安装或配置。鉴于JSON只是一种数据交换格式，PHP包含两个函数。这些函数处理通过请求传入的JSON，或者生成将通过响应发送的JSON。PHP是一种弱类型语言；在本例中，我们将使用存储在PHP数组中的数据，并将该数据转换为JSON字符串，以便用作数据源。让我们在PHP中重新创建我们在前面部分中使用的学生示例，并将其转换为JSON。
- en: Note
  id: totrans-68
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: This example is only intended to show you how JSON can be generated using PHP.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 此示例仅旨在向您展示如何使用PHP生成JSON。
- en: '![PHP](img/6034OS_02_23.jpg)'
  id: totrans-70
  prefs: []
  type: TYPE_IMG
  zh: '![PHP](img/6034OS_02_23.jpg)'
- en: Note
  id: totrans-71
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: To run a PHP script, we will need to install PHP. To run a PHP script through
    a browser, we will need a web server, such as Apache or IIS. We will go through
    the installation in [Chapter 4](ch04.xhtml "Chapter 4. AJAX Calls with JSON Data"),
    *AJAX Calls with JSON Data*, when we work with AJAX.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
- en: This script starts by initializing a variable, and assigning an associative
    array that contains student information. The variable `$students` is then passed
    to a function called `json_encode()`, which converts the variable into a JSON
    string. When this script is run, it generates a valid response that can be exposed
    as a JSON data feed for other applications to utilize.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
- en: 'The output is as follows:'
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
- en: '![PHP](img/6034OS_02_24.jpg)'
  id: totrans-75
  prefs: []
  type: TYPE_IMG
- en: We have successfully generated our first JSON feed via a simple PHP script;
    let us take a look at the method to parse JSON that comes in via an HTTP request.
    It is common for web applications that make asynchronous HTTP requests to send
    data in JSON format.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
- en: Note
  id: totrans-77
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: This example is only intended to show you how JSON can be ingested into PHP.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
- en: '![PHP](img/6034OS_02_25.jpg)'
  id: totrans-79
  prefs: []
  type: TYPE_IMG
- en: 'The output is as follows:'
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
- en: '![PHP](img/6034OS_02_26.jpg)'
  id: totrans-81
  prefs: []
  type: TYPE_IMG
- en: Python
  id: totrans-82
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Python is a very popular scripting language that is extensively used to perform
    string operations and to build console applications. It can be used to fetch data
    from a JSON API, and once the JSON data is retrieved it will be treated as a JSON
    string. To perform any operations on that JSON string, Python provides the JSON
    module. The JSON module is an amalgamation of many powerful functions that we
    can use to parse the JSON string on hand.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
- en: Note
  id: totrans-84
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: This example is only intended to show you how JSON can be generated using Python.
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
- en: '![Python](img/6034OS_02_27.jpg)'
  id: totrans-86
  prefs: []
  type: TYPE_IMG
- en: In this example we have used complex datatypes, such as Tuples and Dictionaries,
    to store the scores and courses respectively; since this is not a Python course,
    we will not go deep into those datatypes.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
- en: Note
  id: totrans-88
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: To run this script Python2 needs to be installed, it comes preinstalled on any
    *nix operating system.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
- en: 'The output is as follows:'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
- en: '![Python](img/6034OS_02_28.jpg)'
  id: totrans-91
  prefs: []
  type: TYPE_IMG
- en: The keys might get rearranged based on the datatype; we can use the `sort_keys`
    flag to retrieve the original order.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
- en: Now, let us take a quick look at how the JSON decoding is performed in Python.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
- en: Note
  id: totrans-94
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: This example is only intended to show you how JSON can be ingested into Python.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
- en: '![Python](img/6034OS_02_29.jpg)'
  id: totrans-96
  prefs: []
  type: TYPE_IMG
- en: In this example, we are storing the JSON string in `student_json`, and we are
    using the `json.loads()` method that is available through the JSON module in Python.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
- en: 'The output is as follows:'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
- en: '![Python](img/6034OS_02_30.jpg)'
  id: totrans-99
  prefs: []
  type: TYPE_IMG
- en: Summary
  id: totrans-100
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: This chapter introduced us to the basics of JSON. We went through the history
    of JSON, and understood its advantages over XML. We created our first JSON object
    and successfully parsed it. Also, we went over all the datatypes that JSON supports.
    Finally, we went over some examples as to how JSON can be implemented in other
    programming languages. As we move forward in this journey, we will find the knowledge
    that we have gathered in this chapter to be a solid foundation for the more complex
    concepts that we will go over in the later chapters.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
