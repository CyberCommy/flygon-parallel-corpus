- en: Setting Up the Assessment Environment
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In the last chapter, we learned about understanding the essentials of a vulnerability
    management program from a governance perspective. This chapter will introduce
    various methods and techniques for setting up a comprehensive vulnerability assessment
    and penetration testing environment. We will learn how to set up our own environment
    that could be effectively used for various vulnerability assessment techniques
    discussed later in the book.
  prefs: []
  type: TYPE_NORMAL
- en: 'We will cover the following topics in this chapter:'
  prefs: []
  type: TYPE_NORMAL
- en: Setting up a Kali virtual machine
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Basics of Kali Linux
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Environment configuration and setup
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: List of tools to be used during assessment
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Setting up a Kali virtual machine
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Performing vulnerability assessment or a penetration test involves a series
    of tasks that need to be performed with the help of multiple tools and utilities.
    For every task involved in the process, there are tools available, both commercial
    as well as freeware and open source. It all depends on our choice of tool that
    suits best as per the context.
  prefs: []
  type: TYPE_NORMAL
- en: For performing an end-to-end assessment, we can either have individual tools
    downloaded as and when required or we can use a distribution such as Kali Linux
    that comes with all required tools pre-installed. Kali Linux is a stable, flexible,
    powerful, and proven platform for penetration testing. It has a baseline of tools
    that are required to perform various tasks across all phases of penetration testing.
    It also allows you to easily add tools and utilities that aren't part of the default
    installation.
  prefs: []
  type: TYPE_NORMAL
- en: Hence, Kali Linux is really a good choice of platform to get started with vulnerability
    assessments and penetration tests.
  prefs: []
  type: TYPE_NORMAL
- en: Kali Linux is available for download at [https://www.kali.org/downloads/](https://www.kali.org/downloads/).
  prefs: []
  type: TYPE_NORMAL
- en: Once downloaded, you can either install it directly on your system or you can
    install it in a virtual machine. The advantage of installing it in a virtual machine
    is it keeps your existing operating system setup undisturbed. Also, it becomes
    very easy to take configuration backups using snapshots and restore them whenever
    required.
  prefs: []
  type: TYPE_NORMAL
- en: While Kali Linux is available for download in the form of an ISO file, it can
    also be downloaded as a complete virtual machine. You can download the correct
    setup based on the virtualization software you use (VMware/ VirtualBox /Hyper-V).
    The Kali virtual machine setup file is available for download at [https://www.offensive-security.com/kali-linux-vm-vmware-virtualbox-hyperv-image-download/](https://www.offensive-security.com/kali-linux-vm-vmware-virtualbox-hyperv-image-download/).
  prefs: []
  type: TYPE_NORMAL
- en: 'The following screenshot shows Kali Linux in VMware. You can configure the
    machine settings by selecting the Edit virtual machine settings option, allocate
    memory, and select the network adapter type. Once done, you can simply play the
    machine:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/64e304c2-9e12-4b8b-aa28-264de2b89098.png)'
  prefs: []
  type: TYPE_IMG
- en: Basics of Kali Linux
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'The default credentials in order to access Kali Linux are `username:root` and
    `password:toor`. However, after the first login, it is important to change the
    default credentials and set a new password. A new password can be set using the
    `passwd `command as shown in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/527cd47b-954d-4b41-aef9-cf8323433d04.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Kali Linux is comprehensively used for network and application penetration
    testing. So it is important that Kali Linux is connected to the network as a standalone
    Kali installation wouldn''t be of much use. The first step in ensuring network
    connectivity is checking whether Kali has a valid IP address. We can use the `ifconfig` command as
    shown in the following screenshot and confirm the IP address allocation:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/ee55f814-5e42-44fd-bff3-db6eb438e3d4.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Now that we have changed the default credentials and also affirmed network
    connectivity, it''s now time to check the exact version of our Kali installation.
    This includes the exact build details, including kernel and platform details.
    The `uname -a` command gives us the required details as shown in the following
    screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/e1078121-e771-466d-9005-77ca53262cff.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Kali Linux is a complete penetration testing distribution with tools assisting
    in all phases of the penetration testing lifecycle. Upon clicking the Applications
    menu, we can see all the available tools distributed across various categories
    as shown in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/22af6113-f6e3-4bbb-b299-a71814b6ad75.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Kali Linux comes with tons of useful tools and utilities. At times, we are
    required to make changes in the configuration files of these tools and utilities.
    All the tools and utilities are located in the `/usr/bin` folder as shown in the
    following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/b4192ad5-67cf-4312-ae49-a0cc430a6f71.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Kali Linux uses several online repositories to provide software installations
    and updates. However, these repository sources must be updated on a regular basis.
    This can be achieved using the `apt-get update` command as shown in the following
    screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/1722c652-25e3-4dd2-ac7a-23585d693000.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Kali Linux also gets major build updates on a regular basis. In order to upgrade
    to the latest available build, the `apt-get upgrade` command can be used as shown
    in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/193e4130-406c-4f97-8084-748c255bde15.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Kali Linux generates and stores various types of log, such as application,
    system, security, and hardware. These logs can be useful for debugging and tracing
    events. Logs can be viewed by opening the Logs application located at Applications
    | Usual Applications | Utilities | Logs, the result is shown in the following
    screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/3d0752f1-32d4-4ff9-9849-d0301649747a.png)'
  prefs: []
  type: TYPE_IMG
- en: Environment configuration and setup
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: While our basic Kali setup is up and running, we also need to install and configure
    some additional services that we might need during our assessment. In the upcoming
    sections, we will discuss a few such useful services in Kali Linux.
  prefs: []
  type: TYPE_NORMAL
- en: Web server
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: A web server is going to be of help to us during the exploitation phase, wherein
    we may need to host a backdoor executable. The Apache web server is installed
    by default in Kali Linux. We can start the Apache web server using the `service
    apache2 start` command, as shown in the following screenshot.
  prefs: []
  type: TYPE_NORMAL
- en: 'We can verify whether the service started successfully  by using the `netstat
    -an | grep ::80` command:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/a8ae05f5-dcbd-4e55-a360-58de9cc26657.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Now that the Apache server is up and running, we can verify it through the
    browser as well. By hitting the localhost (`127.0.0.1`), we are able to see the
    default Apache web page as shown in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/6182d0b1-b2ec-4fb9-9ce5-7543cde36a3e.png)'
  prefs: []
  type: TYPE_IMG
- en: 'If we want to change the default page or if we wish to host any files, we can
    do so by placing the required files in the `/var/www/html` directory as shown
    in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/55ba3447-79c1-4be9-80d2-bea1bbc2fea5.png)'
  prefs: []
  type: TYPE_IMG
- en: Secure Shell (SSH)
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: SSH is indeed the default choice of protocol when remote secure communication
    is required.
  prefs: []
  type: TYPE_NORMAL
- en: 'In Kali Linux, we can start using SSH by first installing the SSH package.
    We can use the `apt-get install ssh` command as shown in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/de95ca75-abd8-4aec-a7da-d9f23ebdab36.png)'
  prefs: []
  type: TYPE_IMG
- en: 'In order to make sure that SSH automatically starts after reboot, we can use
    the `systemctl` command, as shown in the following screenshot, and the SSH service
    can be started using the `service ssh start` command:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/a0828a0d-f41a-4fe3-8206-f9514960a9e8.png)'
  prefs: []
  type: TYPE_IMG
- en: File Transfer Protocol (FTP)
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'While the web server can be used to quickly host and serve small files, an
    FTP server offers a better and reliable solution to host and serve larger-sized
    files. We can install an FTP server on Kali Linux using the `apt-get install vsftpd` command as
    shown in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/d65fc672-11a9-4bd3-927a-9c105f183b8f.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Once installed, we can edit the configuration as per our needs by modifying
    the `/etc/vsftpd.conf` file. Once the necessary configuration has been done, we
    can start the FTP server using the `service vsftpd start` command as shown in
    the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/78edd188-5d83-4da6-b88c-1fdeb087a649.png)'
  prefs: []
  type: TYPE_IMG
- en: Software management
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'The command-line utility `apt-get` can be used to install most required applications
    and utilities. However, Kali Linux also has a GUI tool for managing software.
    The tool can be accessed using the following path: Applications | Usual Applications
    | System Tools | Software.'
  prefs: []
  type: TYPE_NORMAL
- en: 'The software manager can be used to remove existing software or add new software
    as shown in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/dcf6fa8a-b9c4-4431-9381-28830a3461c5.png)'
  prefs: []
  type: TYPE_IMG
- en: List of tools to be used during assessment
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'There are tons of tools available for performing various tasks throughout the
    penetration testing lifecycle. However, the following is a list of tools that
    are most commonly used during a penetration test:'
  prefs: []
  type: TYPE_NORMAL
- en: '| **Sr. no** | **Penetration testing phase** | **Tools** |'
  prefs: []
  type: TYPE_TB
- en: '| 1 | Information gathering | SPARTA, NMAP, Dmitry, Shodan, Maltego, theHarvester,
    Recon-ng |'
  prefs: []
  type: TYPE_TB
- en: '| 2 | Enumeration | NMAP, Unicornscan |'
  prefs: []
  type: TYPE_TB
- en: '| 3 | Vulnerability assessment | OpenVAS, NExpose, Nessus |'
  prefs: []
  type: TYPE_TB
- en: '| 4 | Gaining access | Metasploit, Backdoor-factory, John The Ripper, Hydra
    |'
  prefs: []
  type: TYPE_TB
- en: '| 5 | Privilege escalation | Metasploit |'
  prefs: []
  type: TYPE_TB
- en: '| 6 | Covering tracks | Metasploit |'
  prefs: []
  type: TYPE_TB
- en: '| 7 | Web application security testing | Nikto, w3af, Burp Suite, ZAP Proxy,
    SQLmap |'
  prefs: []
  type: TYPE_TB
- en: '| 8 | Reporting | KeepNote, Dradis |'
  prefs: []
  type: TYPE_TB
- en: Summary
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In this chapter, we learned that Kali Linux in a virtual environment can be
    effectively used to perform vulnerability assessment and penetration tests. We
    also went through some absolute basics about Kali Linux and configure its environment.
  prefs: []
  type: TYPE_NORMAL
