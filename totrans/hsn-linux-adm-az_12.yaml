- en: 'Chapter 12: Appendix'
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: This chapter presents a set of solutions for all the questions that were asked
    in the previous chapters. If you have already answered these questions, you can
    check the accuracy of your answers. If you were unable to find a solution at the
    time, you can refer to the answers given here for the respective chapters.
  prefs: []
  type: TYPE_NORMAL
- en: 'Chapter 1: Exploring the Microsoft Azure Cloud'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: You can virtualize compute, network, and storage resources. Of course, at the
    end of the day, you'll still need hardware somewhere in the world to run the hypervisors,
    and possibly a cloud platform on top of that.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Virtualization emulates hardware, and containers emulate an operating system
    where multiple containers run on an underlying operating system. In virtualization,
    each virtual machine has its own kernel; they don't use the hypervisor/hardware
    kernel. In hardware virtualization, everything is transformed into software. In
    container virtualization, only processes are isolated.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: It depends; do you develop your application on the same platform? If so, then
    PaaS is the service type for you; otherwise, use IaaS. SaaS provides an application;
    it's not a hosting platform.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: It depends. Azure is compliant with and helps you to comply with legal rules
    and security/privacy policies. Plus, there is the concept of different regions
    if there are concerns about having data in other parts of the world. But there
    are always exceptions—most of the time, company policies or governmental rulings.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: It is very important for scalability, performance, and redundancy.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: It's a cloud-based identity management service for controlling access to your
    cloud and on-premises hybrid environment. It lets you sign in and access both
    cloud and on-premises environments instead of using your own AD servers and managing
    them.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Chapter 2: Getting Started with the Azure Cloud'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: It helps with automation. Besides that, the web-based portal changes frequently,
    and the command-line interface is much more stable. In our opinion, it also gives
    you a better understanding of the underlying technology, thanks to its more or
    less strict workflow.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: It provides access for storing all your data objects. You'll need one for boot
    diagnostics and data for Azure Cloud Shell. More details can be found in *Chapter
    4*, *Managing Azure*.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The storage account must be globally unique in Azure.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: An offer is a group of related images offered by a publisher, such as Ubuntu
    Server. An image is a specific image.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: A stopped Azure virtual machine keeps resources allocated, such as dynamic public
    IP addresses, and incurs costs, whereas a deallocated virtual machine frees all
    resources so it stops incurring resource costs. However, both incur storage costs.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Key-based authentication helps in automation as it can be used without exposing
    secrets/passwords in your scripts.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Both a public and a private key will be created (if they are still necessary)
    and stored in your home directory (`~/.ssh`); the public key will be added to
    the `authorized_keys` file in the virtual machine
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Chapter 3: Basic Linux Administration'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '`for user in Lisa John Karel Carola; useradd $user; done`.'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Execute `passwd <user>` and enter `welc0meITG` and it will ask you to enter
    the password again to confirm, so enter `welc0meITG` again.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '`getent<user>`.'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '`groupadd finance;` `groupadd staff`.'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '`groupmems -g <group_name> -a <user_name>`; alternatively, `usermod –a –G <group_name>
    <user_name>`.'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'To create the directory and set group ownership, execute the following:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: 'Similarly, for `finance`, execute these commands:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: '`chmod –R g+r /home/finance`.'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The default get access control list (`getfacl -d`) will list the ACL of a user.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Chapter 4: Managing Azure'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'You don''t need anything when you create a virtual machine using the Azure
    portal. When you use the command line, you need virtual networks with the following:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: A resource group
  prefs: []
  type: TYPE_NORMAL
- en: Azure **Virtual Network** (**VNet**)
  prefs: []
  type: TYPE_NORMAL
- en: A configured subnet
  prefs: []
  type: TYPE_NORMAL
- en: A network security group
  prefs: []
  type: TYPE_NORMAL
- en: A public IP address
  prefs: []
  type: TYPE_NORMAL
- en: A network interface
  prefs: []
  type: TYPE_NORMAL
- en: You need name services such as Diagnostics and Monitoring, which require a storage
    account.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Sometimes (for instance, for a storage account), the name must be unique. A
    prefix combined with a randomly generated number is a nice way to make the name
    recognizable and unique.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: To define the IP range that can be used within a virtual network.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: To create one or more subnets within the virtual network that can be isolated
    or routed to each other, without going outside the virtual network.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: A network security group provides ACLs for the network and provides port-forwarding
    to the virtual machines or containers.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Traffic from the virtual machine to the internet is sent via **Source Network
    Address Translation** (**SNAT**). This means that the IP address of the originating
    packet is replaced with the public IP address, which is required for TCP/IP for
    outbound and inbound routing.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: A dynamically allocated public IP address will be released when the virtual
    machine is deallocated. When the virtual machine starts again, it will get another
    IP address. You can create and assign static public IP address when it is mandatory
    to keep the same IP address even after the service IP address changes.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Chapter 5: Advanced Linux Administration'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The Linux kernel.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '`systemd-udevd`.'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '`ls /sys/class/net` and `ip link show`.'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The Azure agent for Linux.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '`ls /sys/class/net` and `lsblk`. The `lsscsi` command can be helpful as well.'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: It is a good idea to use `RAID0` to improve performance and allow improved throughput
    compared to using just a single disk.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: At the filesystem level, using `mdadm)` or **Logical Volume Manager** (**LVM**)
    (not covered in this chapter).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Create the RAID, format it, and make a mount point:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: 'Create a unit file, `/etc/systemd/system/mnt-myraid.mount`:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: 'Start and enable it at boot:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs: []
  type: TYPE_PRE
- en: 'Chapter 6: Managing Linux Security and Identities'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Using the `firewall-cmd` file or by deploying `/etc/firewalld` directory.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The `--permanent` parameter makes it persistent across reboots and executes
    during start up configuration.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: In Linux, you can restrict access using ACLs in systemd. Some applications also
    provide other host allow/deny options. In Azure, you have network security groups
    and the Azure Firewall service.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '**Discretionary access control** (**DAC**) is used for restricting access based
    on users/groups and permissions on files. **Mandatory access control** (**MAC**)
    further restricts access based on classification labels for each resource object.'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: If someone gained access illegally to an application or system, with DAC, there
    is no way to prevent further access, especially for files with the same user/group
    owner and files with permissions for others.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Every device will have a unique MAC address and you can find your virtual machine's
    MAC address using `ipconfig/ all` and then look for Physical Address.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'MAC frameworks that utilize Linux Security Modules are as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: 'SELinux: Red Hat–based distributions and SUSE'
  prefs: []
  type: TYPE_NORMAL
- en: 'AppArmor: Ubuntu and SUSE'
  prefs: []
  type: TYPE_NORMAL
- en: 'The lesser-known TOMOYO (SUSE): Not covered in this book'
  prefs: []
  type: TYPE_NORMAL
- en: Besides the fact that SELinux can protect more resource objects, AppArmor works
    directly with paths, while SELinux protects the whole system with fine-grained
    access control.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'You need the following prerequisites before joining an AD domain:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Kerberos client for authorization
  prefs: []
  type: TYPE_NORMAL
- en: '`realm`, `adcli`, and the `net` command'
  prefs: []
  type: TYPE_NORMAL
- en: 'Chapter 7: Deploying Your Virtual Machines'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: We use automated deployment to save time, to get a reproducible environment
    quickly up and running, and to avoid manual errors.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Besides the answer to the previous question, a standardized working environment
    makes team-based application development possible.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Scripting is very flexible. Scripts are easier to create and can be invoked
    manually anytime. The automation process can be triggered by events such as adding
    code to Git using `git push` or the stopping/starting of your virtual machines.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Azure Resource Manager is the most important one. In addition, you can use Terraform,
    Ansible, and PowerShell.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Vagrant deploys a workload in Azure; Packer creates a custom image that you
    can deploy.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'For multiple reasons, the most important ones are the following:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Security, to harden the image using CIS standards
  prefs: []
  type: TYPE_NORMAL
- en: When customization is needed for a standard image
  prefs: []
  type: TYPE_NORMAL
- en: Not dependent on the offerings of a third party
  prefs: []
  type: TYPE_NORMAL
- en: Capture an existing virtual machine
  prefs: []
  type: TYPE_NORMAL
- en: Convert a snapshot to an image
  prefs: []
  type: TYPE_NORMAL
- en: 'You can create your own image by building your own VHD file. The following
    are the options for doing so:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Create a virtual machine in Hyper-V or VirtualBox, which is a free hypervisor
    available for Windows, Linux, and macOS.
  prefs: []
  type: TYPE_NORMAL
- en: Create your virtual machine in VMware Workstation or KVM and use it in Linux
    qemu-img to convert the image.
  prefs: []
  type: TYPE_NORMAL
- en: 'Chapter 8: Exploring Continuous Configuration Automation'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Example scripts are available on GitHub at [https://github.com/PacktPublishing/Hands-On-Linux-Administration-on-Azure---Second-Edition/tree/master/chapter12/solutions_chapter08](https://github.com/PacktPublishing/Hands-On-Linux-Administration-on-Azure---Second-Edition/tree/master/chapter12/solutions_chapter08).
  prefs: []
  type: TYPE_NORMAL
- en: 'Chapter 9: Container Virtualization in Azure'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: You can use containers for packaging and distributing your applications, which
    can be platform-independent. Containers remove the need for virtual machine and
    operating system management and help you achieve high availability and scalability.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Containers are not suitable if you have a huge monolithic application that requires
    all the resources of the underlying virtual machines.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '**Linux containers** (**LXCs**) are an optimal solution that can be provisioned
    in Azure.'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Tools such as Buildah make it possible to create virtual machines that can be
    used in every solution. Rkt (pronounced "rocket") also supports the Docker format.
    The Open Container Initiative is working very hard to create standards to make
    the creation of virtual machines even easier.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You can develop everything in Azure or you can develop locally and then push
    to a remote environment.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: It's container platform–agnostic, and the Buildah tool is easier to use than
    other tools. You can explore further at [https://github.com/containers/buildah](https://github.com/containers/buildah).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Containers can be built, replaced, stopped, and destroyed on demand without
    any impact upon the application or data, so it's not recommended to store any
    data in the container. Instead, store it in a volume.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Chapter 10: Working with Azure Kubernetes Service'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: A pod is a group of containers with shared resources, such as storage and network,
    as well as a specification for how to run the containers.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: A good reason to create a multiple-container pod is to support co-located, co-managed
    helper processes for your primary application.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: There are multiple methods available, including Draft and Helm, which were discussed
    in the chapter in addition to **Azure Kubernetes Service** (**AKS**).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You can use `kubectl` to update your application in AKS. In addition, you can
    also use Helm and Draft.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You don't need to do it yourself manually; it will be done automatically by
    AKS.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You will need an iSCSI solution and a clustered filesystem when you want to
    read/write simultaneously from multiple containers.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Example code is provided on GitHub at [https://github.com/MicrosoftDocs/azure-docs/blob/master/articles/aks/azure-disks-dynamic-pv.md](https://github.com/MicrosoftDocs/azure-docs/blob/master/articles/aks/azure-disks-dynamic-pv.md).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Chapter 11: Troubleshooting and Monitoring Your Workloads'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: You can access your virtual machine using Azure Serial Console as root without
    a password unless it's specifically blocked.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: To collect all the standard output, syslog messages, and related messages from
    the kernel, systemd processes, and units.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'syslog uses the following list of severities (per application):'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '`Alert`: Action must be taken immediately.'
  prefs: []
  type: TYPE_NORMAL
- en: '`Critical`: Critical conditions.'
  prefs: []
  type: TYPE_NORMAL
- en: '`Error`: Error conditions.'
  prefs: []
  type: TYPE_NORMAL
- en: '`Warning`: Warning conditions.'
  prefs: []
  type: TYPE_NORMAL
- en: '`Notice`: Normal but significant conditions.'
  prefs: []
  type: TYPE_NORMAL
- en: '`Informational`: Informational messages.'
  prefs: []
  type: TYPE_NORMAL
- en: '`Debug`: Debug-level messages.'
  prefs: []
  type: TYPE_NORMAL
- en: 0-Emergency, 1-Alert, 2-Critical, 3-Error, 4-Warning, 5-Notice, 6-Informational,
    7-Debug.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Use `logger` or `systemd-cat`. You can use it if an application or script doesn't
    have syslog support. Another option is to add logging entries as a part of your
    change management.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The Azure Log Analytics service is used to view the metrics of a virtual machine.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: There are several shortcomings of the `top` utility; for instance, you can't
    see short-lived processes. The `atop` and `dstat` utilities are solutions to this
    problem.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '`sysstat` utilities provide historical data; `dstat` provides real-time monitoring.'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: It makes the collection of data coming from `tcpdump` of your Azure virtual
    machine (workstation) easier to read and it has great analysis potential.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
