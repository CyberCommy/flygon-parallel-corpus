- en: Preface
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: This book is dedicated to the use of Kali Linux in performing penetration tests
    against networks. A penetration test simulates an attack against a network or
    a system by a malicious outsider or insider. Unlike a vulnerability assessment,
    penetration testing is designed to include the exploitation phase. Therefore,
    it proves that the exploit is present, and that it is accompanied by the very
    real risk of being compromised if not acted upon.
  prefs: []
  type: TYPE_NORMAL
- en: Note
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Throughout this book, we will refer to "penetration testers," "attackers," and
    "hackers" interchangeably as they use the same techniques and tools to assess
    the security of networks and data systems. The only difference between them is
    their end objective—a secure data network, or a data breach.
  prefs: []
  type: TYPE_NORMAL
- en: 'Most testers and attackers follow an informal, open source, or proprietary-defined
    testing methodology that guides the testing process. There are certain advantages
    of following a methodology:'
  prefs: []
  type: TYPE_NORMAL
- en: A methodology identifies parts of the testing process that can be automated
    (for example, a tester may always use a ping sweep to identify potential targets;
    therefore, this can be scripted), allowing the tester to focus on creative techniques
    to find and exploit vulnerabilities
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The results are repeatable, allowing them to be compared over time or to cross-validate
    one tester's results against another, or to determine how the security of the
    target has improved (or not!) over time
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: A defined methodology is predictable in terms of time and personnel requirements,
    allowing costs to be controlled and minimized
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: A methodology that has been preapproved by the client, protects the tester against
    liability in the event there is any damage to the network or data
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Formal methodologies include the following well-known examples:'
  prefs: []
  type: TYPE_NORMAL
- en: '**Kevin Orrey''s penetration testing framework**: This methodology walks the
    tester through the sequenced steps of a penetration test, providing hyperlinks
    to tools and relevant commands. More information can be found at [www.vulnerabilityassessment.co.uk](http://www.vulnerabilityassessment.co.uk).'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Information Systems Security Assessment Framework (ISSAF)**: This comprehensive
    guide aims to be the single source for testing a network. More information on
    this can be found at [www.oissg.org](http://www.oissg.org).'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**NIST SP 800-115, technical guide to information security testing and assessment**:
    Written in 2008, the four-step methodology is somewhat outdated. However, it does
    provide a good overview of the basic steps in penetration testing. You can get
    more information at [http://csrc.nist.gov/publications/nistpubs/800-115/SP800-115.pdf](http://csrc.nist.gov/publications/nistpubs/800-115/SP800-115.pdf).'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Open Source Security Testing Methodology Manual (OSSTMM)**: This is one of
    the older methodologies, and the latest version attempts to quantify identified
    risks. More details can be found at [www.osstmm.org](http://www.osstmm.org).'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Open Web Application Security Project (OWASP)**: This is focused on the 10
    most common vulnerabilities in web-based applications. More information on this
    can be found at [www.owasp.org](http://www.owasp.org).'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Penetration Testing Execution Standard (PTES)**: Actively maintained, this
    methodology is complete and accurately reflects on the activities of a malicious
    person. You can get more information at [www.pentest-standard.org](http://www.pentest-standard.org).'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Offensive (Web) Testing Framework (OWTF)**: Introduced in 2012, this is a
    very promising direction in combining the OWASP approach with the more complete
    and rigorous PTES methodology. More details can be found at [https://github.com/7a/owtf](https://github.com/7a/owtf).'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Unfortunately, the use of a structured methodology can introduce weaknesses
    into the testing process:'
  prefs: []
  type: TYPE_NORMAL
- en: Methodologies rarely consider *why* a penetration test is being undertaken,
    or which data is critical to the business and needs to be protected. In the absence
    of this vital first step, penetration tests lose focus.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Many penetration testers are reluctant to follow a defined methodology, fearing
    that it will hinder their creativity in exploiting a network.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Penetration testing fails to reflect the actual activities of a malicious attacker.
    Frequently, the client wants to see if you can gain administrative access on a
    particular system ("Can you root the box?"). However, the attacker may be focused
    on copying critical data in a manner that does not require root access, or cause
    a denial of service.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: To address the limitations inherent in formal testing methodologies, they must
    be integrated in a framework that views the network from the perspective of an
    attacker, the "kill chain."
  prefs: []
  type: TYPE_NORMAL
- en: The "Kill Chain" approach to penetration testing
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In 2009, Mike Cloppert of Lockheed Martin CERT introduced the concept that is
    now known as the "attacker kill chain." This includes the steps taken by an adversary
    when they are attacking a network. It does not always proceed in a linear flow
    as some steps may occur in parallel. Multiple attacks may be launched over time
    at the same target, and overlapping stages may occur at the same time.
  prefs: []
  type: TYPE_NORMAL
- en: 'In this book, we have modified the Cloppert''s kill chain to more accurately
    reflect on how attackers apply these steps when exploiting networks and data services.
    The following diagram shows a typical kill chain of an attacker:'
  prefs: []
  type: TYPE_NORMAL
- en: '![The "Kill Chain" approach to penetration testing](img/Image1.jpg)'
  prefs: []
  type: TYPE_IMG
- en: 'A typical kill chain of an attacker can be described as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '**Reconnaissance phase** – The adage, "reconnaissance time is never wasted
    time", adopted by most military organizations acknowledges that it is better to
    learn as much as possible about an enemy before engaging them. For the same reason,
    attackers will conduct extensive reconnaissance of a target before attacking.
    In fact, it is estimated that at least 70 percent of the "work effort" of a penetration
    test or an attack is spent conducting reconnaissance! Generally, they will employ
    two types of reconnaissance:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Passive reconnaissance** – This does not directly interact with the target
    in a hostile manner. For example, the attacker will review the publicly available
    website(s), assess online media (especially social media sites), and attempt to
    determine the "attack surface" of the target.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: One particular task will be to generate a list of past and current employee
    names. These names will form the basis of attempts to brute force, or guessing
    passwords. They will also be used in social engineering attacks.
  prefs: []
  type: TYPE_NORMAL
- en: This type of reconnaissance is difficult, if not impossible, to distinguish
    from the behavior of regular users.
  prefs: []
  type: TYPE_NORMAL
- en: '**Active reconnaissance** – This can be detected by the target but, it can
    be difficult to distinguish most online organizations'' faces from the regular
    backgrounds.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Activities occurring during active reconnaissance include physical visits to
    target premises, port scanning, and remote vulnerability scanning.
  prefs: []
  type: TYPE_NORMAL
- en: '**The delivery phase** – Delivery is the selection and development of the weapon
    that will be used to complete the exploit during the attack. The exact weapon
    chosen will depend on the attacker''s intent as well as the route of delivery
    (for example, across the network, via wireless, or through a web-based service).
    The impact of the delivery phase will be examined in the second half of this book.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**The exploit or compromise phase** – This is the point when a particular exploit
    is successfully applied, allowing attackers to reach their objective. The compromise
    may have occurred in a single phase (for example, a known operating system vulnerability
    was exploited using a buffer overflow), or it may have been a multiphase compromise
    (for example, an attacker physically accessed premises to steal a corporate phone
    book. The names were used to create lists for brute force attacks against a portal
    logon. In addition, e-mails were sent to all employees to click on an embedded
    link to download a crafted PDF file that compromised their computers.). Multiphase
    attacks are the norm when a malicious attacker targets a specific enterprise.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Post exploit: action on the objective** – This is frequently, and incorrectly,
    referred to as the "exfiltration phase" because there is a focus on perceiving
    attacks solely as a route to steal sensitive data (such as login information,
    personal information, and financial information); it is common for an attacker
    to have a different objective. For example, a business may wish to cause a denial
    of service in their competitor''s network to drive customers to their own website.
    Therefore, this phase must focus on the many possible actions of an attacker.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: One of the most common exploit activity occurs when, the attackers attempt to
    improve their access privileges to the highest possible level (vertical escalation),
    and to compromise as many accounts as possible (horizontal escalation).
  prefs: []
  type: TYPE_NORMAL
- en: '**Post exploit: persistence** – If there is value in compromising a network
    or system, then that value can likely be increased if there is persistent access.
    This allows attackers to maintain communications with a compromised system. From
    a defender''s point of view, this is the part of the kill chain that is usually
    the easiest to detect.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Kill chains are metamodels of an attacker's behavior when they attempt to compromise
    a network or a particular data system. As a metamodel, it can incorporate any
    proprietary or commercial penetration testing methodology. Unlike the methodologies,
    however, it ensures a strategic-level focus on how an attacker approaches the
    network. This focus on the attacker's activities will guide the layout and content
    of this book.
  prefs: []
  type: TYPE_NORMAL
- en: What this book covers
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: This book is divided into two parts. In [Part 1](pt01.html "Part 1. The Attacker's
    Kill Chain"), *The Attacker's Kill Chain*, we will follow the steps of a kill
    chain, analyzing each phase in detail. In [Part 2](pt02.html "Part 2. The Delivery
    Phase"), *The Delivery Phase*, we will focus on the delivery phase and some of
    the available methodologies to understand how attacks take place, and how this
    knowledge can be used to secure a network.
  prefs: []
  type: TYPE_NORMAL
- en: '[Chapter 1](ch01.html "Chapter 1. Starting with Kali Linux"), *Starting with
    Kali Linux*, introduces the reader to the fundamentals of Kali Linux, and its
    optimal configuration to support penetration testing.'
  prefs: []
  type: TYPE_NORMAL
- en: '[Chapter 2](ch02.html "Chapter 2. Identifying the Target – Passive Reconnaissance"),
    *Identifying the Target – Passive Reconnaissance*, provides a background on how
    to gather information about a target using publicly available sources, and the
    tools that can simplify the reconnaissance and information management.'
  prefs: []
  type: TYPE_NORMAL
- en: '[Chapter 3](ch03.html "Chapter 3. Active Reconnaissance and Vulnerability Scanning"),
    *Active Reconnaissance and Vulnerability Scanning*,introduces the reader to stealthy
    approaches that can be used to gain information about the target, especially the
    information that identifies vulnerabilities, which could be exploited.'
  prefs: []
  type: TYPE_NORMAL
- en: '[Chapter 4](ch04.html "Chapter 4. Exploit"), *Exploit*, demonstrates the methodologies
    that can be used to find and execute exploits that allow a system to be compromised
    by an attacker.'
  prefs: []
  type: TYPE_NORMAL
- en: '[Chapter 5](ch05.html "Chapter 5. Post Exploit – Action on the Objective"),
    *Post Exploit – Action on the Objective*,describes how attackers can escalate
    their privileges to achieve their objective for compromising the system, including
    theft of data, altering data, launching additional attacks, or creating a denial
    of service.'
  prefs: []
  type: TYPE_NORMAL
- en: '[Chapter 6](ch06.html "Chapter 6. Post Exploit – Persistence"), *Post Exploit
    – Persistence*,provides a background on how to configure a compromised system
    so that the attacker can return at will and continue post-exploit activities.'
  prefs: []
  type: TYPE_NORMAL
- en: '[Chapter 7](ch07.html "Chapter 7. Physical Attacks and Social Engineering"),
    *Physical Attacks and Social Engineering*, demonstrates why being able to physically
    access a system or interact with the humans who manage it provides the most successful
    route to exploitation.'
  prefs: []
  type: TYPE_NORMAL
- en: '[Chapter 8](ch08.html "Chapter 8. Exploiting Wireless Communications"), *Exploiting
    Wireless Communications*, demonstrates how to take advantage of common wireless
    connections to access data networks and isolated systems.'
  prefs: []
  type: TYPE_NORMAL
- en: '[Chapter 9](ch09.html "Chapter 9. Reconnaissance and Exploitation of Web-based
    Applications"), *Reconnaissance and Exploitation of Web-based Applications*, provides
    a brief overview of one of the most complex delivery phases to secure: web-based
    applications that are exposed to the public Internet.'
  prefs: []
  type: TYPE_NORMAL
- en: '[Chapter 10](ch10.html "Chapter 10. Exploiting Remote Access Communications"),
    *Exploiting Remote Access Communications*, provides an increasingly important
    route into systems as more and more organizations adopt distributed and work-from-home
    models that rely on remote access communications that are themselves vulnerable
    to attack.'
  prefs: []
  type: TYPE_NORMAL
- en: '[Chapter 11](ch11.html "Chapter 11. Client-side Exploitation"), *Client-side
    Exploitation*, focuses on attacks against applications on the end-user''s systems,
    which are frequently not protected to the same degree as the organization''s primary
    network.'
  prefs: []
  type: TYPE_NORMAL
- en: '[Appendix](apa.html "Appendix A. Installing Kali Linux"), *Installing Kali
    Linux*, provides an overview of how to install Kali Linux, and how to employ a
    whole-disk encryption to avoid an intercept of confidential testing data.'
  prefs: []
  type: TYPE_NORMAL
- en: What you need for this book
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In order to practice the material presented in this book, you will need virtualization
    tools such as VMware or VirtualBox.
  prefs: []
  type: TYPE_NORMAL
- en: You will need to download and configure the Kali Linux operating system and
    its suite of tools. To ensure that it is up-to-date and that you have all of the
    tools, you will need access to an Internet connection.
  prefs: []
  type: TYPE_NORMAL
- en: Sadly, not all of the tools on the Kali Linux system will be addressed since
    there are too many of them. The focus of this book is not to inundate the reader
    with all of the tools and options, but to provide an approach for testing that
    will give them the opportunity to learn and incorporate new tools as their experiences
    and knowledge change over time.
  prefs: []
  type: TYPE_NORMAL
- en: Although most of the examples from this book focus on Microsoft Windows, the
    methodology and most of the tools are transferrable to other operating systems
    such as Linux and the other flavors of Unix.
  prefs: []
  type: TYPE_NORMAL
- en: Finally, this book applies Kali to complete the attacker's kill chain against
    target systems. You will need a target operating system. Many of the examples
    in the book use Microsoft Windows XP. Although it is deprecated as of April 2014,
    it provides a "baseline" of standard behavior for many of the tools. If you know
    how to apply the methodology to one operating system, you can apply it to more
    recent operating systems such as Windows 7 and Windows 8.
  prefs: []
  type: TYPE_NORMAL
- en: Who this book is for
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: This book is intended for people who want to know more about data security.
    In particular, it targets people who want to understand *why* they use a particular
    tool when they do, as opposed to those people who throw as many tools as possible
    at a system to see if an exploit will happen. My goal is for the readers to develop
    their own method and approach to effective penetration testing, which will allow
    them to experiment and learn as they progress. I believe that this approach is
    the only effective way to understand how malicious people attack data systems,
    and therefore, the only way to understand how to mediate vulnerabilities before
    they can be exploited.
  prefs: []
  type: TYPE_NORMAL
- en: If you are a security professional, penetration tester, or just have an interest
    in the security of complex data environments, this book is for you.
  prefs: []
  type: TYPE_NORMAL
- en: Conventions
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In this book, you will find a number of styles of text that distinguish between
    different kinds of information. Here are some examples of these styles, and an
    explanation of their meaning.
  prefs: []
  type: TYPE_NORMAL
- en: 'Code words in text, database table names, folder names, filenames, file extensions,
    pathnames, dummy URLs, user input, and Twitter handles are shown as follows: "In
    this particular case, the VM has been assigned an IP address of `192.168.204.132`."'
  prefs: []
  type: TYPE_NORMAL
- en: 'A block of code is set as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: 'Any command-line input or output is written as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: '**New terms** and **important words** are shown in bold. Words that you see
    on the screen, in menus or dialog boxes for example, appear in the text like this:
    "If you double-click on the **truecrypt1** icon, you will be taken to a **File
    Browser** view."'
  prefs: []
  type: TYPE_NORMAL
- en: Note
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Warnings or important notes appear in a box like this.
  prefs: []
  type: TYPE_NORMAL
- en: Tip
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Tips and tricks appear like this.
  prefs: []
  type: TYPE_NORMAL
- en: Reader feedback
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Feedback from our readers is always welcome. Let us know what you think about
    this book—what you liked or may have disliked. Reader feedback is important for
    us to develop titles that you really get the most out of.
  prefs: []
  type: TYPE_NORMAL
- en: To send us general feedback, simply send an e-mail to `<[feedback@packtpub.com](mailto:feedback@packtpub.com)>`,
    and mention the book title via the subject of your message.
  prefs: []
  type: TYPE_NORMAL
- en: If there is a topic that you have expertise in and you are interested in either
    writing or contributing to a book, see our author guide on [www.packtpub.com/authors](http://www.packtpub.com/authors).
  prefs: []
  type: TYPE_NORMAL
- en: Customer support
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Now that you are the proud owner of a Packt book, we have a number of things
    to help you to get the most from your purchase.
  prefs: []
  type: TYPE_NORMAL
- en: Errata
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Although we have taken every care to ensure the accuracy of our content, mistakes
    do happen. If you find a mistake in one of our books—maybe a mistake in the text
    or the code—we would be grateful if you would report this to us. By doing so,
    you can save other readers from frustration and help us improve subsequent versions
    of this book. If you find any errata, please report them by visiting [http://www.packtpub.com/submit-errata](http://www.packtpub.com/submit-errata),
    selecting your book, clicking on the **errata submission form** link, and entering
    the details of your errata. Once your errata are verified, your submission will
    be accepted and the errata will be uploaded on our website, or added to any list
    of existing errata, under the Errata section of that title. Any existing errata
    can be viewed by selecting your title from [http://www.packtpub.com/support](http://www.packtpub.com/support).
  prefs: []
  type: TYPE_NORMAL
- en: Piracy
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Piracy of copyright material on the Internet is an ongoing problem across all
    media. At Packt, we take the protection of our copyright and licenses very seriously.
    If you come across any illegal copies of our works, in any form, on the Internet,
    please provide us with the location address or website name immediately so that
    we can pursue a remedy.
  prefs: []
  type: TYPE_NORMAL
- en: Please contact us at `<[copyright@packtpub.com](mailto:copyright@packtpub.com)>`
    with a link to the suspected pirated material.
  prefs: []
  type: TYPE_NORMAL
- en: We appreciate your help in protecting our authors, and our ability to bring
    you valuable content.
  prefs: []
  type: TYPE_NORMAL
- en: Questions
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: You can contact us at `<[questions@packtpub.com](mailto:questions@packtpub.com)>`
    if you are having a problem with any aspect of the book, and we will do our best
    to address it.
  prefs: []
  type: TYPE_NORMAL
