- en: Chapter 7. Members Inheritance and Polymorphism
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'In this chapter, we will learn about one of the most exciting features of object-oriented
    programming in Java 9: polymorphism. We will code many classes and then we will
    work with their instances in JShell to understand how objects can take many different
    forms. We will:'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
- en: Create concrete classes that inherit from abstract superclasses
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Work with instances of subclasses
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Understand polymorphism
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Control whether subclasses can or cannot override members
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Control whether classes can be subclassed
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Use methods that perform operations with instances of different subclasses
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Creating concrete classes that inherit from abstract superclasses
  id: totrans-8
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'In the previous chapter, we created an abstract base class named `VirtualAnimal`
    and then we coded the following three abstract subclasses: `VirtualMammal`, `VirtualDomesticMammal`,
    and `VirtualHorse`. Now, we will code the following three concrete classes. Each
    class represents a different horse breed and is a subclass of the `VirtualHorse`
    abstract class.'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
- en: '`AmericanQuarterHorse`: This class represents a virtual horse that belongs
    to the American Quarter Horse breed.'
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`ShireHorse`: This class represents a virtual horse that belongs to the Shire
    Horse breed.'
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`Thoroughbred`: This class represents a virtual horse that belongs to the Thoroughbred
    breed.'
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'The three concrete classes will implement the following three abstract methods
    they inherited from abstract superclasses:'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
- en: '`String getAsciiArt()`: This abstract method is inherited from the `VirtualAnimal`
    abstract class.'
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`String getBaby()`: This abstract method is inherited from the `VirtualAnimal`
    abstract class.'
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`String getBreed()`: This abstract method is inherited from the `VirtualHorse`
    abstract class.'
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'The following UML diagram shows the members for the three concrete classes
    that we will code: `AmericanQuarterHorse`, `ShireHorse`, and `Thoroughbred`. We
    don''t use bold text format for the three methods that each of these concrete
    classes will declare because they aren''t overriding the methods; they are implementing
    the abstract methods that the classes inherited.'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
- en: '![Creating concrete classes that inherit from abstract superclasses](img/00068.jpeg)'
  id: totrans-18
  prefs: []
  type: TYPE_IMG
- en: First, we will create the `AmericanQuarterHorse` concrete class. The following
    lines show the code for this class in Java 9\. Notice that there is no `abstract`
    keyword before `class`, and therefore, our class must make sure that it implements
    all the inherited abstract methods. The code file for the sample is included in
    the `java_9_oop_chapter_07_01` folder, in the `example07_01.java` file.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  id: totrans-20
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: Now we will create the `ShireHorse` concrete class. The following lines show
    the code for this class in Java 9\. The code file for the sample is included in
    the `java_9_oop_chapter_07_01` folder, in the `example07_01.java` file.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  id: totrans-22
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: Finally, we will create the `Thoroughbred` concrete class. The following lines
    show the code for this class in Java 9\. The code file for the sample is included
    in the `java_9_oop_chapter_07_01` folder, in the `example07_01.java` file.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  id: totrans-24
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: As it happened in the other subclasses that we coded, we have more than one
    constructor defined for the three concrete classes. The first constructor that
    requires four arguments uses the `super` keyword to call the constructor from
    the base class or superclass, that is, the constructor defined in the `VirtualHorse`
    class. After the constructor defined in the superclass finishes its execution,
    the code prints a message indicating that an instance of each specific concrete
    class has been created. The constructor defined in each class prints a different
    message.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
- en: The second constructor uses the `this` keyword to call the previously explained
    constructor with the received arguments and with `false` as the value for the
    `isPregnant` argument.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
- en: Each class returns a different `String` in the implementation of the `getBaby`
    and `getBreed` methods. In addition, each class returns a different ASCII art
    representation for a virtual horse in the implementation of the `getAsciiArt`
    method.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
- en: Understanding polymorphism
  id: totrans-28
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: We can use the same method, that is, a method with the same name and arguments,
    to cause different things to happen according to the class on which we invoke
    the method. In object-oriented programming, this feature is known as **polymorphism**.
    Polymorphism is the ability of an object to take on many forms, and we will see
    it in action by working with instances of the previously coded concrete classes.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
- en: The following lines create a new instance of the `AmericanQuarterHorse` class
    named `american` and use one of its constructors that doesn't require the `isPregnant`
    argument. The code file for the sample is included in the `java_9_oop_chapter_07_01`
    folder, in the `example07_01.java` file.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  id: totrans-31
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'The following lines show the messages that the different constructors displayed
    in JShell after we entered the previous code:'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  id: totrans-33
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: The constructor defined in the `AmericanQuarterHorse` calls the constructor
    from its superclass, that is, the `VirtualHorse` class. Remember that each constructor
    calls its superclass constructor and prints a message indicating that an instance
    of the class is created. We don't have five different instances; we just have
    one instance that calls the chained constructors of five different classes to
    perform all the necessary initialization to create an instance of `AmericanQuarterHorse`.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
- en: If we execute the following lines in JShell, all of them will display `true`
    as a result, because `american` belongs to the `VirtualAnimal`, `VirtualMammal`,
    `VirtualDomesticMammal`, `VirtualHorse`, and `AmericanQuarterHorse` classes. The
    code file for the sample is included in the `java_9_oop_chapter_07_01` folder,
    in the `example07_01.java` file.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE5]'
  id: totrans-36
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'The results of the previous lines mean that the instance of the `AmericanQuarterHorse`
    class, whose reference is saved in the `american` variable of type `AmericanQuarterHorse`,
    can take on the form of an instance of any of the following classes:'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
- en: '`VirtualAnimal`'
  id: totrans-38
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`VirtualMammal`'
  id: totrans-39
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`VirtualDomesticMammal`'
  id: totrans-40
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`VirtualHorse`'
  id: totrans-41
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`AmericanQuarterHorse`'
  id: totrans-42
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'The following screenshot shows the results of executing the previous lines
    in JShell:'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
- en: '![Understanding polymorphism](img/00069.jpeg)'
  id: totrans-44
  prefs: []
  type: TYPE_IMG
- en: 'We coded the `printBreed` method within the `VirtualHorse` class, and we didn''t
    override this method in any of the subclasses. The following is the code for the
    `printBreed` method:'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE6]'
  id: totrans-46
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: The code prints the `String` returned by the `getBreed` method, declared in
    the same class as an abstract method. The three concrete classes that inherit
    from `VirtualHorse` implemented the `getBreed` method and each of them returns
    a different `String`. When we called the `american.printBreed` method, JShell
    displayed `American Quarter Horse`.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
- en: The following lines create an instance of the `ShireHorse` class named `zelda`.
    Note that, in this case, we use the constructor that requires the `isPregnant`
    argument. As happened when we created an instance of the `AmericanQuarterHorse`
    class, JShell will display a message for each constructor that is executed as
    a result of the chained constructors we coded. The code file for the sample is
    included in the `java_9_oop_chapter_07_01` folder, in the `example07_01.java`
    file.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE7]'
  id: totrans-49
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: The next lines call the `printAverageNumberOfBabies` and `printAsciiArt` instance
    methods for `american`, the instance of `AmericanQuarterHorse`, and `zelda`, which
    is the instance of `ShireHorse`. The code file for the sample is included in the
    `java_9_oop_chapter_07_01` folder, in the `example07_01.java` file.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE8]'
  id: totrans-51
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: We coded the `printAverageNumberOfBabies` and `printAsciiArt` methods in the
    `VirtualAnimal` class, and we didn't override them in any of its subclasses. Hence,
    when we call these methods for either `american` or `Zelda`, Java will execute
    the code defined in the `VirtualAnimal` class.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
- en: 'The `printAverageNumberOfBabies` method uses the `int` value returned by `getAverageNumberOfBabies`
    and the `String` returned by the `getBaby` method to generate a `String` that
    represents the average number of babies for a virtual animal. The `VirtualHorse`
    class implemented the inherited `getAverageNumberOfBabies` abstract method with
    code that returns `1`. The `AmericanQuarterHorse` and `ShireHorse` classes implemented
    the inherited `getBaby` abstract method with code that returns a `String` that
    represents a baby for the virtual horse breed: `"AQH baby"` and `"ShireHorse baby"`.
    Thus, our call to the `printAverageNumberOfBabies` method will produce different
    results in each instance because they belong to a different class.'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
- en: The `printAsciiArt` method uses the `String` returned by the `getAsciiArt` method
    to print the ASCII art that represents a virtual horse. The `AmericanQuarterHorse`
    and `ShireHorse` classes implemented the inherited `getAsciiArt` abstract method
    with code that returns a `String` with the ASCII art that is appropriate for each
    virtual horse that the class represents. Thus, our call to the `printAsciiArt`
    method will produce different results in each instance because they belong to
    a different class.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
- en: The following screenshot shows the results of executing the previous lines in
    JShell. Both instances run the same code for the two methods that were coded in
    the `VirtualAnimal` abstract class. However, each class provided a different implementation
    for the methods that end up being called to generate the result and cause the
    differences in the output.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
- en: '![Understanding polymorphism](img/00070.jpeg)'
  id: totrans-56
  prefs: []
  type: TYPE_IMG
- en: The following lines create an instance of the `Thoroughbred` class named `willow`,
    and then call its `printAsciiArt` method. As happened before, JShell will display
    a message for each constructor that is executed as a result of the chained constructors
    we coded. The code file for the sample is included in the `java_9_oop_chapter_07_01`
    folder, in the `example07_01.java` file.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE9]'
  id: totrans-58
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: The following screenshot shows the results of executing the previous lines in
    JShell. The new instance is from a class that provides a different implementation
    of the `getAsciiArt` method, and therefore, we will see different ASCII art from
    what we saw in the previous two calls to the same method for the other instances.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
- en: '![Understanding polymorphism](img/00071.jpeg)'
  id: totrans-60
  prefs: []
  type: TYPE_IMG
- en: The following lines call the `neigh` method for the instance named `willow`
    with a different number of arguments. This way, we take advantage of the `neigh`
    method that we overloaded four times with different arguments. Remember that we
    coded the four `neigh` methods in the `VirtualHorse` class and the `Thoroughbred`
    class inherits the overloaded methods from this superclass through its hierarchy
    tree. The code file for the sample is included in the `java_9_oop_chapter_07_01`
    folder, in the `example07_01.java` file.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE10]'
  id: totrans-62
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'The following screenshot shows the results of calling the `neigh` and `nicker`
    methods with the different arguments in JShell:'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
- en: '![Understanding polymorphism](img/00072.jpeg)'
  id: totrans-64
  prefs: []
  type: TYPE_IMG
- en: We called the four versions of the `neigh` method defined in the `VirtualHorse`
    class for the `Thoroughbred` instance named `willow`. The third and fourth lines
    that call the `neigh` method specify a value for the `otherDomesticMammal` argument
    of type `VirtualDomesticMammal`. The third line specifies `american` as the value
    for `otherDomesticMammal` and the fourth line specifies `zelda` as the value for
    the same argument. Both the `AmericanQuarterHorse` and `ShireHorse` concrete classes
    are subclasses of `VirtualHorse`, and `VirtualHorse` is a subclass of `VirtualDomesticMammal`.
    Hence, we can use `american` and `zelda` as arguments where a `VirtualDomesticMammal`
    instance is required.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
- en: Then, we called the four versions of the `nicker` method defined in the `VirtualHorse`
    class for the `AmericanQuarterHorse` instance named `american`. The third and
    fourth lines that call the `nicker` method specify `willow` as the value for the
    `otherDomesticMammal` argument of type `VirtualDomesticMammal`. The `Thoroughbred`
    concrete class is also a subclass of `VirtualHorse`, and `VirtualHorse` is a subclass
    or `VirtualDomesticMammal`. Hence, we can use `willow` as an argument where a
    `VirtualDomesticMammal` instance is required.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
- en: Controlling overridability of members in subclasses
  id: totrans-67
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'We will code the `VirtualDomesticCat` abstract class and its concrete subclass:
    `MaineCoon`. Then, we will code the `VirtualBird` abstract class, its `VirtualDomesticBird`
    abstract subclass, and the `Cockatiel` concrete subclass. Finally, we will code
    the `VirtualDomesticRabbit` concrete class. While coding these classes, we will
    use Java 9 features that allow us to decide whether the subclasses can or cannot
    override specific members.'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
- en: 'All the virtual domestic cats must be able to talk, and therefore, we will
    override the `talk` method inherited from `VirtualDomesticMammal` to print the
    word that represents a cat meowing: `"Meow"`. We also want to provide a method
    to print `"Meow"` a specific number of times. Hence, at this point, we realize
    that we can take advantage of the `printSoundInWords` method we declared in the
    `VirtualHorse` class.'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
- en: 'We cannot access this instance method in the `VirtualDomesticCat` abstract
    class because it doesn''t inherit from `VirtualHorse`. Thus, we will move this
    method from the `VirtualHorse` class to its superclass: `VirtualDomesticMammal`.'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
- en: Tip
  id: totrans-71
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: We will use the `final` keyword before the return type for the methods that
    we don't want to be overridden in subclasses. When a method is marked as a final
    method, the subclasses cannot override the method and the Java 9 compiler shows
    an error if they try to do so.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
- en: Not all the birds are able to fly in real-life. However, all our virtual birds
    are able to fly, and therefore, we will implement the inherited `isAbleToFly`
    abstract method as a final method that returns `true`. This way, we make sure
    that all the classes that inherit from the `VirtualBird` abstract class will always
    run this code for the `isAbleToFly` method and that they won't be able to override
    it.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
- en: The following UML diagram shows the members for the new abstract and concrete
    classes that we will code. In addition, the diagram shows the `printSoundInWords`
    method moved from the `VirtualHorse` abstract class to the `VirtualDomesticMammal`
    abstract class.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
- en: '![Controlling overridability of members in subclasses](img/00073.jpeg)'
  id: totrans-75
  prefs: []
  type: TYPE_IMG
- en: First, we will create a new version of the `VirtualDomesticMammal` abstract
    class. We will add the `printSoundInWords` method that we have in the `VirtualHorse`
    abstract class and we will use the `final` keyword to indicate that we don't want
    to allow subclasses to override this method. The following lines show the new
    code for the `VirtualDomesticMammal` class. The code file for the sample is included
    in the `java_9_oop_chapter_07_01` folder, in the `example07_02.java` file.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE11]'
  id: totrans-77
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'After we enter the previous lines, JShell will display the following messages:'
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE12]'
  id: totrans-79
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: JShell indicates us that the `VirtualHorse` class and its subclasses cannot
    be referenced until we correct an error for this class. The class declares the
    `printSoundInWords` method and overrides the recently added method with the same
    name and arguments in the `VirtualDomesticMammal` class. We used the `final` keyword
    in the new declaration to make sure that any subclass cannot override it, and
    therefore, the Java compiler generates the error message that JShell displays.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
- en: Now, we will create a new version of the `VirtualHorse` abstract class. The
    following lines show the new version that removes the `printSoundInWords` method
    and uses the `final` keyword to make sure that many methods cannot be overridden
    by any of the subclasses. The declarations that use the `final` keyword to avoid
    the methods to be overridden are highlighted in the next lines. The code file
    for the sample is included in the `java_9_oop_chapter_07_01` folder, in the `example07_02.java`
    file.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE13]'
  id: totrans-82
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'After we enter the previous lines, JShell will display the following messages:'
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE14]'
  id: totrans-84
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: We replaced the definition for the `VirtualHorse` class and the subclasses were
    also updated. It is important to know that the variables we declared in JShell
    that held references to instances of subclasses of `VirtualHorse` were set to
    null.
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
- en: Controlling subclassing of classes
  id: totrans-86
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: The `final` keyword has one additional usage. We can use `final` as a modifier
    before the `class` keyword in the class declaration to indicate Java that we want
    to generate a **final class**, that is, a class that cannot be extended or subclassed.
    Java 9 won't allow us to create a subclass for a final class.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
- en: Now, we will create the `VirtualDomesticCat` abstract class and then we will
    declare a concrete subclass named `MaineCoon` as a final class. This way, we will
    make sure that nobody will be able to create a subclass of `MaineCoon`. The following
    lines show the code for the `VirtualDomesticCat` abstract class. The code file
    for the sample is included in the `java_9_oop_chapter_07_01` folder, in the `example07_02.java`
    file.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE15]'
  id: totrans-89
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: The `VirtualDomesticCat` abstract class implements many of the abstract methods
    inherited from the `VirtualDomesticMammal` superclass as final methods, and overrides
    the `talk` method with a final method. Thus, we won't be able to create a subclass
    of `VirtualDomesticCat` that overrides the `isAbleToFly` method to return `true`.
    We won't have virtual cats that will be able to fly.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
- en: 'The following lines show the code for the `MaineCoon` concrete class that inherits
    from `VirtualDomesticCat`. We declare `MaineCoon` as a final class and it overrides
    the inherited `getAverageNumberOfBabies` method to return `6`. In addition, the
    final class implements the following inherited abstract methods: `getBaby` and
    `getAsciiArt`. The code file for the sample is included in the `java_9_oop_chapter_07_01`
    folder, in the `example07_02.java` file.'
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE16]'
  id: totrans-92
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: Tip
  id: totrans-93
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: We didn't mark any method as `final` because all the methods in a final class
    are implicitly final.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
- en: However, when we run Java code outside of JShell, the final class will be created
    and we won't be able to subclass it.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
- en: Now, we will create the `VirtualBird` abstract class that inherits from `VirtualAnimal`.
    The following lines show the code for the `VirtualBird` abstract class. The code
    file for the sample is included in the `java_9_oop_chapter_07_01` folder, in the
    `example07_02.java` file.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE17]'
  id: totrans-97
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: The `VirtualBird` abstract class inherits the members from the previously declared
    `VirtualAnimal` abstract class and adds a new `String` mutable field named `feathersColor`.
    The new abstract class declares a constructor that requires initial values for
    `age` and `feathersColor` to create an instance of the class. The constructor
    uses the `super` keyword to call the constructor from the base class or superclass,
    that is, the constructor defined in the `VirtualAnimal` class that requires the
    `age` argument. After the constructor defined in the superclass finishes its execution,
    the code sets the value for the `feathersColor` mutable field and prints a message
    indicating that a virtual bird has been created.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
- en: The `VirtualBird` abstract class implements the inherited `isAbleToFly` method
    as a final method that returns `true`. We want to make sure that all the virtual
    birds in our application domain are able to fly.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
- en: Now, we will create the `VirtualDomesticBird` abstract class that inherits from
    `VirtualBird`. The following lines show the code for the `VirtualDomesticBird`
    abstract class. The code file for the sample is included in the `java_9_oop_chapter_07_01`
    folder, in the `example07_02.java` file.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE18]'
  id: totrans-101
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: The `VirtualDomesticBird` abstract class inherits the members from the previously
    declared `VirtualBird` abstract class and adds a new `String` immutable field
    called `name`. The new abstract class declares a constructor that requires initial
    values for `age`, `feathersColor`, and `name` to create an instance of the class.
    The constructor uses the `super` keyword to call the constructor from the superclass,
    that is, the constructor defined in the `VirtualBird` class that requires the
    `age` and `feathersColor` arguments. After the constructor defined in the superclass
    finishes its execution, the code sets the value for the `name` immutable field
    and prints a message indicating that a virtual domestic bird has been created.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
- en: 'The following lines show the code for the `Cockatiel` concrete class that inherits
    from `VirtualDomesticBird`. We declare `Cockatiel` as a final class and it implements
    the following inherited abstract methods: `isRideable`, `isHerbivore`, `isCarnivore`,
    `getAverageNumberOfBabies`, `getBaby`, and `getAsciiArt`. As previously explained,
    all the methods in a final class are implicitly final. The code file for the sample
    is included in the `java_9_oop_chapter_07_01` folder, in the `example07_02.java`
    file.'
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE19]'
  id: totrans-104
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: 'The following lines show the code for the `VirtualDomesticRabbit` concrete
    class that inherits from `VirtualDomesticMammal`. We declare `VirtualDomesticRabbit`
    as a final class because we don''t want additional subclasses. We will just have
    one type of virtual domestic rabbit in our application domain. The final class
    implements the following inherited abstract methods: `isAbleToFly`, `isRideable`,
    `isHerbivore`, `isCarnivore`, `getAverageNumberOfBabies`, `getBaby`, and `getAsciiArt`.
    The code file for the sample is included in the `java_9_oop_chapter_07_01` folder,
    in the `example07_02.java` file.'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE20]'
  id: totrans-106
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: Note
  id: totrans-107
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: JShell ignores the `final` modifier, and therefore, a class declared with the
    `final` modifier will allow subclasses in JShell.
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
- en: Creating methods that work with instances of different subclasses
  id: totrans-109
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'After we declare all the new classes, we will create the following two methods
    that receive a `VirtualAnimal` instance as an argument, that is, a `VirtualAnimal`
    instance or an instance of any subclass of `VirtualAnimal`. Each method calls
    a different instance method defined in the `VirtualAnimal` class: `printAverageNumberOfBabies`
    and `printAsciiArg`. The code file for the sample is included in the `java_9_oop_chapter_07_01`
    folder, in the `example07_02.java` file.'
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE21]'
  id: totrans-111
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: 'Then the following lines create instances of the next classes: `Cockatiel`,
    `VirtualDomesticRabbit`, and `MaineCoon`. The code file for the sample is included
    in the `java_9_oop_chapter_07_01` folder, in the `example07_02.java` file.'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE22]'
  id: totrans-113
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: The following screenshot shows the results of executing the previous lines in
    JShell. We will see the messages that the different constructors displayed in
    JShell after we enter the code to create each instance. These messages will allow
    us to easily understand all the chained constructors that were called when Java
    created each instance.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
- en: '![Creating methods that work with instances of different subclasses](img/00074.jpeg)'
  id: totrans-115
  prefs: []
  type: TYPE_IMG
- en: Then the following lines call the `printBabies` and `printAsciiArt` methods
    with the previously created instances as arguments. The code file for the sample
    is included in the `java_9_oop_chapter_07_01` folder, in the `example07_02.java`
    file.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE23]'
  id: totrans-117
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: 'The three instances become a `VirtualAnimal` argument for the different methods,
    that is, they take the form of a `VirtualAnimal` instance. However, the values
    used for the fields and the methods aren''t those declared in the `VirtualAnimal`
    class. The call to the `printAverageNumberOfBabies` and `printAsciiArt` instance
    methods take into account all the members declared in the subclasses because each
    instance is an instance of a subclass of `VirtualAnimal`:'
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
- en: Tip
  id: totrans-119
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: The `printBabies` and `printAsciiArt` methods that receive a `VirtualAnimal`
    instance as an argument can only access the members defined in the `VirtualAnimal`
    class for the instances that they receive as arguments because the argument type
    is `VirtualAnimal`. We can unwrap the `Cockatiel`, `VirtualDomesticRabbit`, and
    `MaineCoon` instances that are received in the `animal` argument if necessary.
    However, we will work with these scenarios later as we cover more advanced topics.
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
- en: The following screenshot shows the results of executing the previous lines for
    the `Cockatiel` instance named `tweety` in JShell.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
- en: '![Creating methods that work with instances of different subclasses](img/00075.jpeg)'
  id: totrans-122
  prefs: []
  type: TYPE_IMG
- en: The following screenshot shows the results of executing the previous lines for
    the `VirtualDomesticRabbit` instance named `bunny` in JShell.
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
- en: '![Creating methods that work with instances of different subclasses](img/00076.jpeg)'
  id: totrans-124
  prefs: []
  type: TYPE_IMG
- en: The following screenshot shows the results of executing the previous lines for
    the `MaineCoon` instance named `garfield` in JShell.
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
- en: '![Creating methods that work with instances of different subclasses](img/00077.jpeg)'
  id: totrans-126
  prefs: []
  type: TYPE_IMG
- en: Now we will create another method that receives a `VirtualDomesticMammal` instance
    as an argument, that is, a `VirtualDomesticMammal` instance or an instance of
    any subclass of `VirtualDomesticMammal`. The following function calls the `talk`
    instance method defined in the `VirtualDomesticMammal` class. The code file for
    the sample is included in the `java_9_oop_chapter_07_01` folder, in the `example07_02.java`
    file.
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE24]'
  id: totrans-128
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: 'Then, the following two lines call the `makeItTalk` method with the `VirtualDomesticRabbit`
    and `MaineCoon` instances as arguments: `bunny` and `garfield`. The code file
    for the sample is included in the `java_9_oop_chapter_07_01` folder, in the `example07_02.java`
    file.'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE25]'
  id: totrans-130
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: 'The call to the same method for a `VirtualDomesticMammal` instance received
    as an argument produces different results. The `VirtualDomesticRabbit` didn''t
    override the inherited `talk` method while the `MaineCoon` class inherited the
    `talk` method overridden in the `VirtualDomesticCat` abstract class to make domestic
    cat meow. The following screenshot shows the results of the two method calls in
    JShell:'
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
- en: '![Creating methods that work with instances of different subclasses](img/00078.jpeg)'
  id: totrans-132
  prefs: []
  type: TYPE_IMG
- en: 'The `VirtualAnimal` abstract class declared two instance methods that allow
    us to determine whether a virtual animal is younger or older than an other virtual
    animal: `isYoungerThan` and `isOlderThan`. These two methods receive a `VirtualAnimal`
    argument and return the results of applying an operator between the `age` value
    for the instance and the `age` value of the received instance.'
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
- en: 'The following lines call the `printAge` method for the three instances: `tweety`,
    `bunny`, and `garfield`. This method was declared in the `VirtualAnimal` class.
    Then, the next lines call the `isOlderThan` and `isYoungerThan` methods with these
    instances as arguments to display the results of comparing the age of the different
    instances. The code file for the sample is included in the `java_9_oop_chapter_07_01`
    folder, in the `example07_02.java` file.'
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 以下行调用`printAge`方法的三个实例：`tweety`，`bunny`和`garfield`。此方法在`VirtualAnimal`类中声明。然后，下一行调用`isOlderThan`和`isYoungerThan`方法，并将这些实例作为参数，以显示比较不同实例年龄的结果。示例的代码文件包含在`java_9_oop_chapter_07_01`文件夹中的`example07_02.java`文件中。
- en: '[PRE26]'
  id: totrans-135
  prefs: []
  type: TYPE_PRE
  zh: '[PRE26]'
- en: 'The following screenshot shows the results of executing the previous lines
    in JShell:'
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 以下屏幕截图显示了在JShell中执行前面行的结果：
- en: '![Creating methods that work with instances of different subclasses](img/00079.jpeg)'
  id: totrans-137
  prefs: []
  type: TYPE_IMG
  zh: '![创建可以与不同子类的实例一起工作的方法](img/00079.jpeg)'
- en: Test your knowledge
  id: totrans-138
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 测试您的知识
- en: 'Which of the following lines declares an instance method that cannot be overridden
    in any subclass:'
  id: totrans-139
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 以下哪行声明了一个实例方法，不能在任何子类中被覆盖：
- en: '`public void talk(): final {`'
  id: totrans-140
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`public void talk(): final {`'
- en: '`public final void talk() {`'
  id: totrans-141
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`public final void talk() {`'
- en: '`public notOverrideable void talk() {`'
  id: totrans-142
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`public notOverrideable void talk() {`'
- en: 'We have an abstract superclass named `Shape`. The `Circle` class is a subclass
    of `Shape` and is a concrete class. If we create an instance of `Circle` named
    `circle`, this instance will also be:'
  id: totrans-143
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们有一个名为`Shape`的抽象超类。`Circle`类是`Shape`的子类，是一个具体类。如果我们创建一个名为`circle`的`Circle`实例，这个实例也将是：
- en: An instance of `Shape`.
  id: totrans-144
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`Shape`的一个实例。'
- en: A subclass of `Circle`.
  id: totrans-145
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`Circle`的子类。'
- en: An abstract superclass of `Circle`.
  id: totrans-146
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`Circle`的一个抽象超类。'
- en: 'In UML diagrams, class names that use italic text format indicate that they
    are:'
  id: totrans-147
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在UML图中，使用斜体文本格式的类名表示它们是：
- en: Concrete classes.
  id: totrans-148
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 具体类。
- en: Classes that override at least one member inherited from its superclass.
  id: totrans-149
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 覆盖了至少一个从其超类继承的成员的具体类。
- en: Abstract classes.
  id: totrans-150
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 抽象类。
- en: 'Which of the following lines declares a class that cannot be subclassed:'
  id: totrans-151
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 以下哪行声明了一个不能被子类化的类：
- en: '`public final class Dog extends VirtualAnimal {`'
  id: totrans-152
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`public final class Dog extends VirtualAnimal {`'
- en: '`public final class Dog subclasses VirtualAnimal {`'
  id: totrans-153
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`public final class Dog subclasses VirtualAnimal {`'
- en: '`public final Dog subclasses VirtualAnimal {`'
  id: totrans-154
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`public final Dog subclasses VirtualAnimal {`'
- en: 'Which of the following lines declares a concrete class named `Circle` that
    can be subclassed and whose superclass is the `Shape` abstract class:'
  id: totrans-155
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 以下哪行声明了一个名为`Circle`的具体类，可以被子类化，其超类是`Shape`抽象类：
- en: '`public final class Shape extends Circle {`'
  id: totrans-156
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`public final class Shape extends Circle {`'
- en: '`public class Shape extends Circle {`'
  id: totrans-157
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`public class Shape extends Circle {`'
- en: '`public concrete class Shape extends Circle {`'
  id: totrans-158
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`public concrete class Shape extends Circle {`'
- en: Summary
  id: totrans-159
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: In this chapter, we created many abstract and concrete classes. We learned to
    control whether subclasses can or cannot override members, and whether classes
    can be subclassed.
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们创建了许多抽象和具体类。我们学会了控制子类是否可以覆盖成员，以及类是否可以被子类化。
- en: We worked with instances of many subclasses and we understood that objects can
    take many forms. We worked with many instances and their methods in JShell to
    understand how the classes and the methods that we coded are executed. We used
    methods that performed operations with instances of different classes that had
    a common superclass.
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 我们使用了许多子类的实例，并且了解到对象可以采用许多形式。我们在JShell中使用了许多实例及其方法，以了解我们编写的类和方法是如何执行的。我们使用了执行与具有共同超类的不同类的实例的操作的方法。
- en: Now that you have learned about members inheritance and polymorphism, we are
    ready to use contract programming with interfaces in Java 9, which is the topic
    we are going to discuss in the next chapter.
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 现在您已经了解了成员继承和多态性，我们准备在Java 9中使用接口进行契约编程，这是我们将在下一章中讨论的主题。
