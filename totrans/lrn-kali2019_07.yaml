- en: Passive Information Gathering
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Beginning a career in ethical hacking and/or penetration testing can be very
    exciting and, most of the time, our minds will be a bit overwhelmed, causing us
    to visit only the chapters about exploiting a system in a book such as this. However,
    conducting a penetration test is like starting a new project at home. Before you
    build a pool in your backyard, there are a few things you must consider, such
    as the space that's available, the cost of materials, the contractor's fees, and
    other details. Information gathering is a very important phase of the hacking
    life cycle and penetration testing.
  prefs: []
  type: TYPE_NORMAL
- en: In this chapter, we will focus on passive information gathering techniques and
    methods. We will learn how to use the internet to get us the information and specific
    details we need about our target by using both online resources and tools on Kali
    Linux.
  prefs: []
  type: TYPE_NORMAL
- en: 'We will be covering the following topics:'
  prefs: []
  type: TYPE_NORMAL
- en: Reconnaissance and footprinting
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Understanding passive information gathering
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Understanding **open source intelligence** (**OSINT**)
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Using the top OSINT tools
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Identifying target technologies and security controls
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Finding data leaks in cloud resources
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Understanding whois and copying websites with HTTrack
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Finding subdomains using Sublist3r
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Dear reader! Please ensure that you **do not** perform scans on any target organization,
    networks, or systems in the absence of appropriate **legal permission**.
  prefs: []
  type: TYPE_NORMAL
- en: Technical requirements
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'The following are the technical requirements for this chapter:'
  prefs: []
  type: TYPE_NORMAL
- en: '**Kali Linux**: [https://www.kali.org/](https://www.kali.org/)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Maltego**: [www.paterva.com](http://www.paterva.com)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Recon-ng**: [https://bitbucket.org/LaNMaSteR53/recon-ng](https://bitbucket.org/LaNMaSteR53/recon-ng)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**theHarvester**: [https://github.com/laramies/theHarvester](https://github.com/laramies/theHarvester)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**OSRFramework**: [https://github.com/i3visio/osrframework](https://github.com/i3visio/osrframework)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**HTTrack**: [www.httrack.com](http://www.httrack.com)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Sublist3r**: [https://github.com/aboul3la/Sublist3r](https://github.com/aboul3la/Sublist3r)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**S3Scanner**: [https://github.com/sa7mon/S3Scanner](https://github.com/sa7mon/S3Scanner)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Reconnaissance and footprinting
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: The various phases of hacking include reconnaissance, scanning, gaining access,
    maintaining access, and clearing tracks. The reconnaissance phase is the most
    important phase of a penetration test since this is when the ethical hacker or
    penetration tester conducts extensive research into gathering as much information
    about the target as possible. Furthermore, footprinting will help create a profile
    of the target, gathering profiling information such as running services, open
    ports, and operating systems.
  prefs: []
  type: TYPE_NORMAL
- en: We will now look at both reconnaissance and footprinting in more detail.
  prefs: []
  type: TYPE_NORMAL
- en: Reconnaissance
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: From a military perspective, reconnaissance is the observation and research
    of an enemy target. In cybersecurity, as a penetration tester, we use various
    tools and techniques to gather detailed information about a target organization
    and its underlying infrastructure.
  prefs: []
  type: TYPE_NORMAL
- en: Reconnaissance is vital in the field of penetration testing. As a penetration
    tester, we definitely need to know about our target, as well as its vulnerabilities
    and operating systems, before we attempt to gain access via exploitation. The
    information gathered during the reconnaissance phase will help us to choose the
    right tools and techniques to successfully exploit the target.
  prefs: []
  type: TYPE_NORMAL
- en: 'Reconnaissance can be divided into two categories:'
  prefs: []
  type: TYPE_NORMAL
- en: '**Passive**: Uses an indirect approach and does not engage the target'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Active**: Directly engages the target to gather specific details'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Next, we will dive into understanding footprinting.
  prefs: []
  type: TYPE_NORMAL
- en: Footprinting
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Footprinting is the procedure whereby as much information as possible is gathered
    in relation to a target. In footprinting, the objective is to obtain specific
    details about the target, such as its operating systems and the service versions
    of running applications. The information that's collected can be used in various
    ways to gain access to the target system, network, or organization. Footprinting
    allows a penetration tester to understand the security posture of the target infrastructure,
    quickly identify security vulnerabilities on the target systems and networks,
    create a network map of the organization, and reduce the area of focus to the
    specific IP addresses, domain names, and the types of devices regarding which
    information is required.
  prefs: []
  type: TYPE_NORMAL
- en: 'Footprinting is part of the reconnaissance phase; however, since footprinting
    is able to provide more specific details about the target, we can consider footprinting
    to be a subset of the reconnaissance phase. The following diagram provides a visual
    overview of how reconnaissance and footprinting sit together:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/83f455f3-b446-4a4f-81fc-897bbc93caf0.png)'
  prefs: []
  type: TYPE_IMG
- en: 'The following are the main objectives of footprinting:'
  prefs: []
  type: TYPE_NORMAL
- en: Collecting network information (domain names, IP addressing schemes, and network
    protocols)
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Collecting system information (user and group names, routing tables, system
    names, and types)
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Collecting organization information (employee details, company directory, and
    location details)
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'To successfully obtain information about a target, I would recommend using
    the following footprinting methodology:'
  prefs: []
  type: TYPE_NORMAL
- en: Checking search engines such as Yahoo, Bing, and Google
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Performing Google hacking techniques (advanced Google searches)
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Information gathering through social media platforms such as Facebook, LinkedIn,
    Instagram, and Twitter
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Footprinting the company's website
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Performing email footprinting techniques
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Using the `whois` command
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Performing DNS footprinting
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Network footprint techniques
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Social engineering
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: You are now able to differentiate between reconnaissance and footprinting. Both
    reconnaissance and footprinting are required during penetration testing as each
    provides vital information about the target. In the next section, we will take
    a deep dive into passive information gathering.
  prefs: []
  type: TYPE_NORMAL
- en: Understanding passive information gathering
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Passive information gathering is when you use an indirect approach to obtain
    information about your target. This method obtains information that's publicly
    available from many sources, thus eliminating direct contact with the potential
    target. Passive information gathering is usually fruitful, and a lot of organizations
    usually publish information and details about their organizations as a marketing
    strategy for their existing and potential customers. Sometimes, when organizations
    advertise a vacancy on a job recruiting website, the recruiter posts technical
    requirements for the potential candidate. From a penetration tester's point of
    view, the technical details can indicate the types of platforms and applications
    that are running within the organization's network infrastructure.
  prefs: []
  type: TYPE_NORMAL
- en: We have covered the concepts of passive information gathering. Now, let's take
    a deep dive into learning about OSINT in the next section.
  prefs: []
  type: TYPE_NORMAL
- en: Understanding OSINT
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'As mentioned previously, the first stage of a penetration test is to gather
    as much information as possible on a given target or organization. Gathering information
    prior to exploiting and gaining access to a network or system will help the penetration
    tester narrow the scope of the attack and design specific types of attacks and
    payloads that are suitable for the attack surface of the target. We will begin
    our information-gathering phase by utilizing the largest computer network in existence:
    the internet.'
  prefs: []
  type: TYPE_NORMAL
- en: 'The following diagram provides a brief overview of the different areas where
    OSINT can be found on a target:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/9d902dc8-5baa-422c-a783-f04f903ddc2a.png)'
  prefs: []
  type: TYPE_IMG
- en: The internet has many platforms, ranging from forums and messaging boards to
    social media platforms. A lot of companies create an online presence to help market
    their products and services to potential clients. In doing so, the creation of
    a company's website, Facebook, Instagram, Twitter, LinkedIn, and so on ensures
    that their potential customers get to know who they are and what services and
    products are offered. The marketing department is usually responsible for ensuring
    that an organization's online presence is felt and that their digital portfolio
    is always up to date and eye-catching.
  prefs: []
  type: TYPE_NORMAL
- en: Organizations usually publish information about themselves on various internet
    platforms, such as blogs and recruitment websites. As the internet is so readily
    available and accessible, it's quite easy for someone to gather information on
    a target organization simply by using search engines and determining their underlying
    infrastructure. This technique is known as **OSINT.**
  prefs: []
  type: TYPE_NORMAL
- en: This is where a penetration tester or ethical hacker uses various tools and
    techniques that harness information that's publicly available on the internet
    to create a portfolio of the target. OSINT is a type of passive information gathering
    where the penetration tester does not make direct contact or a connection with
    the actual target, but rather asks legitimate and reliable sources about the target.
  prefs: []
  type: TYPE_NORMAL
- en: 'Over the years, I have noticed a lot of job-hunting websites where recruiters
    post vacancies for IT positions within a company, but the recruiter specifies
    that an ideal candidate should have experience with specific technologies. This
    can be a good thing for the company and the applicant; however, it can be bad
    as well. The following are the pros and cons of companies posting their technologies
    on recruitment websites:'
  prefs: []
  type: TYPE_NORMAL
- en: 'These are the pros:'
  prefs: []
  type: TYPE_NORMAL
- en: The potential candidate will know what type of environment to expect if they
    are hired.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The potential candidate can determine beforehand whether they have the skill
    set required for the job.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'These are the cons:'
  prefs: []
  type: TYPE_NORMAL
- en: The company is partially exposing their technologies to the general public.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: A hacker can determine the infrastructure and better select exploits and tools
    to perform a cyber attack.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Let''s take a look at the following screenshot from a job site. Looking closely,
    we notice that the job poster has specified that they are using both Cisco and
    HP networking technologies, the company uses an AVAYA PBX system as their **Voice
    over Internet Protocol** (**VoIP**) system, and they are running Windows Server
    2008 and/or 2012 in their network:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/5ed102d6-24c7-4a91-b078-ed787f37f92b.png)'
  prefs: []
  type: TYPE_IMG
- en: As a penetration tester, we can see that the company is using specific types
    of technologies within their IT infrastructure. From a penetration tester's point
    of view, if this organization were our target for a penetration test, we could
    now narrow our scope of attacks to these specific technologies.
  prefs: []
  type: TYPE_NORMAL
- en: Now that we have completed this section on better understanding OSINT, let's
    dive into the practical of using OSINT tools.
  prefs: []
  type: TYPE_NORMAL
- en: Using the top OSINT tools
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In this section, I will demonstrate some of the most popular OSINT tools that
    are available for Kali Linux. Each tool will help us create a profile about a
    target using various sources of information that can be found on the internet.
  prefs: []
  type: TYPE_NORMAL
- en: 'Over the next few sub-sections, we will cover the following OSINT tools:'
  prefs: []
  type: TYPE_NORMAL
- en: Maltego
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Recon-ng
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: theHarvester
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Shodan
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: OSRFramework
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Now, let's take a deeper dive into each of these amazing tools.
  prefs: []
  type: TYPE_NORMAL
- en: Maltego
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Maltego was created by **Paterva** ([www.paterva.com](https://www.paterva.com/web7/))
    as a graphical interactive data mining application with the ability to query and
    gather information from various sources on the internet and present data in easy-to-read
    graphs. The graphs demonstrate the relationship between each entity and the target.
  prefs: []
  type: TYPE_NORMAL
- en: 'To get started, you need a user account to access the functions and features
    of Maltego:'
  prefs: []
  type: TYPE_NORMAL
- en: 'Go to [www.paterva.com](https://www.paterva.com/web7/) and click on **COMMUNITY**.
    A drop-down menu will be presented. Click on **REGISTER (FREE)** to create a user
    account:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/8291a374-1276-4637-b75a-c13685dbdc2b.png)'
  prefs: []
  type: TYPE_IMG
- en: 'After creating the user account, please ensure that you verify your email address
    prior to logging in. Once this step has been completed, head back to your Kali
    Linux desktop. Open the **Maltego** tool by clicking on Applications | Favorites
    | maltego, as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/38ef8e4c-9b5c-46d9-889a-ecfc081d8120.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Once the application opens, click on Maltego CE (Free) to configure and run
    the community edition of Maltego:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/4341b8fe-99a6-42f9-b5dd-1fee609bbcc6.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Next, you should be presented with the Maltego configuration wizard. Ensure
    that you log in using the same user account you created previously on the Paterva
    website and click Next. Read and follow the instructions that appear in the next
    few steps of the configuration wizard. You can leave everything in the default
    state and click Next until the process ends:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/5dff9202-55d9-40ac-8e9e-758b8385297c.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Once the configuration window closes, the general Maltego interface is displayed,
    as shown in the following screenshot. On the start page, there are many transform
    sets that can be added to Maltego. A **transform** is an open source resource
    that Maltego can query for information. Adding transforms is optional:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/02f823b7-33da-4d81-b1c9-c15a38e250e3.png)'
  prefs: []
  type: TYPE_IMG
- en: To begin gathering information on a target organization, we must first open
    a new graph. To do this, click on the Maltego icon in the top-left corner, and
    then click on **New**. Once a new graph has been created, you'll see various types
    of information (entities) on the left, while, on the right-hand side, you'll see
    Overview, Detail View, and Property View.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'To add a domain of a company, click and drag the domain entity to the center
    of the graph. By default, `paterva.com` will appear as the target domain. Let''s
    change the domain value to something else. On the left-hand side of the interface,
    click on **Property View**. You will be able to edit the value in the **Domain
    Name** field, as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/87486934-78f0-423e-b527-5f1036e0934a.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Once the domain name has changed, we can proceed and resolve the website URL
    for the domain. Right-click on the domain entity, click on All Transforms, and
    select To Website [Quick lookup]. This transform will simply discover the website
    address (refer to the screenshot on the left) and display the relationship (refer
    to the screenshot on the right):'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/fc656e7a-c856-4650-9094-d42626d49105.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Next, we can attempt to obtain the IP address of the website address. Right-click
    on the website address ([www.google.com](http://www.google.com)) | All Transforms
    | To IP Address (DNS). The following screenshot on the right displays the IP address
    that was resolved for [www.google.com](http://www.google.com). Please note that
    this is one of many IP addresses that are used for the [www.google.com](http://www.google.com)
    URL:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/b31fb2f1-6fa4-4847-99dc-cbae0c0db5be.png)'
  prefs: []
  type: TYPE_IMG
- en: 'We can take this phase even further. How about discovering the **top-level
    domains** (**TLDs**) that are a part of the [google.com](http://google.com) domain?
    To complete this task, we begin by right-clicking on the domain entity ([google.com](http://google.com))
    and selecting **To Domain [Find other TLDs]**, as shown in the following screenshot
    on the left. Once the transform has been completed, Maltego will present the information
    in a tree-like structure on the graph plane, as shown in the following screenshot
    on the right:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/b751d501-e76f-4046-b1c1-0c0fcd84f055.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Now, how about gathering the email addresses of contacts who are registered
    to a domain? We can right-click on the IP address entity | All Transforms | To
    Email address [From whois info]. If there are any email addresses, they will be
    displayed, as shown in the screenshot on the right:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/162dd62d-c832-4d63-ab58-ceb550fa714c.png)'
  prefs: []
  type: TYPE_IMG
- en: Furthermore, we can attempt to obtain the **name servers** (**NSes**) for the
    domain. Right-click on the domain entity (`google.com`) | All Transforms | To
    DNS Name – NS (name server). All the NSes for the domain will be presented, as
    shown in the screenshot on the right:.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/cc6bd0c1-5656-44b0-9a2f-6350bdd19ab7.png)'
  prefs: []
  type: TYPE_IMG
- en: Now, you have a better idea of the functions of Maltego and how to navigate
    the various transforms. A nice feature of Maltego is the relationship mapping
    on the graph to help you analyze information and entities.
  prefs: []
  type: TYPE_NORMAL
- en: Having completed this section, you are now familiar with using Maltego to gather
    information. In the next section, we will use a Python-based tool to assist us
    in passive information gathering.
  prefs: []
  type: TYPE_NORMAL
- en: Recon-ng
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Recon-ng is an OSINT reconnaissance framework written in Python. The tool itself
    is complete with its own modules, database, interactive help, and menu system,
    similar to Metasploit. Recon-ng is able to perform web-based, information-gathering
    techniques using various open source platforms.
  prefs: []
  type: TYPE_NORMAL
- en: 'Recon-ng is already part of the arsenal of tools in Kali Linux. To access the
    interface of Recon-ng, simply click on **Applications** in the top-left corner
    to expand the application menu, and then select **01 – Information Gathering**.
    You should see **recon-ng**. Click on it to open the framework:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/7efc385b-1655-4bfd-88a6-d7add7b3e8ed.png)'
  prefs: []
  type: TYPE_IMG
- en: Additionally, you can open the Linux Terminal window and type `recon-ng` to
    run the framework.
  prefs: []
  type: TYPE_NORMAL
- en: 'To download and set up the latest version of Recon-ng, use the following instructions:'
  prefs: []
  type: TYPE_NORMAL
- en: 'Execute the following configurations on your Terminal to download the latest
    version of Recon-ng and install it:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: 'After you''re finished, your screen should be similar to the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/6a746ce7-c296-4942-8a70-6f71732d1146.png)'
  prefs: []
  type: TYPE_IMG
- en: 'If there are no modules installed or enabled, use the following command to
    install all modules onto Recon-ng:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: Optionally, you can reload all the modules by using the `modules reload` command.
  prefs: []
  type: TYPE_NORMAL
- en: 'Now that the Recon-ng framework has opened, let''s get familiar with its interface
    by using the following instructions:'
  prefs: []
  type: TYPE_NORMAL
- en: 'To view all the modules in **Recon-ng v5**, we must use the `modules search`
    command to view a list of all available modules. All the modules will be presented
    under their categories (`Discovery`, `Exploitation`, `Recon`, `Reporting`, and
    so on), as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/f9113e94-29fa-49f3-85eb-be244ada9d32.png)'
  prefs: []
  type: TYPE_IMG
- en: As a penetration tester, you may use the same tools for multiple organizations
    throughout your career. We can create workspaces within Recon-ng to help isolate
    our projects/data more efficiently. If you look closely at the command-line interface,
    you will see the word `default` between square brackets. This implies that we
    are currently within the default workspace of Recon-ng.
  prefs: []
  type: TYPE_NORMAL
- en: To create a workspace, we can use the `workspaces create <worksplace-name>`
    command. We are going to create a new workspace named `pentest`. Use the `workspaces
    create pentest` command within the Recon-ng interface.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'To view all existing workspaces and to verify the creation of our new workspace,
    we can use the `workspaces list` command:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/07d6a248-5114-4706-b12c-e671ea3d7d3d.png)'
  prefs: []
  type: TYPE_IMG
- en: To use the `pentest` workspace, use the `workspaces select pentest` command.
    The workspace should change on your command-line interface.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Now that we have added a company and its domain to our database, let''s search
    for a module to perform a `whois` lookup. We can use the `modules search whois`
    command, where `whois` is the keyword or search criteria:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/d9c4c77a-af5d-481c-94d6-c56fb335b714.png)'
  prefs: []
  type: TYPE_IMG
- en: 'We are going to use the **point-of-contacts** (**POCS**) module to obtain further
    details of people related to the domain. To do this, execute the `modules load
    recon/domains-contacts/whois_pocs` command. Using the `info` command will provide
    you with a description of the module and whether additional parameters are required:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/5cff0e6b-9c0b-4b72-a179-0d7a588a47f0.png)'
  prefs: []
  type: TYPE_IMG
- en: The `default` value is set by the developer of the module; set your own source
    for each module within Recon-ng. Additionally, you can use the `info` command
    to view details about a module. The `input` command will list the input values
    for the `SOURCE` component of a module. The `input` command is useful to verify
    what the `SOURCE` values are for a specific module.
  prefs: []
  type: TYPE_NORMAL
- en: 'Let''s set the `SOURCE` value to `microsoft.com`; this can be done by using
    the `options set SOURCE microsoft.com` command, as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/8584d219-19ee-4128-99fa-999f69d09cae.png)'
  prefs: []
  type: TYPE_IMG
- en: Once everything is set correctly, use the `run` command to execute the module
    against the domain. Once the module has completed its analysis, we can use the
    `show contacts` command to view the list of information, such as a person's first
    and last names, email addresses, region, and country.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: As you can see, Recon-ng is a very powerful tool and is able to handle data
    management quite well. Organizations usually create subdomains for many purposes;
    some can be used as a login portal, or simply as another directory on a website.
  prefs: []
  type: TYPE_NORMAL
- en: 'To obtain a list of subdomains of a target, observe the following steps:'
  prefs: []
  type: TYPE_NORMAL
- en: Let's start by searching for a suitable module by using the `modules search
    site` command. Recon-ng will return some of the modules that contain `site` as
    part of their names.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'We''re going to use the `google_site_web` module. Simply execute the `modules
    load recon/domains-hosts/google_site_web` command:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/0bec6f46-8f3a-42b5-8616-2680c53f9a19.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Next, let''s change the `SOURCE` value for this module by using the `options
    set SOURCE microsoft.com` command, as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/a7f70d49-7946-4844-9303-d05ef6867558.png)'
  prefs: []
  type: TYPE_IMG
- en: Use the `run` command to execute this module.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Once the module has finished its query, use the `show hosts` command to view
    the list of subdomains that were found for the `microsoft.com` domain:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/8bcd2fed-abaf-4ed4-8f3c-75f6e90b3d43.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Now, let''s make this a bit more exciting. How about obtaining the IP addresses
    for the subdomains? To do this, we are going to run the `module load recon/domains-hosts/brute_hosts`
    command and set the `SOURCE` value to `microsoft.com`:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/9de944c7-a7a7-403a-98ac-c2b8d650faf9.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Once the module is finished executing, use the `show host` command once more.
    You should see IP addresses corresponding to a subdomain:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/7d4a1dc5-851c-48cf-b314-a8c09f2a8e32.png)'
  prefs: []
  type: TYPE_IMG
- en: 'As a penetration tester, writing reports can be very overwhelming as a report
    is a summary of the actions performed and results obtained while you were performing
    various tasks and using a number of tools. Recon-ng has a few reporting modules
    that are able to generate reports in multiple formats. The `dashboard` command
    will provide a summary of tasks performed with Recon-ng, as shown here:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/5fc81f6a-63e3-4c34-aaf9-fe0292eb0d91.png)'
  prefs: []
  type: TYPE_IMG
- en: 'To generate a report, you can use the `modules search report` command. This
    will let you view a list of reporting modules within the Recon-ng interface. We
    are going to create a report in HTML format. To create the report, perform the
    following steps:'
  prefs: []
  type: TYPE_NORMAL
- en: Execute the `modules load reporting/html` command.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Use the `options set CREATOR` command to set the creator of the report.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Use the `options set CUSTOMER` command to set the customer.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Use the `options set FILENAME` command to set the output location with the filename
    of the report.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Lastly, use the `run` command to execute the module and generate the report.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'The following screenshot has labels that correspond to the aforementioned steps
    for generating and exporting a report file using `reporting/html module`:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/06ce3de3-141e-4cc1-8e8a-454030c4573c.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Finally, navigate to the output location on your Kali Linux machine and open
    the HTML file. The view should be similar to the following:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/793202d5-54a0-44ca-bba5-ce1268ac5d9d.png)'
  prefs: []
  type: TYPE_IMG
- en: Now, the information is nicely categorized and summarized for viewing.
  prefs: []
  type: TYPE_NORMAL
- en: In the next section, we'll take a look at using **theHarvester** to gather the
    email addresses of people associated with an organization.
  prefs: []
  type: TYPE_NORMAL
- en: theHarvester
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: theHarvester is designed to gather email addresses, domains, and employee details
    for a given company. theHarvester uses multiple open sources on the internet,
    such as search engines, to piece together details in a readable format.
  prefs: []
  type: TYPE_NORMAL
- en: 'Further details on theHarvester can be found on its GitHub page:'
  prefs: []
  type: TYPE_NORMAL
- en: '[https://github.com/laramies/theHarvester](https://github.com/laramies/theHarvester)'
  prefs: []
  type: TYPE_NORMAL
- en: 'To get started with theHarvester, execute the following steps:'
  prefs: []
  type: TYPE_NORMAL
- en: 'Open a Terminal window and execute `theharvester`. The description and usage
    of the tool will be presented on the Terminal, as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/8bf9fc69-0596-4cfa-b1af-4eb1d062fc72.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Let''s attempt to gather the email addresses of employees of a company whose
    email addresses are published publicly, such as on forums, websites, blogs, and
    social media platforms. We can use the `theharvester –d <domain> –b <data source>`
    command to do this. In our example, we''ll search for email addresses of the `checkpoint.com`
    domain while using Google as the data source:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/ff1abd62-a367-4107-861d-cbe2135c19d5.png)'
  prefs: []
  type: TYPE_IMG
- en: The results have provided us with some corporate email accounts of some of the
    employees of the company and the IP addresses of some subdomains. I would recommend
    using various data sources to gather as much information as possible. One purpose
    of gathering the email addresses of a company is to perform phishing attacks.
  prefs: []
  type: TYPE_NORMAL
- en: Next, we are going to use the Shodan search engine, which indexes **Internet
    of Things** (**IoT**) and other online devices to retrieve information about a
    potential target.
  prefs: []
  type: TYPE_NORMAL
- en: Shodan
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Shodan ([www.shodan.io](http://www.shodan.io)) is a search engine that indexes
    various devices that are connected to the internet. What does this mean? To elaborate,
    let's take a real-life example of discovering devices of a certain vulnerability
    level. In January 2019, Hacker News ([https://thehackernews.com](https://thehackernews.com))
    published an article indicating that over 9,000 Cisco SMB RV320 and RV325 routers
    were globally affected by a new exploit. The exploits were CVE-2019-1652 and CVE-2019-1653,
    and they allow a malicious person to obtain configuration files and gain control
    of devices.
  prefs: []
  type: TYPE_NORMAL
- en: 'This article can be found at the following URL:'
  prefs: []
  type: TYPE_NORMAL
- en: '[https://thehackernews.com/2019/01/hacking-cisco-routers.html](https://thehackernews.com/2019/01/hacking-cisco-routers.html)'
  prefs: []
  type: TYPE_NORMAL
- en: 'Imagine that you''re interested in discovering all the devices of this nature
    on the internet. Using Shodan as a regular search engine, we can quickly discover
    multiple devices that fit our search criteria of `cisco rv325`, as shown in the
    following screenshot. Look closely: we can see a list of online Cisco RV325 routers,
    their IP addresses, their hostnames, and their locations:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/487ec9c1-65a1-47e2-86b9-8f62df3f24e4.png)'
  prefs: []
  type: TYPE_IMG
- en: The results provide geolocation information for the devices and IP addresses,
    and banner information such as firmware versions. On the left, we can see a global
    map indicating the number of internet-connected devices per country and organization.
    Simply clicking on a country, an organization, or even an IP address will filter
    that information for us.
  prefs: []
  type: TYPE_NORMAL
- en: 'Clicking on an IP address will provide greater insight into the selected device,
    such as the hostname, open ports, running services, organization, **Internet Service
    Provider** (**ISP**) details, and the vulnerabilities the device is susceptible
    to, as shown in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/ec022136-d77e-4c33-949c-903eb01ce216.png)'
  prefs: []
  type: TYPE_IMG
- en: Information that's gathered from Shodan can help you build a better profile
    of your target organization during a penetration test as it can provide you with
    possible operating system versions and other technical details that you can use
    to successfully exploit your target. Put simply, Shodan can help you identify
    the target's technologies and control systems in their organization and IT infrastructure.
  prefs: []
  type: TYPE_NORMAL
- en: In the next section, we'll learn about **OSRFramework**.
  prefs: []
  type: TYPE_NORMAL
- en: OSRFramework
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Another awesome OSINT tool is OSRFramework. This toolset performs lookups using
    usernames, DNS records, deep web searches, and much more.
  prefs: []
  type: TYPE_NORMAL
- en: 'To begin, we can execute the `osrf` command on the Terminal to provide a description
    of the usage of the tool itself. Let''s imagine that we need to obtain a list
    of corporate email addresses of our target company on a social media platform.
    The following are the components of OSRFramework that we can utilize in order
    to gather information from various sources:'
  prefs: []
  type: TYPE_NORMAL
- en: '`domainfy`: Checks whether domain names that use words and nicknames are available'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`entify`: Extracts entities using regular expressions from provided URIs'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`mailfy`: Gets information about email accounts'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`checkfy`: Verifies whether a given email address matches a pattern'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`phonefy`: Looks for information linked to spam practices by a phone number'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`searchfy`: Performs queries on several platforms'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`usufy`: Looks for registered accounts with given nicknames'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: In our first example, we can attempt to obtain information about our target
    domain using the `whois` database. Using the `domainfy.py --whois –n <target>`
    syntax, the framework will begin querying `whois` and provide the results in a
    table format after a few minutes. In our example, I have used the `domainfy.py
    --whois –n checkpoint` command to specifically retrieve information for any domain
    that contains the name `checkpoint`.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following are the results:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/d8530353-f5e0-4651-9131-b3eb8613e254.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Next, we can attempt to obtain the email addresses of a given search string.
    In this second example, we are attempting to discover email addresses that contain
    the `checkpoint` string, which has been used on various websites on the internet.
    We can begin by using the `mailfy.py –n checkpoint` command. We will be presented
    with a table displaying the email addresses that fit our search criteria, domain,
    and platform location, as shown in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/0f545892-c53b-4548-9225-22a423320b40.png)'
  prefs: []
  type: TYPE_IMG
- en: 'In our third example, we are going to use a string to search across all the
    services of OSRFramework. To achieve this task, use the `seachfy.py –q string`
    command on your Terminal. Once completed, the results are displayed and tell you
    about the location that was found, any aliases, and the URLs, as shown in the
    following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/990baaae-5301-415e-ae26-0b5cc024de94.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Additionally, checking for telephone number leakage is simple with OSRFramework.
    Using the **`phonefy.py –n number`** command, OSRFramework will begin its search.
    The following screenshot displays the URL location and platform for a given telephone
    number:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/f56f96de-8dd7-4445-9320-7165be3f44db.png)'
  prefs: []
  type: TYPE_IMG
- en: 'In our final example, we can search for usernames. Using the `usufy.py –n string`
    command will allow OSRFramework to search for various online resources. In this
    example, I have searched for `p@55w0rd1` as the username, and the following are
    the results:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/39ff7d5a-fec3-4d8c-b22e-1438581b787c.png)'
  prefs: []
  type: TYPE_IMG
- en: As you have seen, OSRFramework is another very powerful tool within the Kali
    Linux platform. Using a tool such as this can save you a lot of time during your
    information-gathering process.
  prefs: []
  type: TYPE_NORMAL
- en: Having completed this section, you now have the skills to use multiple OSINT
    tools to gather specific and detailed information about a target organization.
    In the following section, we will discuss the topic of data leaks in cloud resources.
  prefs: []
  type: TYPE_NORMAL
- en: Identifying target technology and security controls
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: As a penetration tester, it's quite important to determine the technologies
    used by a target network or organization prior to performing an external network
    penetration test. Discovering technologies used by a target usually proves to
    be very useful prior to any sort of offensive attack on the target network or
    organization. It allows us, as penetration testers, to better equip ourselves
    with the appropriate tools to get the job done efficiently and successfully. Imagine
    starting a new job as a carpenter but you arrive on your first day without any
    tools—how can you expect to be successful?
  prefs: []
  type: TYPE_NORMAL
- en: Furthermore, knowing about the technologies and security controls used on the
    target network beforehand will allow us to better prepare ourselves by researching
    and developing exploits to take advantage of known security weaknesses on the
    target system and network. We will look at this idea in more detail in the following
    sections.
  prefs: []
  type: TYPE_NORMAL
- en: Discovering technologies using Shodan
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: We are first going to use Shodan to help us discover technologies running on
    the target servers. Remember that Shodan is a search engine for IoT devices that
    provides in-depth information about devices connected to the internet.
  prefs: []
  type: TYPE_NORMAL
- en: 'To get started, observe the following steps:'
  prefs: []
  type: TYPE_NORMAL
- en: Using your web browser, go to [https://www.shodan.io](https://www.shodan.io).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You may be required to register and create an account with Shodan to get better
    results.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'In the search bar, enter an organization to search for a device. The following
    screenshot shows the search bar on Shodan:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/cbe602e6-a81e-4d31-a7e4-5ddd906190cc.png)'
  prefs: []
  type: TYPE_IMG
- en: Once the search is complete, click on a target from the search results to access
    the information found with Shodan.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'On the target''s page, you''ll be presented with a list of open network ports,
    running services, and their versions, as well as any technologies being used:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/83976b7e-bcb2-4e88-9e12-fa4eeeb579fc.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Scrolling down a bit, if there are any known vulnerabilities found on the target,
    Shodan will provide a list with descriptions:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/1bbad89a-274d-4bc5-960e-91180660ecfc.png)'
  prefs: []
  type: TYPE_IMG
- en: In the next section, we will take a look at using **Netcraft** to gather more
    detailed information about the underlying technologies of a target web server.
  prefs: []
  type: TYPE_NORMAL
- en: The power of Netcraft
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Netcraft allows us to gather information about a target domain, such as network
    block information, registrar information, email contacts, the operating system
    of the hosting server, and the web platform.
  prefs: []
  type: TYPE_NORMAL
- en: 'To get started, use the following instructions:'
  prefs: []
  type: TYPE_NORMAL
- en: Using your web browser, go to [https://www.netcraft.com/.](https://www.netcraft.com/)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'In the search bar highlighted in the following screenshot, enter a domain:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/92a9735b-38c8-41b3-871c-6555b26dca6d.png)'
  prefs: []
  type: TYPE_IMG
- en: If a search doesn't return anything, include `www` as part of the website address.
  prefs: []
  type: TYPE_NORMAL
- en: 'The results page will appear, providing network-related information about the
    target. Scroll down a bit until you see **Hosting History**. This section provides
    you with the hosting server''s operating system, web server platform, and service
    versions, as shown here:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/bc6f95f3-f04f-4716-89a2-0cd9debd629c.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Scroll down a bit more until you see **Site Technology**. This section informs
    you about the technologies Netcraft was able to identify on the target web server:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/db0880aa-bcc3-4167-8371-c28174cb59fc.png)'
  prefs: []
  type: TYPE_IMG
- en: As you have seen, Netcraft is able to provide us with very useful information.
    We can now take the information found and perform further research on the technologies
    to find known vulnerabilities and exploits to compromise the target.
  prefs: []
  type: TYPE_NORMAL
- en: Recognizing technologies with WhatWeb
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Lastly, we can take a look at using the **WhatWeb** tool in Kali Linux. WhatWeb
    is capable of recognizing the technologies used for websites, email addresses,
    web frameworks, and databases.
  prefs: []
  type: TYPE_NORMAL
- en: 'To get started using WhatWeb, observe the following steps:'
  prefs: []
  type: TYPE_NORMAL
- en: Open a new Terminal and enter the `whatsweb –h` command to get the help menu,
    displaying the syntax.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'To run WhatWeb against a target such as Metasploitable in our lab, use the
    `whatweb <target>` command as shown here:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/0a9d354b-3cf5-48c2-9610-31a662ba6f37.png)'
  prefs: []
  type: TYPE_IMG
- en: WhatWeb was able to provide us with the technologies used on the web server
    platform on our Metasploitable virtual machine.
  prefs: []
  type: TYPE_NORMAL
- en: 'Next, using the `whatweb –v <target>` command, provide a verbose output as
    shown here:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/4cbfc434-6c0c-425c-8c6e-c702f32bb5c9.png)'
  prefs: []
  type: TYPE_IMG
- en: In the verbose output shown here, WhatWeb provides us with much more detail
    about the descriptions of plugins used and their results.
  prefs: []
  type: TYPE_NORMAL
- en: In this section, we have completed various exercises designed to help us discover
    technologies that are being used on a target network or system. In the next section,
    we will take a deep dive into learning about cloud resources.
  prefs: []
  type: TYPE_NORMAL
- en: Finding data leaks in cloud resources
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Over the past few years, cloud computing has become one of the fastest-growing
    trends in the IT industry. Cloud computing allows companies to migrate and utilize
    computing resources within a cloud provider's data center. Cloud computing providers
    have a pay-as-you-go model, which means that you only pay for the resources you
    use. Some cloud providers allow pay-per-minute schemes, while others use a pay-per-hour
    structure.
  prefs: []
  type: TYPE_NORMAL
- en: 'There are three big cloud providers:'
  prefs: []
  type: TYPE_NORMAL
- en: '**Amazon Web Services** (**AWS**): Amazon''s cloud service'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Microsoft Azure**: Microsoft''s cloud service'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Google Cloud Platform** (**GCP**): Google''s cloud service'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: A service that cloud providers usually offer to customers is a storage facility.
    The AWS storage facility is known as **Simple Storage Service** (**S3**). Whenever
    a customer enables the S3 service, a bucket is created. A bucket is a storage
    unit within the AWS platform where the customer can add or remove files. In Microsoft
    Azure, the file storage facility is known as **Azure Files**. Additionally, on
    GCP, the storage facility is known as **Google Cloud Storage**.
  prefs: []
  type: TYPE_NORMAL
- en: In the field of information security, we must remember that when a company is
    using a cloud platform, the data on the cloud platform must be secured, just like
    it should be when stored on premises (that is, when stored locally). Sometimes,
    administrators forget to enable security configurations or lack knowledge regarding
    the security of a cloud solution. This could lead to, say, an attacker discovering
    a target organization's AWS S3 buckets. Let's look at a simple example of doing
    that now.
  prefs: []
  type: TYPE_NORMAL
- en: '[http://flaws.cloud/](http://flaws.cloud/) is a website that you can use to
    learn about cloud security vulnerabilities.'
  prefs: []
  type: TYPE_NORMAL
- en: 'In our exercise, we are going to use the S3Scanner tool. Follow these steps
    to get started:'
  prefs: []
  type: TYPE_NORMAL
- en: 'This tool is not pre-installed in Kali Linux, so we will need to create a clone
    of the GitHub repository by using the following command:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: Next, change directories to the `S3Scanner` folder using the `cd S3Scanner`
    command.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Now, you'll need to install additional dependencies for this tool. Don't worry—the
    developers made this step very easy for us. To complete this step, use the `pip
    install -r requirements.txt` command.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Once completed, we can now use our tool on a target's domain. Using the `python
    ./s3scanner.py domain` syntax, the tool scanner will create a domain for an AWS
    S3 bucket and determine whether it's accessible.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'The following screenshot shows the use of S3Scanner to check for any AWS S3
    buckets on the `flaws.cloud` domain:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/6a1c6934-6bbf-4a0a-bfdc-7824171e4f35.png)'
  prefs: []
  type: TYPE_IMG
- en: 'One bucket has been found on the domain. Additionally, you can create a list
    of domains in a text file and query the entire file at once. The following is
    an example of querying multiple domains that are stored in the `sites.text` file:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/c2af70d8-b83e-4a54-bc4d-2dac187a471a.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Furthermore, we can use the `host` command to resolve the IP address of the
    domain. Then, by using the `nslookup` utility with the `ptr` parameter, a reverse
    lookup can be performed, which will result in us getting the actual name of the
    AWS S3 bucket, as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/bce3316a-f986-4a2d-87eb-8fde6511d46d.png)'
  prefs: []
  type: TYPE_IMG
- en: Data leaks can happen on any platform and to any organization. As an upcoming
    penetration tester and cybersecurity professional, you must have knowledge of
    how to find them before an actual hacker does and exploits them. Companies can
    store sensitive data on cloud platforms, or even leave other data completely unprotected
    on a cloud service provider network. This can lead to the successful retrieval
    of data and accounts.
  prefs: []
  type: TYPE_NORMAL
- en: Understanding Google hacking and search operators
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: The concept of Google hacking is not actually hacking into Google's network
    infrastructure or systems, but rather using advanced search parameters within
    the Google search engine. We can use Google to help us find vulnerable systems,
    hidden information, and resources on the internet by simply inserting special
    search operators in the Google search bar.
  prefs: []
  type: TYPE_NORMAL
- en: Let's imagine that you would like to use the Google search engine to look for
    various websites, but you don't want to see results that contain certain keywords
    or phrases. We can use the `<string of text here> -<keyword>` syntax to do this.
    The keyword is the phrase or text that you want to exclude.
  prefs: []
  type: TYPE_NORMAL
- en: 'Let''s look at the following example:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/1891de57-7da2-4d39-a1b3-e8c15148c225.png)'
  prefs: []
  type: TYPE_IMG
- en: In our example, we are searching for penetration testing tools. At the same
    time, we are telling the Google search algorithm to not display any results that
    contain the word `kali`. Additionally, we can use the `<string of text here> "keyword"`
    syntax to view results that do contain the keyword.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following table is a brief list of Google search operators, also known
    as **Google dorks**, that can help you find sensitive information on the internet:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/068c20d9-f51b-4a41-bf0c-64c363265dd1.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Furthermore, the team at Offensive Security ([www.offensive-security.com](http://www.offensive-security.com))
    maintains the Exploit Database ([www.exploit-db.com](https://www.exploit-db.com/)),
    which has a dedicated section known as the **Google Hacking Database** (**GHD**)
    ([https://www.exploit-db.com/google-hacking-database](https://www.exploit-db.com/google-hacking-database)).
    The GHD is constantly updated by community members and contains search parameters
    in many categories, as shown in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/a2e41e75-5a1e-4ce0-b05e-b18380327c1c.png)'
  prefs: []
  type: TYPE_IMG
- en: Each search parameter can be copied and pasted into Google Search, and the results
    will be displayed accordingly. Each entry within the GHD contains a brief description
    of the search operator.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following is a search parameter that''s used to discover the Cisco **Adaptive
    Security Appliance** (**ASA**), which has a publicly available login page:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/28805653-0bb3-427e-8ae0-e0b63ae3ac9d.png)'
  prefs: []
  type: TYPE_IMG
- en: Such sensitive information and hidden directories can be a hacker's playground;
    similarly, for a penetration tester, it's a gold mine just waiting to be exploited.
  prefs: []
  type: TYPE_NORMAL
- en: We have completed our discussion of Google hacking. In the next section, we'll
    take a took at copying websites locally using Kali Linux.
  prefs: []
  type: TYPE_NORMAL
- en: Leveraging whois and copying websites with HTTrack
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In this section, we are going to take a look at two particular resources. We'll
    use whois to help us gather contact information from a domain registrar for a
    target domain, and we'll use **HTTrack** to copy a website locally.
  prefs: []
  type: TYPE_NORMAL
- en: Let's dive in and look at the functions of whois and how it can be beneficial
    to us.
  prefs: []
  type: TYPE_NORMAL
- en: whois
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'whois is a database that keeps a record of the registry information of all
    registered domains. The following is a brief list of some information types that
    are usually stored for public records:'
  prefs: []
  type: TYPE_NORMAL
- en: Registrant contact information
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Administrative contact information
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Technical contact information
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Nameservers
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Important dates, such as registration, update, and expiration dates
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Registry domain ID
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Registrar information
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Accessing a whois database is quite simple: you can use the Google search engine
    to find various databases. Some whois websites include [www.whois.net](http://www.whois.net),
    [whois.domaintools.com](http://whois.domaintools.com/), [who.is](https://who.is/),
    and [www.whois.com](http://www.whois.com). However, Kali Linux contains a built-in
    whois tool. To perform a `whois` lookup on a domain, implement the following steps:'
  prefs: []
  type: TYPE_NORMAL
- en: 'Open the Terminal and use the `whois <domain-name>` syntax, as shown in the
    following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/bfec0b6d-a4a6-45b7-8cb4-7c94a4834a96.png)'
  prefs: []
  type: TYPE_IMG
- en: The output is presented on the Terminal for the domain. The information that's
    obtained can be leveraged by a penetration tester for various types of attacks
    on a target organization.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: In the next section, you will learn how to use HTTrack to copy a website locally.
  prefs: []
  type: TYPE_NORMAL
- en: HTTrack
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'HTTrack ([www.httrack.com](http://www.httrack.com)) allows us to view an entire
    website offline. It does this by creating a clone copy of an online website and
    storing it locally on our computer. To use HTTrack, simply open a new Terminal
    window and perform the following steps:'
  prefs: []
  type: TYPE_NORMAL
- en: Execute the `httrack` command to invoke the interactive wizard.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Enter a name for the project.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Set the destination path to store the offline copy of the target website. Hitting
    *Enter* will use the defaults in the brackets.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Specify the URL.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Choose an appropriate action.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Confirm the details and launch HTTrack to mirror the website.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'The following is a screenshot indicating the steps that we have just outlined:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/e99fc8c6-fda2-45ff-880b-a20777046fd8.png)'
  prefs: []
  type: TYPE_IMG
- en: Cloning a website can be very useful as you'll be able to discover and access
    hidden resources and files that weren't accessible via the online version. As
    a penetration tester, you can explore each offline directory thoroughly; normally,
    webmasters tend not to always perform any cleanup of old data and files, so there'll
    be lots to explore.
  prefs: []
  type: TYPE_NORMAL
- en: Having completed this section, you have the knowledge required to copy a target
    website onto your Kali Linux machine. In the next section, we will attempt to
    retrieve subdomains for a target domain.
  prefs: []
  type: TYPE_NORMAL
- en: Finding subdomains using Sublist3r
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: As a user of the internet, you will have realized that multiple search engines
    such as MSN, Google, Yahoo, and Bing frequently learn and index new and existing
    websites to improve their search results. If you search for a company's website,
    you are most likely to discover the main domain name, such as `company.com`. A
    lot of organizations create subdomains for various reasons, however. As penetration
    testers, we would like to discover all the possible subdomains of a target organization
    as they can lead to login portals and sensitive corporate directories, which may
    contain confidential files and resources.
  prefs: []
  type: TYPE_NORMAL
- en: We can leverage the power of search engines for this task using the **Sublist3r**
    tool. Sublist3r is a Python-based tool that is used to enumerate (extract/obtain)
    the subdomains of a given website using OSINT, such as search engines and other
    internet indexing platforms.
  prefs: []
  type: TYPE_NORMAL
- en: The Sublist3r tool is not natively installed on Kali Linux, and so we will need
    to download it from its GitHub repository.
  prefs: []
  type: TYPE_NORMAL
- en: 'To get started, execute the following steps:'
  prefs: []
  type: TYPE_NORMAL
- en: 'Open the Terminal on your Kali Linux machine and execute the following command:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: Once the cloning process has been completed, change directory to the `Sublist3r`
    folder using the `cd Sublist3r` command.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'At this point, we can use the Sublist3r tool to search for the subdomains of
    a target domain (company) using the `python sublist3r.py –d domain-name` command.
    The screenshot to the left shows the successful invocation of the tool, while
    the right-hand screenshot shows the results being populated on the Terminal:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/c2509826-50f2-492f-baf0-76dd1fc65de3.png)'
  prefs: []
  type: TYPE_IMG
- en: Using this tool can save us a lot of time that would otherwise have been spent
    manually searching the internet.
  prefs: []
  type: TYPE_NORMAL
- en: You have now learned how to efficiently discover subdomains for a target website
    using the Sublist3r tool on Kali Linux.
  prefs: []
  type: TYPE_NORMAL
- en: Summary
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In this chapter, we have discussed the importance of conducting reconnaissance
    prior to attacking a target. The information gathered during this phase is vital
    to the later phases of penetration testing. Information gathering helps create
    the foundation for the penetration tester's research of a target's security vulnerabilities,
    which is required for system and network exploitation.
  prefs: []
  type: TYPE_NORMAL
- en: We outlined the differences between reconnaissance and footprinting, and we
    also took a look at how to use various OSINT tools to obtain information about
    various targets.
  prefs: []
  type: TYPE_NORMAL
- en: In the next chapter, *Active Information Gathering*, we will be covering further
    topics on information gathering.
  prefs: []
  type: TYPE_NORMAL
- en: Questions
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: What is the purpose of footprinting?
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: What OSINT tools can be used to gather information?
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Using Google Search, how can you view results for a particular domain?
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Name a reputable online source for researching exploits.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You are interested in gathering the domain registry information of a target
    company. What resources would you use?
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: How can you discover the subdomains of a company's website?
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Further reading
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '**Web Application Information Gathering**: [https://hub.packtpub.com/web-application-information-gathering/](https://hub.packtpub.com/web-application-information-gathering/)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Open Source Intelligence**: [https://hub.packtpub.com/open-source-intelligence/](https://hub.packtpub.com/open-source-intelligence/)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
