- en: The Metasploit Web Interface
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In the previous chapter, we learned about the basics of the Metasploit Framework
    and looked at some of the features we can use in Metasploit. In this chapter,
    we will focus on the web interface for the Metasploit Framework. The interface
    really helps users who have less experience with the **command-line interface**
    (**CLI**). From reconnaissance to reporting, the interface lets us handle all
    the stages of penetration testing with a single interface. In this chapter, we'll
    learn how to install and use the Metasploit web interface. Later, we'll learn
    how to use the web interface to perform reconnaissance and access the Meterpreter
    payload.
  prefs: []
  type: TYPE_NORMAL
- en: 'We''ll cover the following topics in this chapter:'
  prefs: []
  type: TYPE_NORMAL
- en: Introduction to the Metasploit web interface
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Installing and setting up the web interface
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Getting started with the Metasploit web interface
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Technical requirements
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'The following are the technical requirements you''ll need for this chapter:'
  prefs: []
  type: TYPE_NORMAL
- en: Metasploit **Community Edition** (**CE**) with the Metasploit web interface
    available
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: A *nix-based system or Microsoft Windows-based system
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Introduction to the Metasploit web interface
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: The Metasploit web interface is a browser-based interface that provides easy
    access to navigational menus and allows you to change the configuration pages
    for tasks. You can perform every single task you do in the **Metasploit Framework**
    (**MSF**) in the Metasploit web interface, from performing a discovery scan by
    using an auxiliary to popping up a Meterpreter.
  prefs: []
  type: TYPE_NORMAL
- en: For those who prefer **graphical user interface **(**GUI**) tools for penetration
    testing, you can use the Metasploit web interface. The web interface is a part
    of Metasploit CE (free), Metasploit Pro (paid), Metasploit Express (paid), and
    Nexpose Ultimate (paid). Unlike the more advanced features available in the paid
    versions of Metasploit, the free CE is the most basic of all.
  prefs: []
  type: TYPE_NORMAL
- en: Installing and setting up the web interface
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: The installation process for the Metasploit web interface is fairly easy.
  prefs: []
  type: TYPE_NORMAL
- en: You can download the Community Edition at [https://www.rapid7.com/products/metasploit/download/community/](https://www.rapid7.com/products/metasploit/download/community/).
  prefs: []
  type: TYPE_NORMAL
- en: 'To start the installation process, you need to fill in the information required
    to download Metasploit CE. After that, you will be redirected to the download
    page, as shown in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/632ebce9-7665-4d6e-9fc3-3b8c28a4c995.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Note: If you don''t want to fill in the form, you can open a direct link to
    download the Metasploit web interface, at [https://www.rapid7.com/products/metasploit/download/community/thank-you](https://www.rapid7.com/products/metasploit/download/community/thank-you).'
  prefs: []
  type: TYPE_NORMAL
- en: You can also download it from Rapid7's repository on GitHub at [https://github.com/rapid7/metasploit-framework/wiki/Downloads-by-Version](https://github.com/rapid7/metasploit-framework/wiki/Downloads-by-Version),
    but you won't be able to get the activation key.
  prefs: []
  type: TYPE_NORMAL
- en: Installing Metasploit Community Edition on Windows
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'For a successful installation on Windows, follow these steps:'
  prefs: []
  type: TYPE_NORMAL
- en: 'First of all, please make sure that you have disabled the **anti-virus** (**AV**)
    and firewall on your system. AV generally detects and flags some files as **malicious**
    in Metasploit CE:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/c434a59b-e8ba-41f8-b7d2-613677ca06e9.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Also, please make sure that you put the Metasploit installation folder in your
    AV and firewall exceptions list if you''re running Windows. This way, your generated
    payloads will be excluded from the AV:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/c65e1172-5e8d-4c9a-b029-5fbff6623e49.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Since Metasploit CE can also be accessed via a web interface (over SSL), please
    make sure you provide the correct Server Name (hostname) for the SSL certificate
    generation process:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/e9572261-1f93-49b3-a09a-c3acdd489053.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Once the installation is complete, you can check all the files in the `C:\metasploit`
    directory:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/e5224e7e-4842-4199-81d3-e866ab3cf393.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Before you can start using the web interface, you need to initialize the user
    account. If you try accessing the web server using the hostname instead of localhost,
    you''ll get a warning message. To continue, just follow the instructions given:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/a087dc88-6b9b-49c5-bdf5-5789f7782939.png)'
  prefs: []
  type: TYPE_IMG
- en: 'To initialize the user account, you need to execute the `createuser` Batch
    script available in the `C:\metasploit` directory:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/2c0f5d8b-ca7e-4170-b1d6-b68e7eb2b245.png)'
  prefs: []
  type: TYPE_IMG
- en: 'There is just one last step left now. Once the user has been created, you will
    be redirected to the activation page. To activate the CE instance, you need to
    get the product key, which can be retrieved from the registered email ID you used
    at the time of registration (this is why registration is important – so you can
    receive the activation code via email):'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/89d86bf9-c595-4ff4-a491-f28a265adff3.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Use the product key from your email and activate Metasploit CE:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/4dc07bbb-3e50-43b0-bf20-4c40890b8bba.png)'
  prefs: []
  type: TYPE_IMG
- en: 'On successful activation, you''ll be redirected to the Project Listing page:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/c87643a0-e08c-4497-83d9-c6aada60bb39.png)'
  prefs: []
  type: TYPE_IMG
- en: Before you can start using the Metasploit web interface, you need to develop
    an understanding of the interface itself.
  prefs: []
  type: TYPE_NORMAL
- en: '**Note:** The trial key can''t be reused and will expire in 14 days.'
  prefs: []
  type: TYPE_NORMAL
- en: Installing Metasploit Community Edition on Linux/Debian
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'For a successful installation on Linux/Debian, follow these steps:'
  prefs: []
  type: TYPE_NORMAL
- en: 'Download the Metasploit CE Linux installer. You need to change the permission
    of the installer to `execute`, which can be done using the `chmod` command:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/aa64bf19-a086-4d27-8f08-6759e6926d82.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Run the Linux installer and follow the instructions shown on screen. Once the
    installation is complete, a URI to the web interface will be displayed:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/97643a84-c567-4dfb-b718-d5e7740e0456.png)'
  prefs: []
  type: TYPE_IMG
- en: 'You need to visit the URI to access the web interface. By default, the URI
    will be `https://localhost:3790/`:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/f6c1a85a-9b1f-450e-a5fb-1d6355372254.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Once the initialization process and setup are complete (which should generally
    take a few minutes), a warning message will be displayed on screen. Follow the
    instructions on screen to create a user via a diagnostic shell:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/ffd5831b-1024-4c86-b7dc-e2bc71455681.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Upon executing the diagnostic shell, the Metasploit environment will be set
    for your shell and you can execute the `createuser` script. You will also be able
    to see the web interface, where you will find a new user setup page. Fill in the
    user details to create an account:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/065b8082-5eba-4634-b9dc-b1053dd24fa6.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Get the product key from your email ID and activate the CE to continue:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/08b5c5bf-e746-4e2b-84dd-52e94359d91e.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Note: 32-bit Linux (including Kali) and macOS are not supported.'
  prefs: []
  type: TYPE_NORMAL
- en: Next, let's get started with the Metasploit web interface.
  prefs: []
  type: TYPE_NORMAL
- en: Getting started with the Metasploit web interface
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: The Metasploit web interface has a very easy-to-use interface that can help
    testers who have less experience with the CLI. Before we start testing, let's
    understand the interface.
  prefs: []
  type: TYPE_NORMAL
- en: Interface
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'The Metasploit web interface can be categorized into the following menus:'
  prefs: []
  type: TYPE_NORMAL
- en: Main menu
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Project tab bar
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Navigational breadcrumbs
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Tasks bar
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Let's look at each of these menus.
  prefs: []
  type: TYPE_NORMAL
- en: Main menu
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: The main menu can be seen at the top of the page. In the main menu, you can
    access the project settings from the Project menu, account settings from the Account
    menu, and manage administrative tasks from the Administration menu.
  prefs: []
  type: TYPE_NORMAL
- en: 'Any alerts can be viewed from the notification center:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/32413e21-5f18-42e9-b234-d4c0e7cbbe23.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Let''s have a look at them in detail:'
  prefs: []
  type: TYPE_NORMAL
- en: '**Project menu**:For creating, editing, opening, and managing projects from
    the project menu.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Account menu**: For managing your account information, such as changing your
    password, setting a time zone, and contact information.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Administration menu**: For making any administrative changes, such as updating
    the system, license keys, editing user accounts, and configuring global settings.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Notification center**:In the notification center, you''ll find all the alerts
    denoting that a task has been completed or that a software update has been made
    available. Clicking on the alert will display a drop-down menu with the latest
    alerts for all the projects.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Next, we will look at the Project tab bar.
  prefs: []
  type: TYPE_NORMAL
- en: Project tab bar
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'The Project tab bar is the tab menu that is located right below the main menu.
    An overview of running projects, vulnerability analysis, any Meterpreter/shell
    sessions that have been opened, phishing campaigns, web application testing, modules,
    credentials, reports, exports, and tasks can be managed from this tab menu:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/ea92a539-22a4-4a1f-8273-474d90aa1595.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Let''s have a look at them in detail:'
  prefs: []
  type: TYPE_NORMAL
- en: Overview:Displays high-level graphical information such as the number of hosts
    and services discovered and the number of sessions and credentials obtained. This
    will not display data until we run a scan or import hosts.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Analysis: This tab allows us to classify large network/hosts into groups, which
    makes it easier for us to manage and exploit them.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Sessions:TheSessions tab shows us the active sessions on the targets we have.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Campaigns: This tab allows us to create, manage, and run social engineering
    campaigns on a group of targets, including emails, web pages, portable files,
    and more.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Web Apps:This is a Pro version feature that allows us to scan web applications
    and identify vulnerabilities.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Modules: This tab allows us to search for available modules, view their information,
    and execute them on a target.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Credentials: This tab allows us to add/edit or delete the credentials that have
    been collected through exploitation.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Reports:This is also a Pro version feature. This tab allows us to view and create
    reports of our findings.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Exports:This tab allows us to export data such as credentials into multiple
    formats, such as XML and ZIP.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Tasks:This tab allows us to manage the statuses of the tasks the tool is currently
    running.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Next, we will look at the **navigational breadcumbs**.
  prefs: []
  type: TYPE_NORMAL
- en: Navigational breadcrumbs
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'You can use **navigational breadcrumbs** to identify your current location
    in the project:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/c5e04b77-31d8-4eba-91d9-efad7faac501.png)'
  prefs: []
  type: TYPE_IMG
- en: This can help us work more efficiently.
  prefs: []
  type: TYPE_NORMAL
- en: Tasks bar
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'You can use the **tasks bar** to quickly perform the listed tasks, as shown
    in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/705b40f9-9aef-4f86-8703-c9c20965121e.png)'
  prefs: []
  type: TYPE_IMG
- en: Next, we'll look at project creation.
  prefs: []
  type: TYPE_NORMAL
- en: Project creation
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Just as Metasploit uses *workspaces* to organize data that's been collected,
    the CE uses the *project* to separate datasets. By default, the CE has a default
    project inside it. If you do not create a custom project, everything you do will
    be saved under this project.
  prefs: []
  type: TYPE_NORMAL
- en: Default project
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Whenever we use the web interface, the first project in use will be the `default`
    project. This project will show us the number of hosts that were scanned, the
    sessions that were maintained, and the number of tasks that were assigned to the
    hosts while the `default` project was active. The following screenshot shows the
    listed project titled `default`:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/bc5b7411-097a-4287-86a8-6580d89b8e0b.png)'
  prefs: []
  type: TYPE_IMG
- en: Next, let's learn how to create our own custom project.
  prefs: []
  type: TYPE_NORMAL
- en: Creating a custom project
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Metasploit CE also allows us to create our own custom project:'
  prefs: []
  type: TYPE_NORMAL
- en: 'This can be done by clicking on the Projects menu and selecting New Project.
    This will take us to the page shown in the following screenshot. Here, we will
    specify project details such as Project name, Description, and Network range:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/fbe883c9-782a-4302-9387-ad22c243c064.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Once you click on the Create Project button, you will be taken to the project
    dashboard page. Here, you''ll see different sections showing the summary of the
    tasks you have performed so far and their results:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/afba9d3f-f40d-4050-8dd4-626e3a7b89f7.png)'
  prefs: []
  type: TYPE_IMG
- en: 'By going back to Home, you should be able to see two projects. One is called `default`,
    while the other is called `Web Exploitation Project`, which we just created:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/4ee56451-c1da-4feb-b94e-f3b43a76ae9e.png)'
  prefs: []
  type: TYPE_IMG
- en: Next, let's start with enumeration.
  prefs: []
  type: TYPE_NORMAL
- en: Target enumeration
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Now that we have created our projects, let''s start with the first step – enumeration.
    There are two ways to perform enumeration: by using Metasploit''s inbuilt scanning
    module or by importing a scan that has been done by Nmap or other tools supported
    by MSF.'
  prefs: []
  type: TYPE_NORMAL
- en: Using the built-in option
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'The Metasploit web interface provides us with some built-in options/modules
    that we can use to perform enumeration on the target system. Follow these steps
    to use the built-in option to perform enumeration:'
  prefs: []
  type: TYPE_NORMAL
- en: 'To use the built-in option, click on the Scan button from the project dashboard,
    as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/b286700f-1c79-475e-bd22-7b66da7ff39a.png)'
  prefs: []
  type: TYPE_IMG
- en: 'On the next page, we enter the IP address(es) we want to scan. We also define
    advanced options for the scan, such as what ports to exclude and a custom range:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/bba34673-bc4f-4aa6-8881-5bac22f1d21d.png)'
  prefs: []
  type: TYPE_IMG
- en: 'You can set some extended features of the scan by clicking on the Show Advanced
    Options button:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/64125184-9795-4d54-88fe-852d7a84427b.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Once everything has been set, you can click the Launch Scan button. The tool
    will launch an Nmap scan in the background with your specified options, as shown
    in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/29e320ae-6746-45d9-a540-d08272e28f3b.png)'
  prefs: []
  type: TYPE_IMG
- en: 'You can view the hosts by clicking on the Project menu -> [WORKSPACE] -> Hosts:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/32b708bc-ff21-43a5-ba09-57eda3f9fb48.png)'
  prefs: []
  type: TYPE_IMG
- en: 'As shown in the following screenshot, the scanned host was added to the Hosts
    list:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/fc1ade70-4e86-4759-a334-f6dbe90ae0f2.png)'
  prefs: []
  type: TYPE_IMG
- en: 'To view the services running on the scanned host, you can either click on the
    host shown in the previous step or you can open Project menu -> [WORKSPACE] ->
    Services:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/d0483bf2-9809-478d-bd01-d60f09547354.png)'
  prefs: []
  type: TYPE_IMG
- en: In both cases, you'll be able to see the services running on the scanned host.
    However, it is not recommended that you perform a scan via the web interface as
    it uses Nmap version 4, which is quite old.
  prefs: []
  type: TYPE_NORMAL
- en: Importing scan results
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Alternatively, we can also use a third-party tool to perform enumeration. Then,
    the result from the tool can be imported into MSF. Follow these steps to import
    the scan result:'
  prefs: []
  type: TYPE_NORMAL
- en: 'It''s always better to perform a port scan and service enumeration before performing
    exploitation via Metasploit. Instead of using the built-in port scanner for Metasploit,
    you can use Nmap separately and save the scanning result in XML format using the
    `-oX` switch:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/8844d50f-3488-45ce-8726-db827425b59f.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Just like the `db_import` command that was used in `msfconsole`, you can use
    the same feature in the Metasploit web interface by clicking on the Import button:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/fcc57c8f-a066-4fd0-86ff-c53d6e074be9.png)'
  prefs: []
  type: TYPE_IMG
- en: On clicking the Import button, you'll be redirected to the Import Data page,
    where you'll be given the option to import your data.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'You can import data from Nexpose, Sonar (Project Sonar is a security research
    project by Rapid7 that conducts internet-wide surveys across different services
    and protocols to gain insights into global exposure to common vulnerabilities)
    and supported files from third-party scanning tools such as Acunetix, Nessus,
    Nmap, and many more. In this case, we performed a full port scan and saved the
    Nmap result in XML format:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/9896db7b-2116-411c-94d4-45f279d2036d.png)'
  prefs: []
  type: TYPE_IMG
- en: 'As an optional feature, you can enable Automatic Tagging, which will tag the
    hosts as `os_windows`, `os_linux`, and `os_unknown`, based on their OS. When you
    click Import Data, the scan will be imported:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/b90f6536-e600-4731-bf5b-5699c2c4763b.png)'
  prefs: []
  type: TYPE_IMG
- en: 'You can go back to the Project Overview menu to see the updated project space:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/4ff0579a-a156-41ac-9762-8707359fcd2f.png)'
  prefs: []
  type: TYPE_IMG
- en: As shown in the preceding screenshot, a new host was added with 15 services
    running on it. On clicking the 15 services detected hyperlink, you will see that
    the Services page is displayed.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'You can view the same page by clicking on Project menu -> [WORKSPACE] -> Services:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/0a0f513e-da8b-4986-883c-e27c8a093c16.png)'
  prefs: []
  type: TYPE_IMG
- en: In the next section, you will be introduced to the Metasploit modules, which
    will be used for further enumeration and exploitation of the target host.
  prefs: []
  type: TYPE_NORMAL
- en: 'Note: The following are all the supported third-party scan reports that can
    be imported: **Foundstone Network Inventory XML, Microsoft MBSA SecScan XML, nCircle
    IP360 XMLv3 and ASPL, NetSparker XML, Nessus NBE, Nessus XML v1 and v2, Qualys
    Asset XML, Qualys Scan XML, Burp Sessions XML, Burp Issues XML, Acunetix XML,
    AppScan XML, Nmap XML, Retina XML, Amap Log, Critical Watch VM XML, IP Address
    List, Libpcap Network Capture, Spiceworks Inventory Summary CSV, **and** Core
    Impact XML.**'
  prefs: []
  type: TYPE_NORMAL
- en: Module selection
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: The modules that are used in the CE of Metasploit are the same as those used
    for MSF. Depending on the situation, we can use an auxiliary module, exploit module,
    or post-exploitation module. Let's look at the auxiliary module first.
  prefs: []
  type: TYPE_NORMAL
- en: Auxiliary module
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'In this case, we have a target host with an IP of `192.168.2.17`. You can see
    the services running on this host in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/416f774c-30c4-4d0d-b281-b9b4e9f624e9.png)'
  prefs: []
  type: TYPE_IMG
- en: 'From a network penetration testing perspective, an attacker would definitely
    look into port `445/tcp` (SMB) for exploitation, so let''s use a module for SMB:'
  prefs: []
  type: TYPE_NORMAL
- en: 'Click the Modules tab in the **Project** tab bar to display the Modules page:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/fb401e53-2d4c-4899-8dea-654b544a87a7.png)'
  prefs: []
  type: TYPE_IMG
- en: 'For SMB, you can use the SMB Version Detection auxiliary module, which can
    be searched for using the search bar:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/8e5f2a7b-456b-4c95-95f8-b554cb930121.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Once you''ve selected the module, the module options page will be displayed.
    You can set the target address, along with some other options (if required):'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/d29dad9c-1d3e-4fff-a0d7-ed57903dbfab.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Clicking on Run Module (shown in the preceding screenshot) will execute the
    module and the output for the module will be displayed:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/3ec6cd12-2c56-4206-b2d6-987d86efd88b.png)'
  prefs: []
  type: TYPE_IMG
- en: 'You can confirm the result that was found by the module by going to the Project
    tab bar -> Analysis -> Notes:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/788c3d2f-b59d-48f2-90e6-5071892b8d04.png)'
  prefs: []
  type: TYPE_IMG
- en: After enumerating the target, you can use an exploit module.
  prefs: []
  type: TYPE_NORMAL
- en: Using an exploit module
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'To use an exploit module, follow these steps:'
  prefs: []
  type: TYPE_NORMAL
- en: 'Click on the Modules tab on the **Project** tab bar and search for the `EternalBlue`
    exploit. It''s a very reliable exploit that can be used in a situation like this:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/9c581e9c-6032-4de1-82f0-ce0f1de17d8d.png)'
  prefs: []
  type: TYPE_IMG
- en: 'From here, you can set the target address and the payload options. Once the
    exploit is executed, the payload (let''s say, Meterpreter) will be injected in-memory
    and a Meterpreter shell will open:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/fe3acb1b-ad29-40f5-96c3-3bc827b42429.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Clicking Run Module will fire up the exploit module. The result will be displayed
    on the screen and a task ID will be allotted to the task:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/59355723-3128-43bf-bde6-9f7e22dcd626.png)'
  prefs: []
  type: TYPE_IMG
- en: On successful exploitation, you'll receive a notification regarding a newly
    opened session.
  prefs: []
  type: TYPE_NORMAL
- en: Session interaction
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'After successful exploitation, a session will be opened and you''ll get a notification
    on the **Project** tab bar:'
  prefs: []
  type: TYPE_NORMAL
- en: 'To view the opened session, you need to click the Sessions tab in the **Project**
    tab bar:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/8f3423bd-6575-4e9a-8169-e32abf70723f.png)'
  prefs: []
  type: TYPE_IMG
- en: 'To interact with any open session, just click on the Session [ID],as shown
    in the preceding screenshot. The features that are supported by the MSF web interface
    for session interaction can be seen in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/4b9d87e3-01da-4b7e-80bd-f8601adca775.png)'
  prefs: []
  type: TYPE_IMG
- en: 'The following are the options you can use for session interaction:'
  prefs: []
  type: TYPE_NORMAL
- en: '**Collect System Data**: This option will let you collect system evidence and
    sensitive data such as passwords, system information, screenshots, and so on.
    This feature is only available in the Metasploit Pro version.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Virtual Desktop**: This option will inject a **virtual network computing**
    (**VNC**) DLL and start a VNC service on the given port:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '![](img/d66b8562-2ee0-40b4-8126-9f1775719fe8.png)'
  prefs: []
  type: TYPE_IMG
- en: 'You can interact with the desktop running on the target system via this port:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/1f3a09f9-51d8-462f-bb63-6849a0e8c21e.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Note: The user will be notified of incoming VNC connections.'
  prefs: []
  type: TYPE_NORMAL
- en: '**Access Filesystem**: Using this option, you can browse the filesystem. You
    can even upload, download, and delete files:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '![](img/be7c6ada-12c5-4dee-8469-066f5d375311.png)'
  prefs: []
  type: TYPE_IMG
- en: '**Search Filesystem**: If you want to search for specific files or perform
    a wildcard search, you can use this option:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '![](img/27986ef9-9936-425f-aa58-9ef681ad4978.png)'
  prefs: []
  type: TYPE_IMG
- en: '**Command Shell**: If you want to access the Meterpreter command shell, you
    can click on this button to open the command shell:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '![](img/120f6bd2-d353-477a-bbf5-1b7ea2d739ea.png)'
  prefs: []
  type: TYPE_IMG
- en: 'You can execute the commands in the given input box. The result will be displayed
    like so:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/183652fe-4998-4768-9951-a5e4deea65b6.png)'
  prefs: []
  type: TYPE_IMG
- en: 'This window will only support Meterpreter commands. The System commands can
    be run using the `shell` command:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/a858add3-1918-4146-87bc-00640fa8bfb4.png)'
  prefs: []
  type: TYPE_IMG
- en: '**Create Proxy Pivot**: Creating a proxy pivot is the same as adding routes
    for pivoting:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '![](img/b7d20321-c0e8-4e77-9665-f15721ba7421.png)'
  prefs: []
  type: TYPE_IMG
- en: 'You can use this option if you want to connect to the internal network for
    further exploitation:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/bd6036ff-5ca7-412f-b39f-95dc2fe51d96.png)'
  prefs: []
  type: TYPE_IMG
- en: '**Create VPN Pivot**: This option will let you create an encrypted layer-2
    tunnel in the compromised machine and then route any network traffic through that
    target machine. This grants you full network access as if you were on the local
    network, without a perimeter firewall to block your traffic.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Change Transport**: To change the transport mechanism of the session, you
    can use this option, as shown in the following screenshot:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '![](img/98b7985d-d9ab-4369-a7be-7fef82c16736.png)'
  prefs: []
  type: TYPE_IMG
- en: First, you need to start a handler for the specific transport; otherwise, the
    process will fail.
  prefs: []
  type: TYPE_NORMAL
- en: '**Terminate Session**: Once you use this option, the session will be terminated.
    To interact with the session, you will have to begin the exploitation process
    again.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Next, let's look at the post-exploitation modules that are available in the
    web interface.
  prefs: []
  type: TYPE_NORMAL
- en: Post-exploitation modules
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'For post-exploitation, you can use the post-exploitation modules available
    in the interface, as shown in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/da9411fe-a8f0-4f8e-8a75-aedf2aff5cc5.png)'
  prefs: []
  type: TYPE_IMG
- en: 'For the target shown in the preceding screenshot, let''s use the `hashdump`
    post-exploitation module. To use this module, you just need to check which session
    the module needs to be executed for:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/98d1a906-33a2-4155-9aef-4006d6d807cf.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Click on Run Module to execute the `hashdump` module. This module will dump
    the NTLM hashes from the SAM database. A new task ID will be assigned to this
    module. You can check the task in the taskbar:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/45e0e625-5b38-422e-bcbc-a6b3cb3dd286.png)'
  prefs: []
  type: TYPE_IMG
- en: 'The extracted hashes can be viewed in the Credentials menu from the **Project**
    tab bar:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/7ea33316-97f7-48c3-8ae8-4d7fb1d5e59d.png)'
  prefs: []
  type: TYPE_IMG
- en: You can use different post-exploitation modules, depending on the situation.
  prefs: []
  type: TYPE_NORMAL
- en: Summary
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In this chapter, we discussed the web interface of MSF. We started off by installing
    Metasploit and setting up its configuration. Then, we moved on and discussed modules,
    such as creating a project and importing a scan result from a different tool.
    After that, we looked at auxiliaries and exploits before learning about the post-exploitation
    modules that are available in the Metasploit web interface.
  prefs: []
  type: TYPE_NORMAL
- en: In the next chapter, we'll learn how to use Metasploit to perform recon on different
    types of targets, protocols, and ports.
  prefs: []
  type: TYPE_NORMAL
- en: Questions
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: What features does the Metasploit web interface come with?
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: In my organization, I'm obliged to use my company's SSL certificate on any web
    server being used. Can I provide my custom SSL certificate for the Metasploit
    web interface?
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: What web browsers are compatible with the Metasploit web interface?
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Does Metasploit support RESTful APIs?
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Does the Metasploit web interface support custom reporting?
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Further reading
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: More information about the web interface can be found on the official documentation
    page at [https://metasploit.help.rapid7.com/docs/metasploit-web-interface-overview](https://metasploit.help.rapid7.com/docs/metasploit-web-interface-overview).
  prefs: []
  type: TYPE_NORMAL
