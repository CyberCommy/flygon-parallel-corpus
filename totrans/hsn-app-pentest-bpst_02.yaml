- en: Configuring the Client and Setting Up Mobile Devices
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Once we have Burp Suite up and configured to act as the proxy through which
    all our communication will go to the target, we need to set up the clients to
    talk to Burp, so that the communication path is complete.
  prefs: []
  type: TYPE_NORMAL
- en: Almost all clients that can talk to HTTP/HTTPS servers have a way of setting
    a proxy endpoint. This tells the client that it needs to send the traffic to the
    proxy endpoint first, which will then forward it to the target. Different clients
    have different ways of setting this proxy setting. Some clients use the operating
    system's proxy setting to enforce the path of the traffic.
  prefs: []
  type: TYPE_NORMAL
- en: In this chapter, we shall see how we can set the proxy option for various common
    clients, both on mobile and traditional computing devices.
  prefs: []
  type: TYPE_NORMAL
- en: 'We will cover the following topics in the chapter:'
  prefs: []
  type: TYPE_NORMAL
- en: Setting up Firefox, Chrome and Internet Explorer to work with Burp Suite (HTTP
    and HTTPS)
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Additional browser add-ons that can be used to manage proxy settings
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Setting system-wide proxy for non-proxy-aware clients
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Setting up Android and iOS to work with Burp Suite
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Setting up Firefox to work with Burp Suite (HTTP and HTTPS)
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Firefox has been a hacker favorite for quite some time now. This is largely
    due to a plethora of add-ons that allow you to extend its features and abilities.
    One of the primary advantages that Firefox has over other browsers in the industry
    is its ability to use proxy settings that are not tied with the operating system.
  prefs: []
  type: TYPE_NORMAL
- en: Firefox can be set up to use a specific proxy, even if the operating system
    has a separate system proxy set. This allows for various tools that require a
    separate proxy to be used in conjunction with Firefox, while ensuring Firefox
    does take a separate route.
  prefs: []
  type: TYPE_NORMAL
- en: Remember, no browsers, including Firefox, have separate proxy settings for the
    private/incognito mode.
  prefs: []
  type: TYPE_NORMAL
- en: Setting up Chrome to work with Burp Suite (HTTP and HTTPS)
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Google Chrome uses the system proxy to route traffic unless a command-line argument
    is used to specify a proxy server. This can be both cumbersome to work with and
    advantageous, in that you can set the proxy in Chrome without even opening the
    Chrome UI.
  prefs: []
  type: TYPE_NORMAL
- en: 'To set up proxy options in Chrome, perform the following steps:'
  prefs: []
  type: TYPE_NORMAL
- en: 'Click on the three dots on the top right corner and select Settings:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/9d1269d4-8f73-447f-b478-3d4a3b177269.png)'
  prefs: []
  type: TYPE_IMG
- en: 'In the Settings window, type proxy to find the Open proxy settings option:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/8436ee5e-ec83-42d5-8909-7462b05ae495.png)'
  prefs: []
  type: TYPE_IMG
- en: This will open up the Windows Internet Properties dialog box.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Click on LAN settings to open up the settings page:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/bf173a88-480c-4502-bab3-a2fa275f0365.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Enter the port number and IP address of the system where Burp Suite is running,
    as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/fe84b2ed-0d14-423d-ba9f-9cdf14cf82fc.png)'
  prefs: []
  type: TYPE_IMG
- en: You can also click on Advanced to use specific addresses for different protocols.
    Remember this is a system-wide proxy setting.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/67cbd2fa-941e-4c69-87de-1531eb4e6aa0.png)'
  prefs: []
  type: TYPE_IMG
- en: Click OK to apply the settings.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Setting up Chrome proxy options on Linux
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'On Linux, when you attempt to set Google Chrome''s proxy options, you may encounter
    an error, as shown here:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: In such cases, you can either specify the proxy server via a command-line argument,
    or by editing the `.desktop` file that was created when Chrome/Chromium was installed.
  prefs: []
  type: TYPE_NORMAL
- en: 'The command-line argument to start Google Chrome with a specific proxy is:'
  prefs: []
  type: TYPE_NORMAL
- en: Setting up Internet Explorer to work with Burp Suite (HTTP and HTTPS)
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Internet Explorer and Microsoft Edge both use the Windows system proxy setting
    as their own preference.
  prefs: []
  type: TYPE_NORMAL
- en: 'Following these steps will help you set up proxy options in Internet Explorer:'
  prefs: []
  type: TYPE_NORMAL
- en: 'Click on the gear icon on the top right corner and select Internet options:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/4f2abf1e-3e03-42d5-af42-d47da77b8d2e.png)'
  prefs: []
  type: TYPE_IMG
- en: The Internet options dialog will open up. Click on Connections | LAN settings
    to manage your proxy settings for Internet Explorer.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Remember this is a system-wide proxy setting and most programs on the system
    will also obey this, especially if they do not have a proxy setting of their own.
  prefs: []
  type: TYPE_NORMAL
- en: Additional browser add-ons that can be used to manage proxy settings
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: During a web application penetration test, requirements may arise to switch
    in and out of your proxy settings. There will be times when you may want to have
    a direct connection to the internet, while the rest of the time you may want your
    traffic to go through Burp.
  prefs: []
  type: TYPE_NORMAL
- en: There are scenarios as well where you may want all your traffic to go through
    Burp, except  maybe [google.com](http://google.com). In such cases, switching
    in and out of the browsers' proxy setting can easily become an unpleasant user
    experience.
  prefs: []
  type: TYPE_NORMAL
- en: For these reasons, there exist several add-ons/extensions for Firefox and Chrome
    that allow you to switch the browser's proxy setting to a different proxy at the
    click of an option.
  prefs: []
  type: TYPE_NORMAL
- en: Let's ...
  prefs: []
  type: TYPE_NORMAL
- en: FoxyProxy for Firefox
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'The most popular add-on for Firefox when it comes to proxy management is this
    nifty little add-on called **FoxyProxy**, written by Eric H Jung:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/4cb568c6-3c9a-49da-81ba-073f4e6e72df.png)'
  prefs: []
  type: TYPE_IMG
- en: FoxyProxy allows you to create multiple profiles that can be set to different
    proxy endpoints, and selected at will when there is a requirement.
  prefs: []
  type: TYPE_NORMAL
- en: 'Here''s what FoxyProxy looks like with multiple profiles created in Firefox.
    This menu becomes available as an option in the Firefox window that can be activated
    with a click:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/2571f130-696e-4975-bb9d-b10acc138a5e.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Let''s take a simple example of setting up a proxy option:'
  prefs: []
  type: TYPE_NORMAL
- en: 'Install the Firefox extension using Firefox''s `about:addons` page. The add-on
    name is **FoxyProxy Standard**:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/e90d4456-639b-4f92-8c31-b5900d66ae80.png)'
  prefs: []
  type: TYPE_IMG
- en: Once installation is completed, a tiny icon of a fox will become available in
    the top right corner next to the Settings button.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the FoxyProxy icon and select Options.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click **Add** to open the page to add a new proxy.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Add all the details that describe your Burp proxy endpoint. Select a color
    as well. This is the color that the fox icon will change to when the proxy is
    in use:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/af8d2640-7b8d-4faa-b887-1d6be5039f87.png)'
  prefs: []
  type: TYPE_IMG
- en: The newly created proxy will come up in the list of available proxy profiles.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Click on the fox icon to select your proxy. You can verify if this is working
    or not by looking at the traffic in Burp:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/4f316087-b812-4b66-8e25-06df57e3f9ce.png)'
  prefs: []
  type: TYPE_IMG
- en: To switch off the proxy and to use the Firefox default option (No proxy), select
    Turn Off FoxyProxy.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: This add-on is extremely powerful when it comes to filtering domain names and
    even URLs. You can add patterns that will match or not, and cause only traffic
    destined to a specific domain to go through FoxyProxy, and eventually through
    Burp.
  prefs: []
  type: TYPE_NORMAL
- en: Proxy SwitchySharp for Google Chrome
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: This is a fabulous add-on that eases the difficulty in switching proxies in
    Chrome while it is running, especially if the system proxy is not where you want
    to send your web traffic.
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/233f6f15-0171-4b8e-9a64-9649165dfd0c.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Here''s what SwitchySharp looks like with multiple profiles created in Google
    Chrome. This menu becomes available as an option in the Google Chrome window that
    can be activated with a click:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/5cd78e19-f4c8-4f9c-a077-6d6c0cc505a6.png)'
  prefs: []
  type: TYPE_IMG
- en: 'To get started with the add-on, install it through the Chrome web store at [https://chrome.google.com/webstore/category/extensions](https://chrome.google.com/webstore/category/extensions):'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Setting system-wide proxy for non-proxy-aware clients
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Non-proxy-aware clients in this context are applications that talk to the internet
    over HTTPS but do not have an option to set a proxy server so that traffic through
    them can be captured. These applications use the system proxy settings. This is
    common with thick client applications on Windows.
  prefs: []
  type: TYPE_NORMAL
- en: In such cases, we can set a system-wide proxy setting to work with our applications.
    System-wide proxy settings can be set via a command line and through the GUI.
    However, knowing the command-line options allows you to be able to script them,
    so that you can switch system-wide proxy settings using bash scripts or batch
    files, depending on the OS you are on.
  prefs: []
  type: TYPE_NORMAL
- en: Linux or macOS X
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: To use a proxy on the Linux command line, the environment variables `http_proxy`,
    `https_proxy`, or `ftp_proxy` have to be set, depending on the traffic type.
  prefs: []
  type: TYPE_NORMAL
- en: 'To do this effectively, the following commands have to be run:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: 'You can check the current proxy settings via the `env` command:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: Windows
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Windows system-wide proxy settings can be applied via Internet options | Connections
    | LAN settings. This setting can also be applied using the netsh commands, as
    shown in the following steps:'
  prefs: []
  type: TYPE_NORMAL
- en: Start cmd as administrator
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Run `netsh winhttp set proxy 127.0.0.1:8080`
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'To check if the settings have been applied, run the following command:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: 'To reset the proxy, run:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs: []
  type: TYPE_PRE
- en: Setting up Android to work with Burp Suite
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: To test Android applications, or to even test web applications via your Android
    device, you need to configure Burp Proxy to start a listener on interfaces and
    then connect the Android device and the system running Burp to the same wireless
    network.
  prefs: []
  type: TYPE_NORMAL
- en: This causes the Burp listener to become visible and accessible to the Android
    device on the same network.
  prefs: []
  type: TYPE_NORMAL
- en: 'Follow these steps to set a proxy for your Android device:'
  prefs: []
  type: TYPE_NORMAL
- en: Go to the SETTINGS menu.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Connect to the same wireless network as Burp.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'If you are already connected, click on the wireless connection name and select
    Manage network settings, as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on Show advanced options, to show the Proxy setting. Click on the  ...
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Why Burp Suite? Let's cover some groundwork!
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Burp Suite is a proxy and it allows you to intercept and tamper each and every
    request that goes from the browser to the application server. This gives the tester
    a huge capability to pentest all the avenues of the application, as it shows all
    the available endpoints. It works as a middleware. The biggest advantage it gives
    you is the capability to bypass client-side validations.
  prefs: []
  type: TYPE_NORMAL
- en: It is a smart tool that keeps track of your browsing history and also manages
    the site structure, giving you a better picture of what is available and what
    the newly discovered avenues are. The core advantage of Burp is that it allows
    you to forward HTTP requests to different Burp tools and carry out the required
    task. It could be repeating or automating an attack, decoding certain parameters,
    or comparing two or more different requests. Burp gives the user a capability
    to understand different formats by decoding the parameters at runtime for the
    user; for example, decoding `ViewState` parameters, beautifying JSON requests,
    and so on.
  prefs: []
  type: TYPE_NORMAL
- en: Setting up iOS to work with Burp Suite
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: To set up an iOS device to work with Burp, we need to add Burp's network listener
    address (as we did with the Android device) to the iOS device's network configuration.
  prefs: []
  type: TYPE_NORMAL
- en: 'To achieve this, follow these steps:'
  prefs: []
  type: TYPE_NORMAL
- en: On the iOS device, open Settings.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Assuming you are already connected to the wireless network, tap the Wi-Fi option,
    and tap the information icon next to the wireless access point name.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select **Manual** under the HTTP PROXY section, and enter the IP address and
    port number of the Burp listener.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Go back and browse to an HTTP site on your iOS device's browser and see that
    the traffic is received by Burp.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: To be able to access HTTPS sites you will need, to add Burp's CA certificate
    in the iOS device. To ...
  prefs: []
  type: TYPE_NORMAL
- en: Summary
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In this chapter, we learned how to set up Firefox, Chrome, and Internet Explorer
    to send and receive HTTP and HTTPS traffic through Burp Suite. We configured system-wide
    proxy setting for non-proxy-aware clients. We also learned about browser add-ons
    and extensions that make switching between proxies a breeze.
  prefs: []
  type: TYPE_NORMAL
- en: In the next chapter we will learn how to execute an application penetration
    test
  prefs: []
  type: TYPE_NORMAL
