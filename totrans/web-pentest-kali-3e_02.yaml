- en: Setting Up Your Lab with Kali Linux
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Preparation is the key to everything; it becomes even more important when working
    on a penetration testing project, where you get a limited amount of time for reconnaissance,
    scanning, and exploitation. Eventually, you can gain access and present a detailed
    report to the customer. Each penetration test that you conduct will be different
    in nature and may require a different approach from the tests that you conducted
    earlier. Tools play a major role in penetration testing. So, you need to prepare
    your toolkit beforehand and have hands-on experience with all of the tools that
    you will need to execute the test.
  prefs: []
  type: TYPE_NORMAL
- en: 'In this chapter, we will cover the following topics:'
  prefs: []
  type: TYPE_NORMAL
- en: An overview of Kali Linux and changes from the previous version
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The different ways of installing Kali Linux
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Virtualization versus installation on physical hardware
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: A walk-through and configuration of important tools in Kali Linux
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Vulnerable web applications and virtual machines to set up a testing lab
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Kali Linux
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Kali Linux is a security-focused Linux distribution based on Debian. It's a
    rebranded version of the famous Linux distribution known as BackTrack, which came
    with a huge repository of open source hacking tools for network, wireless, and
    web application penetration testing. Although Kali Linux contains most of the
    tools of BackTrack, the main objective of Kali Linux was to make it portable to
    be installed on devices based on ARM architectures, such as tablets and the Chromebook,
    which makes the tools easily available at your disposal.
  prefs: []
  type: TYPE_NORMAL
- en: Using open source hacking tools comes with a major drawback—they contain a whole
    lot of dependencies when installed on Linux, and they need to be installed in
    a predefined sequence. Moreover, the authors of some tools have not released accurate
    documentation, which makes our life difficult.
  prefs: []
  type: TYPE_NORMAL
- en: Kali Linux simplifies this process; it contains many tools preinstalled with
    all of the dependencies, and it is in a ready-to-use condition so that you can
    pay more attention to an actual attack and not on simply installing the tool.
    Updates for tools installed in Kali Linux are released frequently, which helps
    you keep the tools up to date. A noncommercial toolkit that has all of the major
    hacking tools preinstalled to test real-world networks and applications is the
    dream of every ethical hacker, and the authors of Kali Linux made every effort
    to make our lives easy, which lets us spend more time on finding actual flaws
    rather than on building a toolkit.
  prefs: []
  type: TYPE_NORMAL
- en: Latest improvements in Kali Linux
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: At Black Hat USA 2015, Kali 2.0 was released with a new 4.0 kernel. It is based
    on Debian Jessie, and it was codenamed as Kali Sana. The previous major release
    of Kali was version 1.0 with periodic updates released up to version 1.1\. Cosmetic
    interface changes for better accessibility and the addition of newer and more
    stable tools are a few of the changes in Kali 2.0.
  prefs: []
  type: TYPE_NORMAL
- en: 'Some major improvements in Kali 2.0 are listed here:'
  prefs: []
  type: TYPE_NORMAL
- en: '**Continuous rolling updates**: In January 2016, the update cycle of Kali Linux
    was improved with the shift to a rolling release, with a major upgrade in April
    2017\. A rolling release distribution is one that is constantly updated so that
    users can be given the latest updates and packages when they are available. Now
    users won''t have to wait for a major release to get bug fixes. In Kali 2.0, packages
    are regularly pulled from the Debian testing distribution as they are released.
    This helps keep the core OS of Kali updated.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Frequent tool updates**: Offensive Security, the organization that maintains
    the Kali Linux distribution, has devised a different method to check for updated
    tools. They now use a new upstream version checking the system that sends periodic
    updates when newer versions of tools are released. With this method, tools in
    Kali Linux are updated as soon as the developer releases them.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**A revamped desktop environment**: Kali Linux now supports a full GNOME 3
    session. GNOME 3 is one of the most widely used desktop environments, and it is
    a favorite for developers. The minimum RAM required for running a full GNOME3
    session is 768 MB. Although this is not an issue, considering the hardware standards
    of computers today; if you have an older machine, you can download the lighter
    version of Kali Linux that uses the Xfce desktop environment with a smaller set
    of useful tools. Kali Linux also natively supports other desktop environments
    such as KDE, MATE, E17, i3wm, and LXDE. Kali 2.0 comes with new wallpapers, a
    customizable sidebar, an improved menu layout, and many more visual tweaks.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Support for various hardware platforms**: Kali Linux is now available for
    all major releases of Google Chromebooks and Raspberry Pi. NetHunter, the hacking
    distribution designed for mobile devices, which is built upon Kali Linux, has
    been updated to Kali 2.0\. The official VMware and VirtualBox images have also
    been updated.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Major tool changes**: The Metasploit Community and Pro packages have been
    removed from Kali 2.0\. If you require these versions, you need to download it
    directly from Rapid7''s website ([https://www.rapid7.com/](https://www.rapid7.com/)).
    Now, only Metasploit Framework—the open source version—comes with Kali Linux.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Installing Kali Linux
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: The success of Kali Linux is also due to the flexibility in its installation.
    If you want to test a system quickly, you can get up and running with Kali Linux
    in a few minutes on an Amazon cloud platform, or you can have it installed on
    a high-speed SSD drive with a fast processor if you want to crack passwords using
    a rainbow table. With Linux as its base, every part of the operating system can
    be customized, which makes Kali Linux a useful toolkit in any testing environment.
    You can get Kali Linux from its official download page at [https://www.kali.org/downloads/](https://www.kali.org/downloads/).
  prefs: []
  type: TYPE_NORMAL
- en: 'Kali Linux can be installed in numerous ways on several platforms:'
  prefs: []
  type: TYPE_NORMAL
- en: '**The USB mode**: Using tools such as Rufus, Universal USB Installer in Windows,
    or `dd` in Linux, you can create a bootable USB drive from an ISO image.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Preinstalled virtual machines**: VirtualBox, VMware, and Hyper-V images are
    available to download from the official Kali Linux site. Just download and import
    any one of them to your virtualization software.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Docker containers**: In recent years, Docker containers have proved to be
    useful and convenient in many scenarios and have gained favor over virtualization
    in some sectors. The official Kali Linux image for Docker is found at: [https://hub.docker.com/r/kalilinux/kali-linux-docker/](https://hub.docker.com/r/kalilinux/kali-linux-docker/).'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Kali Linux minimal image on Amazon EC2**: Kali Linux has an **Amazon Machine
    Image** (**AMI**) available for use in the AWS marketplace at: [https://aws.amazon.com/marketplace/pp/B01M26MMTT](https://aws.amazon.com/marketplace/pp/B01M26MMTT).'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Kali NetHunter**: This is an Android ROM overlay. This means that Kali NetHunter
    runs on top of an Android ROM (be it original or custom). It is currently available
    for a limited number of devices, and its installation may not be as straightforward
    as the other Kali versions. For more information about Kali NetHunter, refer to:
    [https://github.com/offensive-security/kali-nethunter/wiki](https://github.com/offensive-security/kali-nethunter/wiki).'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Installing on a physical computer**: This may be the best option for a professional
    penetration tester who has a laptop dedicated to testing and who requires the
    full use of hardware such as the GPU, processor, and memory. This can be done
    by downloading an ISO image and recording it onto a CD, DVD, or USB drive, and
    then using it to boot the computer and start the installer.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Based on personal preference, and with the goal of saving memory and processing
    power while having a fully functional and lightweight desktop environment, throughout
    this book, we will use a setup consisting of a VirtualBox virtual machine with
    the Xfce4 Kali Linux ISO installed on it.
  prefs: []
  type: TYPE_NORMAL
- en: Virtualizing Kali Linux versus installing it on physical hardware
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: The popularity of virtualization software makes it an attractive option for
    installing your testing machine on a virtualized platform. Virtualization software
    provides a rich set of features at a low cost and removes the hassle of dual booting
    the machine. Another useful feature that most virtualization software packages
    provide is the cloning of virtual machines that you can use to create multiple
    copies of the same machine. In a real-world penetration test, you might need to
    clone and duplicate your testing machine in order to install additional hacking
    tools and to make configuration changes in Kali Linux, keeping a copy of the earlier
    image to be used as a base image in a virtualized environment. This can be achieved
    very easily.
  prefs: []
  type: TYPE_NORMAL
- en: Some virtualization software have a *revert to snapshot* feature, wherein, if
    you mess up your testing machine, you can go back in time and restore a clean
    slate on which you can do your work.
  prefs: []
  type: TYPE_NORMAL
- en: Modifying the amount of RAM, size of a virtual disk, and number of virtual processors
    assigned to a virtual machine when required is another well-known feature of virtualization
    software.
  prefs: []
  type: TYPE_NORMAL
- en: Along with the features that make a virtualization platform such an attractive
    option comes one major drawback. If the penetration test involves testing the
    strength of the password used on the network or another processor-intensive task,
    you will need a high-performing processor and a GPU dedicated to that task. Cracking
    passwords on a virtual platform is not a wise thing to do, as it slows down the
    process and you won't be able to use the processor to its maximum capacity due
    to the virtualization overhead.
  prefs: []
  type: TYPE_NORMAL
- en: Another feature of a virtualization platform that confuses a lot of people is
    the networking options. Bridged, Host-only, and NAT are the three major networking
    options that virtualization software provide. Bridged networking is the recommended
    option for performing a penetration test, as the virtual machine will act as if
    it is connected to a physical switch and packets move out of the host machine
    unaltered.
  prefs: []
  type: TYPE_NORMAL
- en: Installing on VirtualBox
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Oracle VirtualBox, compatible with multiple platforms, can be obtained from
    [https://www.virtualbox.org/wiki/Downloads](https://www.virtualbox.org/wiki/Downloads).
    It is also recommended that you download and install the corresponding extension
    pack, as it provides USB 2.0 and 3.0 support, RDP, disk encryption, and several
    interesting features.
  prefs: []
  type: TYPE_NORMAL
- en: From the Kali downloads page, choose your preferred version. As mentioned earlier,
    we will use the Xfce4 64-bits ISO ([https://www.kali.org/downloads/](https://www.kali.org/downloads/)).
    You can choose any other version according to your hardware or preference, as
    the installed tools or the access to them will not be different for different
    versions—unless you pick a *Light* version that only includes the operating system
    and a small set of tools.
  prefs: []
  type: TYPE_NORMAL
- en: Creating the virtual machine
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Start by opening VirtualBox and creating a new virtual machine. Select a name
    for it (we will use `Kali-Linux`), and set Linux as the type and Debian (64-bit)
    as the version. If you selected a 32-bit ISO, change the version for Debian (32-bit).
    Then, click on Next:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/00014.jpeg)'
  prefs: []
  type: TYPE_IMG
- en: 'In the next screen that appears, select the amount of memory reserved for the
    virtual machine. Kali Linux can run with as low as 1 GB of RAM; however, the recommended
    setting for a virtual machine is 2-4 GB. We will set 2 GB for our machine. Remember
    that you will require memory in your host computer to run other programs and maybe
    other virtual machines:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/00015.jpeg)'
  prefs: []
  type: TYPE_IMG
- en: 'In the next step, we will create a hard disk for our virtual machine. Select
    Create a virtual hard disk now and click on Create. On the next screen, let the
    type remain as VDI (VirtualBox Disk Image) and Dynamically allocated. Then, select
    the filename and path; you can leave that as it is. Last, select the disk size.
    We will use 40 GB. A freshly installed Kali Linux uses 25 GB. Select the disk
    size, and click on Create:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/00016.jpeg)'
  prefs: []
  type: TYPE_IMG
- en: Installing the system
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Now that the virtual machine is created, select it in the VirtualBox list and
    click on Settings in the top bar. Then, go to Storage and select the empty drive
    that has the CD icon. Next, we will configure the virtual machine to use the Kali
    Linux ISO that you just downloaded as a bootable drive (or live CD). Click on
    the CD icon on the right-hand side, then on Choose Virtual Optical Disk File...
    , and navigate to the folder where the Kali ISO was downloaded:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/00017.jpeg)'
  prefs: []
  type: TYPE_IMG
- en: 'Accept the settings changes. Now that all of the settings are complete, start
    the virtual machine and you will be able to see Kali''s GRUB loader. Select Graphical
    install and press *Enter*:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/00018.jpeg)'
  prefs: []
  type: TYPE_IMG
- en: 'In the next few screens, you will have to select language, location, and keymap
    (keyboard distribution):'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/00019.jpeg)'
  prefs: []
  type: TYPE_IMG
- en: Following this, the installer will attempt the network configuration. There
    should be no issue here, as VirtualBox sets a NAT network adapter for all new
    virtual machines by default. Then, you will be asked for a hostname and domain.
    If your network requires no specific value, leave these values unchanged and click
    on Continue.
  prefs: []
  type: TYPE_NORMAL
- en: Next, you will be asked for a password for the root user. This is the user with
    highest privileges in your system, so even if the virtual machine is to be used
    for practice and testing purposes, choose a strong password. Select your time
    zone and click on Continue.
  prefs: []
  type: TYPE_NORMAL
- en: 'Now you''ve reached the point where you need to select where to install the
    system and the hard disk partitioning. If you have no specific preferences, choose
    the first option, Guided partitioning. Select the option for using the entire
    disk and click on Continue. In the next screen, or when you finish configuring
    the disk partitioning, select Finish partitioning and write the changes to disk,
    and click on Continue:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/00020.jpeg)'
  prefs: []
  type: TYPE_IMG
- en: Click Continue in the next screen to write the changes to the disk and the installation
    will start.
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/00021.jpeg)'
  prefs: []
  type: TYPE_IMG
- en: 'When the installation finishes, the installer will try to configure the update
    mechanisms. Verify that your host computer is connected to the internet, leave
    the proxy configuration unchanged, and select Yes when asked if you want to use
    a network mirror:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/00022.jpeg)'
  prefs: []
  type: TYPE_IMG
- en: 'The installer will generate configuration files for APT, the Debian package
    manager. The next step is to configure the GRUB boot loader. Select Yes when asked,
    and install it in `/dev/sda`:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/00023.jpeg)'
  prefs: []
  type: TYPE_IMG
- en: Next, you should see the Installation complete message. Click on Continue to
    reboot the virtual machine. At this point, you can remove the ISO file from the
    storage configuration as you won't need it again.
  prefs: []
  type: TYPE_NORMAL
- en: 'Once the virtual machine restarts, you will be asked for a username and password.
    Use the `root` user and the password set during the installation:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/00024.jpeg)'
  prefs: []
  type: TYPE_IMG
- en: Important tools in Kali Linux
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Once you have Kali Linux up and running, you can start playing with the tools.
    Since this book is about web application hacking, all of the major tools on which
    we will be spending most of our time can be accessed from Applications | Web Application
    Analysis. The following screenshot shows the tools present in Web Application
    Analysis:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/00025.jpeg)'
  prefs: []
  type: TYPE_IMG
- en: 'In Kali Linux, the tools in Web Applications Analysis are further divided into
    four categories, as listed here:'
  prefs: []
  type: TYPE_NORMAL
- en: CMS & Framework Identification
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Web Application Proxies
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Web Crawlers and Directory Bruteforce
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Web Vulnerability Scanners
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: CMS & Framework Identification
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '**Content Management Systems** (**CMS**) are very popular on the internet and
    hundreds of websites have been deployed using one of them—*WordPress*. Plugins
    and themes are an integral part of WordPress websites. However, there have been
    a huge number of security issues associated with these add-ons. WordPress websites
    are usually administered by ordinary users who are unconcerned about security,
    and they rarely update their WordPress software, plugins, and themes, making these
    sites an attractive target.'
  prefs: []
  type: TYPE_NORMAL
- en: WPScan
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '**WPScan** is a very fast WordPress vulnerability scanner written in the Ruby
    programming language and preinstalled in Kali Linux.'
  prefs: []
  type: TYPE_NORMAL
- en: 'The following information can be extracted using WPScan:'
  prefs: []
  type: TYPE_NORMAL
- en: The plugins list
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The name of the theme
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Weak passwords and usernames using the brute forcing technique
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Details of the version
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Possible vulnerabilities
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Some additional CMS tools available in Kali Linux are listed in following subsections.
  prefs: []
  type: TYPE_NORMAL
- en: JoomScan
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '**JoomScan** can detect known vulnerabilities, such as file inclusion, command
    execution, and injection flaws, in Joomla CMS. It probes the application and extracts
    the exact version the target is running.'
  prefs: []
  type: TYPE_NORMAL
- en: CMSmap
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '**CMSmap** is not included in Kali Linux, but is easily installable from GitHub.
    This is a vulnerability scanner for the most commonly used CMSes: WordPress, Joomla,
    and Drupal. It uses Exploit Database to look for vulnerabilities in the enabled
    plugins of CMS. To download it, issue the following command in Kali Linux Terminal:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: Web Application Proxies
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: An HTTP proxy is one of the most important tools in the kit of a web application
    hacker, and Kali Linux includes several of these. A feature that you might miss
    in one proxy will surely be in another proxy. This underscores the real advantage
    of Kali Linux and its vast repository of tools.
  prefs: []
  type: TYPE_NORMAL
- en: An HTTP proxy is a software that sits between the browser and the website, intercepting
    all the traffic that flows between them. The main objective of a web application
    hacker is to gain deep insight into the inner workings of the application, and
    this is best accomplished by acting as a man in the middle and intercepting every
    request and response.
  prefs: []
  type: TYPE_NORMAL
- en: Burp Proxy
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '**Burp Suite** has become the de facto standard for web application testing.
    Its many features provide nearly all of the tools required by a web penetration
    tester. The Pro version includes an automated scanner that can do active and passive
    scanning, and it has added configuration options in Intruder (Burp''s fuzzing
    tool). Kali Linux includes the free version, which doesn''t have scanning capabilities,
    nor does it offer the possibility of saving projects; also, it has some limitations
    on the fuzzing tool, *Intruder*. It can be accessed from Applications | Web Application
    Analysis | Web Application Proxies. Burp Suite is a feature-rich tool that includes
    a web spider, Intruder, and a repeater for automating customized attacks against
    web applications. I will go into greater depth on several Burp Suite features
    in later chapters.'
  prefs: []
  type: TYPE_NORMAL
- en: 'Burp Proxy is a nontransparent proxy, and the first step that you need to take
    is to bind the proxy to a specific port and IP address and configure the web browser
    to use the proxy. By default, Burp listens on the `127.0.0.1` loopback address
    and the `8080` port number:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/00026.jpeg)'
  prefs: []
  type: TYPE_IMG
- en: Make sure that you select a port that is not used by any other application in
    order to avoid any conflicts. Note the port and binding address and add these
    to the proxy settings of the browser.
  prefs: []
  type: TYPE_NORMAL
- en: By default, Burp Proxy only intercepts requests from the clients. It does not
    intercept responses from the server. If required, manually turn it on from the
    Options tab in Proxy, further down in the Intercept Server Responses section.
  prefs: []
  type: TYPE_NORMAL
- en: Customizing client interception
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Specific rules can also be set if you want to narrow down the amount of web
    traffic that you intercept. As shown in the following screenshot, you can match
    requests for specific domains, HTTP methods, cookie names, and so on. Once the
    traffic is intercepted, you can then edit the values, forward them to the web
    server, and analyze the response:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/00027.jpeg)'
  prefs: []
  type: TYPE_IMG
- en: Modifying requests on the fly
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'In the Match and Replace section, you can configure rules that will look for
    specific values in the request and edit it on the fly without requiring any manual
    intervention. Burp Proxy includes several of these rules. The most notable ones
    are used to replace the user agent value with that of Internet Explorer, iOS,
    or Android devices:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/00028.jpeg)'
  prefs: []
  type: TYPE_IMG
- en: Burp Proxy with HTTPS websites
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Burp Proxy also works with HTTPS websites. In order to decrypt the communication
    and be able to analyze it, Burp Proxy intercepts the connection, presents itself
    as the web server, and issues a certificate that is signed by its own SSL/TLS
    **Certificate Authority** (**CA**). The proxy then presents itself to the actual
    HTTPS website as the user, and it encrypts the request with the certificate provided
    by the web server. The connection from the web server is then terminated at the
    proxy that decrypts the data and re-encrypts it with the self-signed CA certificate,
    which will be displayed on the user''s web browser. The following diagram explains
    this process:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/00029.jpeg)'
  prefs: []
  type: TYPE_IMG
- en: 'The web browser will display a warning, as the certificate is self-signed and
    not trusted by the web browser. You can safely add an exception to the web browser,
    since you are aware that Burp Proxy is intercepting the request and not a malicious
    user. Alternatively, you can export Burp''s certificate to a file by clicking
    on the corresponding button in Proxy Listeners by going to Proxy | Options and
    then import the certificate into the browser and make it a trusted one:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/00030.jpeg)'
  prefs: []
  type: TYPE_IMG
- en: Zed Attack Proxy
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '**Zed Attack Proxy** (**ZAP**) is a fully featured, open source web application
    testing suite maintained by the **Open Web Application Security Project** (**OWASP**),
    a nonprofit community dedicated to web application security. As with Burp Suite,
    it also has a proxy that is capable of intercepting and modifying HTTP/HTTPS requests
    and responses, although it may not be as easy to use as Burp. You will occasionally
    find a small feature missing from one proxy but available in another. For example,
    ZAP includes a forced browsing tool that can be used to identify directories and
    files in a server.'
  prefs: []
  type: TYPE_NORMAL
- en: ProxyStrike
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Also included in Kali Linux is an active proxy known as **ProxyStrike**. This
    proxy not only intercepts the request and response, but it also actively finds
    vulnerabilities. It has modules to find SQL injection and XSS flaws. Similar to
    other proxies that have been discussed previously, you need to configure the browser
    to use ProxyStrike as the proxy. It performs automatic crawling of the application
    in the background, and the results can be exported to both HTML and XML formats.
  prefs: []
  type: TYPE_NORMAL
- en: Web Crawlers and Directory Bruteforce
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Some applications have hidden web directories that an ordinary user interacting
    with the web application will not see. Web crawlers try to explore all links and
    references within a web page and find hidden directories. Apart from the spidering
    and crawling features of some proxies, Kali Linux includes some really useful
    tools for this purpose.
  prefs: []
  type: TYPE_NORMAL
- en: DIRB
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: DIRB is a command-line tool that can help you discover hidden files and directories
    in web servers using dictionary files (such as, lists of possible filenames).
    It can perform basic authentication and use session cookies and custom user agent
    names for emulating web browsers. We will use DIRB in later chapters.
  prefs: []
  type: TYPE_NORMAL
- en: DirBuster
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '**DirBuster** is a Java application that performs a brute force attack on directories
    and filenames on the web application. It can use a file containing the possible
    file and directory names or generate all possible combinations. DirBuster uses
    a list produced by surfing the internet and collecting the directory and files
    that developers use in real-world web applications. DirBuster, which was developed
    by OWASP, is currently an inactive project and is provided now as a ZAP attack
    tool rather than a standalone tool.'
  prefs: []
  type: TYPE_NORMAL
- en: Uniscan
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '**Uniscan-gui** is a comprehensive tool that can check for existing directories
    and files as well as perform basic port scans, traceroutes, server fingerprinting,
    static tests, dynamic tests, and stress tests against a target.'
  prefs: []
  type: TYPE_NORMAL
- en: Web Vulnerability Scanners
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: A **vulnerability scanner** is a tool that, when run against a target(s), is
    able to send requests or packets to the target(s) and interpret the responses
    in order to identify possible security vulnerabilities, such as misconfigurations,
    outdated versions, and lack of security patches, and other common issues. Kali
    Linux also includes several vulnerability scanners, and some of them are specialized
    in web applications.
  prefs: []
  type: TYPE_NORMAL
- en: Nikto
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '**Nikto** is long-time favorite of web penetration testers. Few features have
    been added to it recently, but its development continues. It is a feature-rich
    vulnerability scanner that you can use to test vulnerabilities on different web
    servers. It claims to check outdated versions of software and configuration issues
    on several of the popular web servers.'
  prefs: []
  type: TYPE_NORMAL
- en: 'Some of the well-known features of Nikto are as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: It generates output reports in several forms such as HTML, CSV, XML, and text
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: It includes false positive reduction using multiple techniques to test for vulnerabilities
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: It can directly login to Metasploit
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: It does Apache username enumeration
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: It finds subdomains via brute force attacks
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: It can customize maximum execution time per target before moving on to the next
    target
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: w3af
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: The **Web Application Attack and Audit Framework** (**w3af**) is a web application
    vulnerability scanner. It is probably the most complete vulnerability scanner
    included in Kali Linux.
  prefs: []
  type: TYPE_NORMAL
- en: Skipfish
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '**Skipfish** is a vulnerability scanner that begins by creating an interactive
    site map for the target website, using a recursive crawl and prebuilt dictionary.
    Each node in the resulting map is then tested for vulnerabilities. Speed of scanning
    is one of its major features that distinguishes it from other web vulnerability
    scanners. It is well-known for its adaptive scanning features, for more intelligent
    decision making from the response received in the previous step. It provides a
    comprehensive coverage of the web application in a relatively short time. The
    output of Skipfish is in the HTML format.'
  prefs: []
  type: TYPE_NORMAL
- en: Other tools
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: The following are not exactly web-focused vulnerability scanners, but they are
    those useful tools included in Kali Linux, which can help you identify weaknesses
    in your target applications.
  prefs: []
  type: TYPE_NORMAL
- en: OpenVAS
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'The **Open Vulnerability Assessment Scanner** (**OpenVAS**) is a network vulnerability
    scanner in Kali Linux. A penetration test should always include a vulnerability
    assessment of the target system, and OpenVAS does a good job of identifying vulnerabilities
    on the network side. OpenVAS is a fork of Nessus, one of the leading vulnerability
    scanners in the market, but its feeds are completely free and licensed under GPL.
    The latest version of Kali Linux doesn''t include OpenVAS, but it can be easily
    downloaded and installed using APT as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: 'Once installed in Kali Linux, OpenVAS requires an initial configuration before
    you start using it. Go to Applications | Vulnerability Analysis, and select OpenVAS
    initial setup. Kali Linux needs to be connected to the internet to complete this
    step as the tool downloads all of the latest feeds and other files. At the end
    of the setup, a password is generated, which is to be used during the login of
    the GUI interface:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/00031.jpeg)'
  prefs: []
  type: TYPE_IMG
- en: You can now open the graphical interface by pointing your browser to `https://127.0.0.1:9392`.
    Accept the self-signed certificate error, and then log in with the `admin` username
    and the password generated during the initial configuration.
  prefs: []
  type: TYPE_NORMAL
- en: OpenVAS is now ready to run a vulnerability scan against any target. You can
    change the password after you log in, by navigating to Administrations | Users
    and selecting the edit user option (marked with a spanner) against the username.
  prefs: []
  type: TYPE_NORMAL
- en: 'The GUI interface is divided into multiple menus, as described here:'
  prefs: []
  type: TYPE_NORMAL
- en: 'Dashboard: A customizable dashboard that presents information related to vulnerability
    management, scanned hosts, recently published vulnerability disclosures and other
    useful information.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Scans: From here you can start a new network VA scan. You will also find all
    of the reports and findings under this menu.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Assets: Here you will find all of the accumulated hosts from the scans.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'SecInfo: The detailed information of all the vulnerabilities and their CVE
    IDs are stored here.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Configuration: Here you can configure various options, such as alerts, scheduling,
    and reporting formats. Scanning options for host and open port discovery can also
    be customized using this menu.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Extras: Settings related to the OpenVAS GUI, such as time and language, can
    be done from this menu.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Administration: Adding and deleting users and feed synchronization can be done
    through the Administration menu.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Now let''s take a look at the scan results from OpenVAS. I scanned three hosts
    and found some high-risk vulnerabilities in two of them. You can further click
    on individual scans and view detailed information about the vulnerabilities identified:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/00032.jpeg)'
  prefs: []
  type: TYPE_IMG
- en: Database exploitation
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: No web penetration test is complete without testing the security of the backend
    database. SQL servers are always on the target list of attackers, and they need
    special attention during a penetration test to close loopholes that could be leaking
    information from the database. **SQLNinja** is a tool written in Perl, and it
    can be used to attack Microsoft SQL server vulnerabilities and gain shell access.
    Similarly, the **sqlmap** tool is used to exploit a SQL server that is vulnerable
    to a SQL injection attack and fingerprint, retrieve user and database information,
    enumerate users, and do much more. SQL injection attacks will be discussed further
    in [Chapter 5](part0198.html#5SQFC0-d48f8b63a8cc440fbc92835fec01cc38), *Detecting
    and Exploiting Injection-Based Flaws*.
  prefs: []
  type: TYPE_NORMAL
- en: Web application fuzzers
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: A **fuzzer** is a tool designed to inject random data into a web application.
    A web application fuzzer can be used to test for buffer overflow conditions, error
    handling issues, boundary checks, and parameter format checks. The result of a
    fuzzing test is to reveal vulnerabilities that cannot be identified by web application
    vulnerability scanners. Fuzzers follow a trial and error method and require patience
    while identifying flaws.
  prefs: []
  type: TYPE_NORMAL
- en: Burp Suite and WebScarab have a built-in fuzzer. Wfuzz is a one-click fuzzer
    available in Kali Linux. We will use all of these to test web applications in
    [Chapter 10](part0316.html#9DBHO0-d48f8b63a8cc440fbc92835fec01cc38), *Other Common
    Security Flaws in Web Applications*.
  prefs: []
  type: TYPE_NORMAL
- en: Using Tor for penetration testing
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Sometimes, web penetration testing may include bypassing certain protections,
    filtering or blocking from the server side, or avoiding being detected or identified
    in order to test in a manner similar to a real-world malicious hacker. The **Onion
    Router** (**Tor**) provides an interesting option to emulate the steps that a
    black hat hacker uses to protect their identity and location. Although an ethical
    hacker trying to improve the security of a web application should not be concerned
    about hiding their location, using Tor gives you the additional option of testing
    the edge security systems such as network firewalls, web application firewalls,
    and IPS devices.
  prefs: []
  type: TYPE_NORMAL
- en: Black hat hackers employ every method to protect their location and true identity;
    they do not use a permanent IP address and constantly change it in order to fool
    cybercrime investigators. If targeted by a black hat hacker, you will find port
    scanning requests from a different range of IP addresses, and the actual exploitation
    will have the source IP address that your edge security systems are logging into
    for the first time. With the necessary written approval from the client, you can
    use Tor to emulate an attacker by connecting to the web application from an unknown
    IP address form which the system does not normally see connections. Using Tor
    makes it more difficult to trace back the intrusion attempt to the actual attacker.
  prefs: []
  type: TYPE_NORMAL
- en: 'Tor uses a virtual circuit of interconnected network relays to bounce encrypted
    data packets. The encryption is multilayered, and the final network relay releasing
    the data to the public internet cannot identify the source of the communication,
    as the entire packet was encrypted and only a part of it is decrypted at each
    node. The destination computer sees the final exit point of the data packet as
    the source of the communication, thus protecting the real identity and location
    of the user. The following diagram from Electronic Frontier Foundation ([https://www.eff.org](https://www.eff.org))
    explains this process:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/00033.jpeg)'
  prefs: []
  type: TYPE_IMG
- en: 'Kali Linux includes Tor preinstalled. For more information on how to use Tor
    and security considerations, refer to the Tor project''s website at: [https://www.torproject.org/](https://www.torproject.org/).'
  prefs: []
  type: TYPE_NORMAL
- en: There may be some tools and applications that don't support socks proxies, but
    can be configured to use an HTTP proxy. Privoxy is a tool that acts as an HTTP
    proxy and can be chained to Tor. It is also included in Kali Linux.
  prefs: []
  type: TYPE_NORMAL
- en: Vulnerable applications and servers to practice on
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: If you don't have explicit written authorization from the owner of such assets,
    scanning, testing, or exploiting vulnerabilities in servers and applications on
    the internet is illegal in most countries. Therefore, you need to have a laboratory
    that you own and control, where you can practice and develop your testing skills.
  prefs: []
  type: TYPE_NORMAL
- en: In this section, we will review some of the options that you have when learning
    about web application penetration testing.
  prefs: []
  type: TYPE_NORMAL
- en: OWASP Broken Web Applications
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'The **Broken Web Applications** (**BWA**) Project from OWASP is a collection
    of vulnerable web applications, which are distributed as a virtual machine with
    the purpose of providing students, security enthusiasts, and penetration testing
    professionals a platform for learning and developing web application testing skills,
    testing automated tools, and testing **Web Application Firewalls** (**WAFs**)
    and other defensive measures:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/00034.jpeg)'
  prefs: []
  type: TYPE_IMG
- en: 'The latest version of BWA at the time of this writing is 1.2, released in August
    2015\. Even though it is more than a couple of years old, it is a great resource
    for the prospective penetration tester. It includes some of the most complete
    web applications made vulnerable on purpose, for testing purposes, and it covers
    many different platforms; consider these examples:'
  prefs: []
  type: TYPE_NORMAL
- en: '**WebGoat**: This is a Java-based web application with an educational focus.
    It contains examples and challenges for the most common web vulnerabilities.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**WebGoat.NET and RailsGoat**: These are the .NET and Ruby on Rails versions
    of WebGoat, respectively.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Damn Vulnerable Web Application (DVWA)**: This is perhaps the most popular
    vulnerable-on-purpose web application available. It is based on PHP and contains
    training sections for common vulnerabilities.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'OWASP BWA also includes *realistic* vulnerable web applications, that is, vulnerable-on-purpose
    web applications that simulate real-world applications, where you can look for
    vulnerabilities that are less obvious than in the applications listed previously.
    Some examples are as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '**WackoPicko**: This is an application where you can post pictures and buy
    photos of other users'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**The BodgeIt Store**: This simulates an online store where one needs to find
    vulnerabilities and complete a series of challenges'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Peruggia**: This simulates a social network where you can upload pictures,
    receive comments, and comment on pictures of other users'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'There are also versions of real-web applications with known vulnerabilities
    that complement this collection, which you can test and exploit; consider these
    examples:'
  prefs: []
  type: TYPE_NORMAL
- en: WordPress
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Joomla
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: WebCalendar
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: AWStats
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'More information on the Broken Web Applications Project and download links
    can be found on its website: [https://www.owasp.org/index.php/OWASP_Broken_Web_Applications_Project](https://www.owasp.org/index.php/OWASP_Broken_Web_Applications_Project).'
  prefs: []
  type: TYPE_NORMAL
- en: WARNING
  prefs: []
  type: TYPE_NORMAL
- en: When installing OWASP BWA, remember that it contains applications that have
    serious security issues. *Do not* install vulnerable applications on physical
    servers with internet access. Use a virtual machine, and set its network adapter
    to NAT, NAT network, or host only.
  prefs: []
  type: TYPE_NORMAL
- en: Hackazon
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '**Hackazon** is a project from Rapid7, the company that makes Metasploit. It
    was first intended to demonstrate the effectiveness of their web vulnerability
    scanner and then released as open source. This is a modern web application (that
    is, it uses AJAX, web services, and other features that you''ll find in today''s
    websites and applications). Hackazon simulates an online store, but it has several
    security problems built in. You can practice online at: [http://hackazon.webscantest.com/](http://hackazon.webscantest.com/).
    Alternatively, if you feel like setting up a virtual server and installing and
    configuring it there, go to: [https://github.com/rapid7/hackazon](https://github.com/rapid7/hackazon).'
  prefs: []
  type: TYPE_NORMAL
- en: Web Security Dojo
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'The **Web Security Dojo** project from Maven Security is a self-contained virtual
    machine that has vulnerable applications, training material, and testing tools
    included. This project is very actively developed and updated. The latest version
    at the time of this writing is 3.0, which was released in May 2017\. It can be
    obtained from: [https://www.mavensecurity.com/resources/web-security-dojo](https://www.mavensecurity.com/resources/web-security-dojo).'
  prefs: []
  type: TYPE_NORMAL
- en: Other resources
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'There are so many good applications and virtual machines for learning and practicing
    penetration testing that this list could go on for many pages. Here, I will list
    some additional tools to the ones already mentioned:'
  prefs: []
  type: TYPE_NORMAL
- en: '**ZeroBank**: This is a vulnerable banking application: [http://zero.webappsecurity.com/login.html](http://zero.webappsecurity.com/login.html).'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Acunetix''s SecurityTweets**: This is a Twitter-like application focused
    on HTML5 security: [http://testhtml5.vulnweb.com/#/popular](http://testhtml5.vulnweb.com/#/popular).'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**OWASP''s vulnerable web applications directory**: This is a curated list
    of publicly available vulnerable web applications for security testing: [https://github.com/OWASP/OWASP-VWAD](https://github.com/OWASP/OWASP-VWAD).'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**VulnHub**: A repository for vulnerable virtual machines and **Capture The
    Flag** (**CTF**) challenges. It contains some virtual machines with web applications:
    [https://www.vulnhub.com](https://www.vulnhub.com).'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Summary
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: This chapter was all about installing, configuring, and using Kali Linux. We
    started by explaining the different ways that Kali Linux can be installed and
    the scenarios where you can use it. Virtualizing Kali Linux is an attractive option,
    and we discussed the pros and cons for doing it. Once Kali Linux was up and running,
    we presented an overview of the major hacking tools that you will be using to
    test web applications. Burp Suite is a very interesting and feature-rich tool
    that we will be using throughout the book. We then discussed web vulnerability
    scanners which are of great use in identifying flaws and configuration issues
    in well-known web servers. We also talked about using Tor and Privoxy to emulate
    a real-world attacker who would hide their real identity and location. Finally,
    we reviewed some alternatives for building a testing lab and vulnerable web applications
    to test and develop your skills.
  prefs: []
  type: TYPE_NORMAL
- en: In the next chapter, we will perform reconnaissance, scan web applications,
    and identify the underlying technologies used that will act as a base for further
    exploitation.
  prefs: []
  type: TYPE_NORMAL
