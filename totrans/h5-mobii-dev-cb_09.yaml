- en: Chapter 9. Mobile Performance Testing
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'In this chapter, we will cover:'
  prefs: []
  type: TYPE_NORMAL
- en: Mobile testing your device with Blaze
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Analyzing mobile page speed online
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: PCAP Web Performance Analyzer
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: HTTP Archive Mobile
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Storing performance data with Jdrop
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Introduction
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In this chapter, we will go through some of the hottest mobile performance testing
    tools.
  prefs: []
  type: TYPE_NORMAL
- en: Like mobile debugging, mobile performance testing may not be as straightforward
    as desktop testing. But for every cloud, there is a silver lining. Many developers
    have found creative ways to address such issues.
  prefs: []
  type: TYPE_NORMAL
- en: Speed testing your device with Blaze
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Target browsers: cross-browser'
  prefs: []
  type: TYPE_NORMAL
- en: 'If you want to save time and quickly test the performance of a mobile site
    to know the load times and information about page resources, then Blaze is a good
    choice. The Mobitest Performance Tool is used to understand mobile web performance.
    It provides the following test results:'
  prefs: []
  type: TYPE_NORMAL
- en: Overall load times
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Breakdown of individual page resources
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Rendering video
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Raw HTTP Archive (HAR) file
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Getting ready
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: All you have to do is to log on to [http://www.blaze.io/mobile/](http://www.blaze.io/mobile/).
  prefs: []
  type: TYPE_NORMAL
- en: How to do it...
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '![How to do it...](img/1963_09_01.jpg)'
  prefs: []
  type: TYPE_IMG
- en: On the page, you can see the following form that allows you to enter a URL.
    Let's put **yahoo.com** to the test!
  prefs: []
  type: TYPE_NORMAL
- en: 'At the top of the results page, we can see from the screenshot average load
    time, page size, and the speed ranking of the site:'
  prefs: []
  type: TYPE_NORMAL
- en: '![How to do it...](img/1963_09_02.jpg)'
  prefs: []
  type: TYPE_IMG
- en: 'The following diagram shows the waterfall chart of the site:'
  prefs: []
  type: TYPE_NORMAL
- en: '![How to do it...](img/1963_09_03.jpg)'
  prefs: []
  type: TYPE_IMG
- en: How it works...
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '**Device used**'
  prefs: []
  type: TYPE_NORMAL
- en: You might be wondering what devices are used at the backend, and if they are
    emulators or simulators. The tests are run on real mobile devices using custom-built
    agents.
  prefs: []
  type: TYPE_NORMAL
- en: '**Load time percentile**'
  prefs: []
  type: TYPE_NORMAL
- en: An internal index is used to calculate the load time percentile. It uses hundreds
    of websites to get the speed of a site compared to other sites.
  prefs: []
  type: TYPE_NORMAL
- en: '**Location of the test run**'
  prefs: []
  type: TYPE_NORMAL
- en: 'The test run location is in Ottawa, Canada. The agents are connected to the
    Internet over WiFi. Devices used at the time of writing are: iPhone, Nexus, and
    Samsung Galaxy S.'
  prefs: []
  type: TYPE_NORMAL
- en: 'To know more, visit:'
  prefs: []
  type: TYPE_NORMAL
- en: '[http://www.blaze.io/mobile/methodology/](http://www.blaze.io/mobile/methodology/).'
  prefs: []
  type: TYPE_NORMAL
- en: There's more...
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'A list of useful page test tools can be found at:'
  prefs: []
  type: TYPE_NORMAL
- en: '[http://www.blaze.io/learn/feo-resources/](http://www.blaze.io/learn/feo-resources/)'
  prefs: []
  type: TYPE_NORMAL
- en: Blaze blog
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'Apart from the testing tools provided, there is also a blog run by Blaze with
    great articles talking about everything mobile optimization-related at:'
  prefs: []
  type: TYPE_NORMAL
- en: '[http://www.blaze.io/blog/](http://www.blaze.io/blog/)'
  prefs: []
  type: TYPE_NORMAL
- en: Web performance optimization best practices
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'For good tips about web performance best practices, visit the Blaze optimization
    page at:'
  prefs: []
  type: TYPE_NORMAL
- en: '[http://www.blaze.io/overview/optimizations/](http://www.blaze.io/overview/optimizations/)'
  prefs: []
  type: TYPE_NORMAL
- en: Analyzing mobile page speed online
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Target browsers: cross-browser'
  prefs: []
  type: TYPE_NORMAL
- en: If you are familiar with Google Page Speed, you know that there is a Chrome
    extension to test load time on desktop browsers. But there is also a web version
    of Google Page Speed that can be used to analyze mobile performance.
  prefs: []
  type: TYPE_NORMAL
- en: Getting ready
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Visit Google Page Speed Online at:'
  prefs: []
  type: TYPE_NORMAL
- en: '[http://pagespeed.googlelabs.com/](http://pagespeed.googlelabs.com/).'
  prefs: []
  type: TYPE_NORMAL
- en: How to do it...
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'In this example, we will test Google''s mobile home page:'
  prefs: []
  type: TYPE_NORMAL
- en: Enter a URL you want to analyze, in our case, let's use **m.google.com:**![How
    to do it...](img/1963_09_04.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on the drop-down list next to the input box and choose **Get mobile suggestions**
    from the drop-down menu:![How to do it...](img/1963_09_05.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Once clicking on **Analyze Mobile Performance**, we reach a page that looks
    as follows:![How to do it...](img/1963_09_06.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: How it works...
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The Page Speed Score indicates how much faster a page could be. For our example,
    the number is 62 out of 100.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following are details of the analysis. The details have been broken down
    as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: 'High priority: These suggestions represent the largest potential performance
    winners for the least development effort. You should address these items first.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Medium priority: These suggestions may represent smaller wins or much more
    work to implement.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Low priority: These suggestions represent the smallest wins.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Experimental rules: These suggestions are experimental, but do not affect the
    overall Page Speed score.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Rules without suggestions: There are no suggestions for these rules, as this
    page already follows these best practices. But you can still check the rules by
    expanding the collapsible menu on the left.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: There's more...
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'To see a list of Mobile Performance Tools, visit:'
  prefs: []
  type: TYPE_NORMAL
- en: '[https://github.com/h5bp/mobile-boilerplate/wiki/Mobile-Performance-Tools](http://github.com/h5bp/mobile-boilerplate/wiki/Mobile-Performance-Tools)'
  prefs: []
  type: TYPE_NORMAL
- en: The need for speed
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'MIT technology review shows some charts and statistics about how important
    speed is and how it affects your site''s visitors. The article mentions that even
    slight slowdowns online frustrate people and cost companies money:'
  prefs: []
  type: TYPE_NORMAL
- en: '[http://www.technologyreview.com/files/54902/GoogleSpeed_charts.pdf](http://www.technologyreview.com/files/54902/GoogleSpeed_charts.pdf)'
  prefs: []
  type: TYPE_NORMAL
- en: When seconds count
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'A national consumer survey on website and mobile performance expectations was
    conducted by Gomez Inc:'
  prefs: []
  type: TYPE_NORMAL
- en: '[http://www.gomez.com/wp-content/downloads/GomezWebSpeedSurvey.pdf](http://www.gomez.com/wp-content/downloads/GomezWebSpeedSurvey.pdf)'
  prefs: []
  type: TYPE_NORMAL
- en: Analyzing mobile performance with PCAP Web Performance Analyzer
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Target browsers: cross-browser'
  prefs: []
  type: TYPE_NORMAL
- en: PCAP Web Performance Analyzer allows you to have greater control over data analysis.
    You can interact with the mobile website/application and get the performance data
    more accurately. It's created by *Bryan McQuade* and *Libo Song*.
  prefs: []
  type: TYPE_NORMAL
- en: Getting ready
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Before using PCAP Web Performance Analyzer, we need to first capture PCAP files
    for mobile devices. We do so by setting up a private WiFi network, connect the
    mobile device to the network, capture, and then analyze the traffic. Here is how
    to do it:'
  prefs: []
  type: TYPE_NORMAL
- en: Open **Control Panel** | **Network and Internet** | **Network and Sharing Center**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select the link for **Set up a new connection or network**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select **Set up a wireless ad hoc (computer-to-computer) network**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Next, give the network a name (hot1, for example), and check **Save this network**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Go back to **Network and Sharing Center**, click on the **Change adapter settings**
    link on the left.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Find your LAN, right-click and open **Properties** | **Sharing tab**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Enable sharing.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Now we have to download Wireshark which we can use to choose the network traffic
    that we want to capture. We can generate the HAR file and save it on the local
    machine using the following steps:'
  prefs: []
  type: TYPE_NORMAL
- en: 'Download Wireshark from: [http://www.wireshark.org/download.html](http://www.wireshark.org/download.html).'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Open WireShark.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on **Menu Capture** | **Options**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: In the **Options** dialog, select your wireless interface, and click on **Capture
    Filter**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: In the **Capture Filter** dialog, create a new filter (if you have not already
    done so), with the name **TCP and UDP port 53 (DNS)**, and filter string as **tcp
    or udp port 53**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select the filter, then close the dialog.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on the **Start** button in the **Capture Options** dialog to start capturing.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Save the capture when done.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: To connect a mobile device to a hotspot, on your mobile device connect to the
    WiFi hotspot specified ("hot1" in our example). Now, any websites you visit on
    your mobile device should be captured by *tcpdump*.
  prefs: []
  type: TYPE_NORMAL
- en: How to do it...
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'On the **Performance Analyzer** page, select your saved HAR file and click
    on **Upload**. The file will be processed and a detailed analysis with Waterfall
    will be displayed:'
  prefs: []
  type: TYPE_NORMAL
- en: '![How to do it...](img/1963_09_09.jpg)'
  prefs: []
  type: TYPE_IMG
- en: How it works...
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: It uses open file formats PCAP and HAR, and open source tools pcap2har, HAR
    viewer, and Page Speed.
  prefs: []
  type: TYPE_NORMAL
- en: There's more...
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '*Stoyan Stefanov* maintains a hugely useful site about web and mobile performance:'
  prefs: []
  type: TYPE_NORMAL
- en: '[http://calendar.perfplanet.com/2010/mobile-performance-analysis-using-pcapperf/](http://calendar.perfplanet.com/2010/mobile-performance-analysis-using-pcapperf/)'
  prefs: []
  type: TYPE_NORMAL
- en: HAR viewer
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'As it says on the official description, *HAR Viewer is a web application (PHP
    + JavaScript) that allows visualizing HTTP tracing logs based on HTTP Archive
    format (HAR)*. The project is hosted on Google Code; you can check it out at:
    [http://code.google.com/p/harviewer/](http://code.google.com/p/harviewer/).'
  prefs: []
  type: TYPE_NORMAL
- en: Using Page Speed to optimize your website for mobile
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'There is a video on using Google''s Page Speed. The video was shot during Google
    I/O 2011, presented by the creators of PACPPERF and can be found at:'
  prefs: []
  type: TYPE_NORMAL
- en: '[http://www.google.com/events/io/2011/sessions/use-page-speed-to-optimize-your-web-site-for-mobile.html](http://www.google.com/events/io/2011/sessions/use-page-speed-to-optimize-your-web-site-for-mobile.html)'
  prefs: []
  type: TYPE_NORMAL
- en: pcap2har
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'To know more about pcap2har, you can visit the project page hosted on Github
    at:'
  prefs: []
  type: TYPE_NORMAL
- en: '[https://github.com/andrewf/pcap2har](http://github.com/andrewf/pcap2har)'
  prefs: []
  type: TYPE_NORMAL
- en: Using HTTP Archive Mobile
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Target browsers: cross-browser'
  prefs: []
  type: TYPE_NORMAL
- en: 'HTTP Archive Mobile tracks how the Web is built. It provides:'
  prefs: []
  type: TYPE_NORMAL
- en: '**Trends in web technology:** Load times, download sizes, performance scores'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Interesting stats:** Popular scripts, image formats, errors, redirects'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Website performance:** Specific URL screenshots, waterfall charts, HTTP headers'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Getting ready
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Log on to [http://mobile.httparchive.org/](http://mobile.httparchive.org/).
  prefs: []
  type: TYPE_NORMAL
- en: How to do it...
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Click on **Trends** and you can see the trends such as transfer size and requests
    of HTML, JavaScript, CSS, Image, and Flash. The following is the chart of HTML
    Transfer Size & HTML Requests:'
  prefs: []
  type: TYPE_NORMAL
- en: '![How to do it...](img/1963_09_07.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Click on **Stats** and you can get many interesting stats, from most common
    image formats to most common servers; from pages with the most CSS to pages with
    the most images.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following is a chart showing the most popular JS libraries:'
  prefs: []
  type: TYPE_NORMAL
- en: '![How to do it...](img/1963_09_08.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Click on **Websites** and you will get all the performance information relating
    to a particular site, including Filmstrip, Waterfall, Page speed, Requests, Trends,
    and Downloads of the HAR file.
  prefs: []
  type: TYPE_NORMAL
- en: How it works...
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The sites listed are the ones that ranked top by Alexa, Fortune, Global 500,
    and Quancast10K.
  prefs: []
  type: TYPE_NORMAL
- en: The list of URLs is fed to `WebPagetest.org`.
  prefs: []
  type: TYPE_NORMAL
- en: The HTTP waterfall chart is generated from the HAR file using JavaScript.
  prefs: []
  type: TYPE_NORMAL
- en: There's more...
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: So, you may ask why we need to record the data. We do so because it is important
    to archive and learn from the history of web performance. As *Steve Souders* says,
    'The *HTTP Archive provides this record. It is a permanent repository of web performance
    information such as size of pages, failed requests, and technologies utilized.'*
    (at [http://www.stevesouders.com/blog/2011/03/30/announcing-the-http-archive/)](http://www.stevesouders.com/blog/2011/03/30/announcing-the-http-archive/)).
  prefs: []
  type: TYPE_NORMAL
- en: How accurate is the data?
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'If you are wondering about the data accuracy, have a read at: [http://mobile.httparchive.org/about.php#accuracy](http://mobile.httparchive.org/about.php#accuracy)
    about the measurements, in particular the time measurements.'
  prefs: []
  type: TYPE_NORMAL
- en: Limitation of the testing methodology
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'Although the test results are largely useful, there are limitations that users
    need to take note of. For a list of things to consider, visit:'
  prefs: []
  type: TYPE_NORMAL
- en: '[http://mobile.httparchive.org/about.php#limitations](http://mobile.httparchive.org/about.php#limitations)'
  prefs: []
  type: TYPE_NORMAL
- en: Storing performance data with Jdrop
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Target browsers: cross-browser'
  prefs: []
  type: TYPE_NORMAL
- en: '**Jdrop** is used to store mobile device performance data. The JSON data are
    stored in the cloud.'
  prefs: []
  type: TYPE_NORMAL
- en: Mobile device has small screen real estate, which makes analyzing huge chunks
    of information difficult. To counter the problem, Jdrop allows you to analyze
    data gathered from mobile devices on the large screen.
  prefs: []
  type: TYPE_NORMAL
- en: Getting ready
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Sign in to Jdrop at [http://jdrop.org/](http://jdrop.org/).
  prefs: []
  type: TYPE_NORMAL
- en: How to do it...
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'On your mobile device:'
  prefs: []
  type: TYPE_NORMAL
- en: Sign in to Jdrop.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Install any of the apps that use Jdrop.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Run the app and save data to Jdrop.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'On your desktop or laptop:'
  prefs: []
  type: TYPE_NORMAL
- en: Sign in to Jdrop.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: View the JSON data that you generated.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'On mobile devices, the easiest way to start is to embed the contents of `jdrop-example.js`
    (can be found at: [http://jdrop.org/jdrop-example.js)](http://jdrop.org/jdrop-example.js))
    in your bookmarklet script. In addition, you also have to add a *Save to Jdrop*
    link to your bookmarklet that calls your function. You can find the code with
    explanation at: [http://jdrop.org/devdocs](http://jdrop.org/devdocs).'
  prefs: []
  type: TYPE_NORMAL
- en: '**Saving to Jdrop:**'
  prefs: []
  type: TYPE_NORMAL
- en: Here's the code you need to add a *Save to Jdrop* link to your bookmarklet.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: '**Registering your app:**'
  prefs: []
  type: TYPE_NORMAL
- en: For now, registering your app requires a bit of manual work; you have to post
    a request to the Jdrop discussion list ([http://groups.google.com/group/jdrop/topics](http://groups.google.com/group/jdrop/topics)).
  prefs: []
  type: TYPE_NORMAL
- en: 'This is the information needed to register your app:'
  prefs: []
  type: TYPE_NORMAL
- en: '**App Name** (required)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Script URL** (required)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Callback Function** (optional)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Format** (optional)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Format Key** (optional)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Some of the information might be changed by the time you read this, and you
    can log on to [http://jdrop.org/devdocs](http://jdrop.org/devdocs) to check if
    there are any updates.
  prefs: []
  type: TYPE_NORMAL
- en: How it works...
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: You might be wondering why Jdrop asks for access to your Google Contacts when
    connecting through a Google account. This is because OAuth to Google requires
    mentioning a service to authenticate with. Jdrop doesn't actually access any of
    your contacts. The creators are looking at OpenID instead of OAuth as a way to
    bypass this step.
  prefs: []
  type: TYPE_NORMAL
- en: There's more...
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Jdrop was created by *Steve Souders* and *James Pearce*.
  prefs: []
  type: TYPE_NORMAL
- en: '*Steve Souders* is no stranger to most developers; to see all the wonders he
    has created, go to:'
  prefs: []
  type: TYPE_NORMAL
- en: '[http://stevesouders.com/](http://stevesouders.com/).'
  prefs: []
  type: TYPE_NORMAL
- en: '*James Pearce* is the director of developer relations at Sencha Inc. You can
    find interesting ideas and useful information about mobile on his website at:'
  prefs: []
  type: TYPE_NORMAL
- en: '[http://tripleodeon.com/](http://tripleodeon.com/).'
  prefs: []
  type: TYPE_NORMAL
