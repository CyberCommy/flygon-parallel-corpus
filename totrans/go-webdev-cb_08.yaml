- en: Working with the Go Web Application Framework – Beego
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'In this chapter, we will cover the following recipes:'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
- en: Creating your first project using Beego
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Creating your first controller and router
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Creating your first view
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Creating your first session variable
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Creating your first filter
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Handling HTTP errors in Beego
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Implementing caching in Beego
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Monitoring the Beego application
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Deploying the Beego application on a local machine
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Deploying the Beego application with Nginx
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Introduction
  id: totrans-12
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: A web application framework is a must whenever we are developing an application
    because it significantly speeds up and simplifies our work by eliminating the
    need to write a lot of repetitive code and providing features such as models,
    APIs, and other elements. Using an application framework, we can enjoy the perks
    of its architecture pattern and boost the development of an application.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
- en: A popular type of web application framework is **Model-View-Controller** (**MVC**)
    and there are many MVC frameworks available for Go, such as Revel, Utron, and
    Beego.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
- en: In this chapter, we will learn about Beego, which is one of the most popular
    and commonly used web MVC frameworks. We will start with creating the project
    and then move on to creating controllers, views, and  filters. We will also look
    at implementing caching, and monitoring and deploying an application.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
- en: Creating your first project using Beego
  id: totrans-16
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: The first and the foremost thing we have to do to start a project is to set
    up its basic architecture. In Beego, this can be achieved easily using a tool
    called `bee`, which we will cover in this recipe.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
- en: How to do it…
  id: totrans-18
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Install the `github.com/beego/bee` package using the `go get` command, as follows:'
  id: totrans-19
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE0]'
  id: totrans-20
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'Open a terminal to your `$GOPATH/src` directory and create a project using
    the `bee new` command, as follows:'
  id: totrans-21
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE1]'
  id: totrans-22
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Once the command has executed successfully, it will create a new Beego project,
    and the creation steps on the console will look like the following screenshot:'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/a8194ce7-d255-4723-b99f-c570e1fdeb92.png)'
  id: totrans-24
  prefs: []
  type: TYPE_IMG
- en: 'Go to the path of the newly created project and enter `bee run` to compile
    and run the project, as follows:'
  id: totrans-25
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE2]'
  id: totrans-26
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'Once, command has executed successfully, `bee` will build the project and start
    the application, as shown in the following screenshot:'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/edc1967e-3c91-4b9e-ae04-4f85abd4cb87.png)'
  id: totrans-28
  prefs: []
  type: TYPE_IMG
- en: How it works…
  id: totrans-29
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Once the command has executed successfully, a web application will run on the
    default Beego port `8080` and browsing `http://localhost:8080/` will render the
    welcome page of the application, as shown in the following screenshot:'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/34d6133d-8cb1-476f-af60-3dccfa850c63.png)'
  id: totrans-31
  prefs: []
  type: TYPE_IMG
- en: Creating your first controller and router
  id: totrans-32
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: One of the main components of a web application is the controller, which acts
    as a coordinator between the view and the model and handles the user's requests,
    which could be a button click, or a menu selection, or HTTP `GET` and `POST` requests.
    In this recipe, we will learn how we can create a controller in Beego.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
- en: How to do it…
  id: totrans-34
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Move to `$GOPATH/src/my-first-beego-project/controllers` and create `firstcontroller.go`,
    as follows:'
  id: totrans-35
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE3]'
  id: totrans-36
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'Move to `$GOPATH/src/my-first-beego-project/routers` and edit `router.go` to
    add `GET` mapping `/employees`, which will be handled by the `GetEmployees` handler
    defined in `FirstController`, as follows:'
  id: totrans-37
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE4]'
  id: totrans-38
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'Run the project using the following command:'
  id: totrans-39
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE5]'
  id: totrans-40
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: How it works…
  id: totrans-41
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Once the command has executed successfully, the web application will run on
    the default Beego port `8080`.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
- en: 'Next, executing a `GET` request from the command line will give you a list
    of all the employees:'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE6]'
  id: totrans-44
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'Let’s understand the program we have written:'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
- en: '`import “github.com/astaxie/beego"`: Here, we imported Beego.'
  id: totrans-46
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`type FirstController struct { beego.Controller }`: Here, we defined the `FirstController`
    struct type, which contains an anonymous struct field of type `beego.Controller`
    because of which `FirstController` automatically acquires all the methods of `beego.Controller`.'
  id: totrans-47
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`func (this *FirstController) GetEmployees() { this.Ctx.ResponseWriter.WriteHeader(200)
    this.Data["json"] = employees this.ServeJSON() }` : Here, we defined the `GetEmployees`
    handler, which will execute for every `GET` request for the URL pattern `/employees`.'
  id: totrans-48
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: In Go, functions or handlers that start with a capital letter are exported functions,
    which means they are public and can be used outside the program. That’s the reason
    we have defined all the functions in our program using a capital letter rather
    than in camel case.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
- en: Creating your first view
  id: totrans-50
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: A view is a visual representation of a model. It accesses data through the model
    and specifies how that data should be presented. It  maintains consistency in
    its presentation when the model changes, which can be either through a push model,
    where the view registers itself with the model for change notifications, or a
    pull model, where the view is responsible for calling the model when it needs
    to retrieve the most current data. In this recipe, we will learn how to create
    our first view to render the list of employees.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
- en: How to do it…
  id: totrans-52
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Move to `$GOPATH/src/my-first-beego-project/views` and create `dashboard.tpl` and
    copy the following content:'
  id: totrans-53
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE7]'
  id: totrans-54
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'Move to `$GOPATH/src/my-first-beego-project/controllers` and edit `firstcontroller.go`
    to add the `Dashboard` handler, as follows:'
  id: totrans-55
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE8]'
  id: totrans-56
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'Move to `$GOPATH/src/my-first-beego-project/routers` and edit `router.go` to
    add the `GET` mapping `/dashboard`, which will be handled by the `Dashboard` handler
    defined in `FirstController`, as follows:'
  id: totrans-57
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE9]'
  id: totrans-58
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'Run the project using the following command:'
  id: totrans-59
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE10]'
  id: totrans-60
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: How it works…
  id: totrans-61
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Once the command has executed successfully, the web application will run on
    the default Beego port `8080`.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
- en: 'Browsing `http://localhost:8080/dashboard` will render the employee dashboard,
    as shown in the following screenshot:'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/bb36f8f2-6852-4f28-8e3f-6778731ecb60.png)'
  id: totrans-64
  prefs: []
  type: TYPE_IMG
- en: Creating your first session variable
  id: totrans-65
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Whenever we need to pass on the user data from one HTTP request to another,
    we can make use of HTTP sessions, which we will be covering in this recipe.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
- en: Getting ready…
  id: totrans-67
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: This recipe assumes you have `Redis` installed and running locally on port `6379`.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
- en: How to do it…
  id: totrans-69
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Install the `github.com/astaxie/beego/session/redis` package using the `go
    get` command, as follows:'
  id: totrans-70
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE11]'
  id: totrans-71
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'Move to `$GOPATH/src/my-first-beego-project/controllers` and create `sessioncontroller.go`,
    where we will define handlers which make sure that only authenticated users can
    view the home page, as follows:'
  id: totrans-72
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE12]'
  id: totrans-73
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'Move to `$GOPATH/src/my-first-beego-project/routers` and edit `router.go` to
    add the `GET` mapping `/home`, `/login`, and `/logout`, which will be handled
    by the `Home`, `Login`, and `Logout` handlers defined in `FirstController`, respectively,
    as follows:'
  id: totrans-74
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE13]'
  id: totrans-75
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'Move to `$GOPATH/src/my-first-beego-project` and edit `main.go` to import `github.com/astaxie/beego/session/redis`,
    as follows:'
  id: totrans-76
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE14]'
  id: totrans-77
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: 'Switch on the `session` usage in `$GOPATH/src/my-first-beego-project/conf/app.conf`,
    as follows:'
  id: totrans-78
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE15]'
  id: totrans-79
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: 'Run the program using the following command:'
  id: totrans-80
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE16]'
  id: totrans-81
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: How it works…
  id: totrans-82
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Once the command has executed successfully, the web application will run on
    the default Beego port `8080`.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
- en: 'Next, we will execute a couple of commands to see how the session works. Firstly,
    we will access `/home` by executing the following command:'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE17]'
  id: totrans-85
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: 'This will give us an unauthorized access message as a response from the server:'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE18]'
  id: totrans-87
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: 'Apparently, we can''t access it because we have to login into the application
    first, which will create a `beegosessionID`. Now let''s log in to the application
    by executing the following command:'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE19]'
  id: totrans-89
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: 'This will result in the following response from the server:'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/6ddd6d86-c388-4b8b-bcb9-bb0a801be17d.png)'
  id: totrans-91
  prefs: []
  type: TYPE_IMG
- en: 'Now we will use the cookie `beegosessionID` created as part of the `/login`
    request to access `/home`, as follows:'
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE20]'
  id: totrans-93
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: Creating your first filter
  id: totrans-94
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Sometimes, we may want to perform logic either before an action method is called
    or after an action method runs. In that case, we use filters, which we will be
    covering in this recipe.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
- en: Filters are basically handlers which encapsulate the common functionality or
    the cross-cutting concern. We just define them once and then apply them to the
    different controllers and action methods.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
- en: How to do it…
  id: totrans-97
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Install the `github.com/astaxie/beego/context` package using the `go get` command,
    as follows:'
  id: totrans-98
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE21]'
  id: totrans-99
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: 'Move to `$GOPATH/src/my-first-beego-project/filters` and create `firstfilter.go`,
    which runs before the `Controller`, and log the IP address and current timestamp,
    as follows:'
  id: totrans-100
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE22]'
  id: totrans-101
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: 'Move to `$GOPATH/src/my-first-beego-project/routers` and edit `router.go` to
    add the `GET` mapping `/*`, which will be handled by the `LogManager` filter,
    as follows:'
  id: totrans-102
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE23]'
  id: totrans-103
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: 'Run the program using the following command:'
  id: totrans-104
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE24]'
  id: totrans-105
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: How it works…
  id: totrans-106
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Once the command has executed successfully, the web application will run on
    the default Beego port `8080`.
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
- en: 'Next, we will execute a request to get all the employees by executing the following
    command:'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE25]'
  id: totrans-109
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: 'Once the command has executed successfully, we can see the IP and timestamp
    printed in the application logs on the console, as follows:'
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/5f17dd63-8b1e-4118-a2fa-686a57917a47.png)'
  id: totrans-111
  prefs: []
  type: TYPE_IMG
- en: 'Using `beego.InsertFilter("/*", beego.BeforeRouter, filters.LogManager) `,
    we inserted a filter in an application which executes for the URL pattern `/*`
    before finding a router and that is handled by `LogManager`. Similar to `beego.BeforeRouter`,
    there are four other places where we can position the filters: `beego**.**BeforeStatic`,
    `beego.BeforeExec`, `beego.AfterExec`, and `beego.FinishRouter`.'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
- en: Handling HTTP errors in Beego
  id: totrans-113
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Error handling is one of the most important aspects in a web application design
    because it helps in two ways. Firstly, it lets the application user know in a
    relatively friendly manner that something has gone wrong and they should contact
    the technical support department or someone from tech support should be notified.
    Secondly, it allows the programmer to put in some niceties to aid in the debugging
    of issues. In this recipe, we will learn how we can implement error handling in
    Beego.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
- en: How to do it…
  id: totrans-115
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Move to `$GOPATH/src/my-first-beego-project/controllers` and create `errorcontroller.go`,
    where we will define handlers to handle `404` and `500` HTTP errors as well as
    the handler to handle any generic error in an application, as follows:'
  id: totrans-116
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE26]'
  id: totrans-117
  prefs: []
  type: TYPE_PRE
  zh: '[PRE26]'
- en: 'Move to `$GOPATH/src/my-first-beego-project/controllers` and edit `firstcontroller.go`
    to add the `GetEmployee` handler, which will get the ID from an HTTP request parameter,
    fetch the employee details from the static employee array, and return it as a
    response or throw the generic error if the requested ID does not exist, as follows:'
  id: totrans-118
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE27]'
  id: totrans-119
  prefs: []
  type: TYPE_PRE
  zh: '[PRE27]'
- en: 'Move to `$GOPATH/src/my-first-beego-project/views` and create `genericerror.tpl`
    with the following content:'
  id: totrans-120
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE28]'
  id: totrans-121
  prefs: []
  type: TYPE_PRE
  zh: '[PRE28]'
- en: 'Run the program using the following command:'
  id: totrans-122
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE29]'
  id: totrans-123
  prefs: []
  type: TYPE_PRE
  zh: '[PRE29]'
- en: How it works…
  id: totrans-124
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Once the command has executed successfully, the web application will run on
    the default Beego port `8080`.
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
- en: 'Next, browsing `http://localhost:8080/employee?id=2` will give you the employee
    details, as shown in the following screenshot:'
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/46d2b6f4-a78c-46ce-b33c-653bf5346abe.png)'
  id: totrans-127
  prefs: []
  type: TYPE_IMG
- en: 'Whereas browsing `http://localhost:8080/employee?id=4` as follows:'
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/15fa193a-8f0a-4154-b574-38c885b00a10.png)'
  id: totrans-129
  prefs: []
  type: TYPE_IMG
- en: It will give you the error message as Some Error Occurred. This is because we
    have asked for details of the employee with the ID as `4`, which does not exist
    in the static employee array, hence the generic error thrown from the server,
    which is handled by the `ErrorGeneric` handler defined in `errorcontroller.go`.
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
- en: Implementing caching in Beego
  id: totrans-131
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Caching data in a web application is sometimes necessary to avoid requesting
    the static data from a database or external service again and again. In this recipe,
    we will learn how we can implement caching in a Beego application.
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
- en: 'Beego supports four cache providers: `file`, `Memcache`, `memory`, and `Redis`.
    In this recipe, we will be working with the framework default cache provider,
    which is a `memory` cache provider.'
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
- en: How to do it…
  id: totrans-134
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Install the `github.com/astaxie/beego/cache` package using the `go get` command,
    as follows:'
  id: totrans-135
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE30]'
  id: totrans-136
  prefs: []
  type: TYPE_PRE
  zh: '[PRE30]'
- en: 'Move to `$GOPATH/src/my-first-beego-project/controllers` and create `cachecontroller.go`,
    where we will define the `GetFromCache` handler, which will get the value for
    a key from a cache and write it to an HTTP response, as follows:'
  id: totrans-137
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE31]'
  id: totrans-138
  prefs: []
  type: TYPE_PRE
  zh: '[PRE31]'
- en: 'Move to `$GOPATH/src/my-first-beego-project/routers` and edit `router.go` to
    add the `GET` mapping `/getFromCache`, which will be handled by the `GetFromCache`
    handler defined in a `CacheController`, as follows:'
  id: totrans-139
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE32]'
  id: totrans-140
  prefs: []
  type: TYPE_PRE
  zh: '[PRE32]'
- en: 'Run the program using the following command:'
  id: totrans-141
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE33]'
  id: totrans-142
  prefs: []
  type: TYPE_PRE
  zh: '[PRE33]'
- en: How it works…
  id: totrans-143
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Once the command has executed successfully, the web application will run on
    the default Beego port `8080`.
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
- en: 'On application startup, the key with the name `foo` with the value as `bar`
    will be added to the cache. Next, browsing `http://localhost:8080/getFromCache`
    will read a `foo` key value from the cache, append it to Hello, and display it
    on the browser,as shown in the following screenshot:'
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/35ad2340-26fa-41f7-9b3b-dd7c9c2d5056.png)'
  id: totrans-146
  prefs: []
  type: TYPE_IMG
- en: Monitoring the Beego application
  id: totrans-147
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Once the Beego application is up and running, we can easily monitor application
    request statistics, performance, health checks, tasks, and the configuration status
    through its admin dashboard. We will learn how to do this in this recipe.
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
- en: How to do it…
  id: totrans-149
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Enable the application live monitor by adding `EnableAdmin = true` in `$GOPATH/src/my-first-beego-project/conf/app.conf`,
    as follows:'
  id: totrans-150
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE34]'
  id: totrans-151
  prefs: []
  type: TYPE_PRE
  zh: '[PRE34]'
- en: 'Optionally, change the port it listens on, by adding fields in `$GOPATH/src/my-first-beego-project/conf/app.conf`:'
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE35]'
  id: totrans-153
  prefs: []
  type: TYPE_PRE
  zh: '[PRE35]'
- en: 'Run the program using the following command:'
  id: totrans-154
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE36]'
  id: totrans-155
  prefs: []
  type: TYPE_PRE
  zh: '[PRE36]'
- en: How it works…
  id: totrans-156
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Once the command has executed successfully, the web application will run on
    the default Beego port `8080` and browsing `http://localhost:8088/` will render
    the admin dashboard, as shown in the following screenshot:'
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/c53d95cd-edbc-432a-b968-96b5e9211ce8.png)'
  id: totrans-158
  prefs: []
  type: TYPE_IMG
- en: 'Browsing `http://localhost:8088/qps` will show us the request statistics of
    an application, as shown in the following screenshot:'
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/b9affdd6-bf38-4319-8855-584efdaf1be2.png)'
  id: totrans-160
  prefs: []
  type: TYPE_IMG
- en: Deploying the Beego application on a local machine
  id: totrans-161
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Once the application development is over, we have to deploy it to make it available
    for use by the end users, which can be done either locally or remotely. In this
    recipe, we will learn how we can deploy our Beego application on a local machine.
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
- en: How to do it…
  id: totrans-163
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Because the application created by `bee` is in the development mode by default
    and it’s always a best practice to run an application in the production mode on
    the public facing servers, we have to change the `RunMode` as `prod` in `$GOPATH/src/my-first-beego-project/conf/app.conf`,
    as follows:'
  id: totrans-164
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE37]'
  id: totrans-165
  prefs: []
  type: TYPE_PRE
  zh: '[PRE37]'
- en: 'Include static files, configuration files, and templates as part of the Beego
    application bytecode file in a separate directory by executing the following commands:'
  id: totrans-166
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE38]'
  id: totrans-167
  prefs: []
  type: TYPE_PRE
  zh: '[PRE38]'
- en: 'Move to `$GOPATH/my-first-beego-app-deployment` and use the `nohup` command
    to run an application as a backend process, as follows:'
  id: totrans-168
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE39]'
  id: totrans-169
  prefs: []
  type: TYPE_PRE
  zh: '[PRE39]'
- en: How it works…
  id: totrans-170
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Once the command has executed successfully, the web application will run on
    the default Beego port `8080`, and browsing `http://localhost:8080/` will render
    the welcome page of the application, as shown in the following screenshot:'
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/4d67d510-d668-4788-b5fe-53b2f4d307bb.png)'
  id: totrans-172
  prefs: []
  type: TYPE_IMG
- en: Deploying the Beego application with Nginx
  id: totrans-173
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In the previous recipe, we learned how we can run the Beego application locally.
    In this recipe, we will be deploying the same application with `Nginx`.
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
- en: Getting ready…
  id: totrans-175
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: This recipe assumes you have `Nginx` installed and running on port `80`. For
    me, it's installed at `/Users/ArpitAggarwal/nginx`.
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
- en: How to do it…
  id: totrans-177
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Open the Nginx configuration file at `/Users/ArpitAggarwal/nginx/conf/nginx.conf`
    and replace the `location` block under `server` with the following content:'
  id: totrans-178
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE40]'
  id: totrans-179
  prefs: []
  type: TYPE_PRE
  zh: '[PRE40]'
- en: 'Start Nginx by executing the following command:'
  id: totrans-180
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE41]'
  id: totrans-181
  prefs: []
  type: TYPE_PRE
  zh: '[PRE41]'
- en: 'Run the Beego application by executing the following command:'
  id: totrans-182
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE42]'
  id: totrans-183
  prefs: []
  type: TYPE_PRE
  zh: '[PRE42]'
- en: How it works…
  id: totrans-184
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Once the command has executed successfully, browsing `http://localhost:80/`
    will render the welcome page of the application, as shown in the following screenshot:'
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦命令成功执行，浏览`http://localhost:80/`将呈现应用程序的欢迎页面，如下截图所示：
- en: '![](img/9ca23b43-cd30-4fb7-8c77-33a1e83f9530.png)'
  id: totrans-186
  prefs: []
  type: TYPE_IMG
  zh: '![](img/9ca23b43-cd30-4fb7-8c77-33a1e83f9530.png)'
