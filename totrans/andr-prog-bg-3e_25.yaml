- en: '*Chapter 25*: Building a Simple Image Gallery App'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '`RecyclerView` widget, we can selectively load just the data required for the
    current page and perhaps the data for the previous and next pages.'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
- en: The Android API, as you will have come to expect, has some solutions for achieving
    paging in quite a simple manner.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
- en: 'In this chapter, we will learn how to do the following:'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
- en: Achieve paging and swiping with images as you might find in a photo gallery
    app.
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: First, let's look at a swiping example.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
- en: Technical requirements
  id: totrans-6
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: You can find the code files present in this chapter on GitHub at [https://github.com/PacktPublishing/Android-Programming-for-Beginners-Third-Edition/tree/main/chapter%2025](https://github.com/PacktPublishing/Android-Programming-for-Beginners-Third-Edition/tree/main/chapter%2025).
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
- en: Angry Birds classic swipe menu
  id: totrans-8
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Here we can see the famous Angry Birds level selection menu showing swiping/paging
    in action:'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 25.1 – Angry Birds level selection menu'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
- en: '](img/Figure_25.1_B16773.jpg)'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
- en: Figure 25.1 – Angry Birds level selection menu
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
- en: Let's build a paging app.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
- en: Building an image gallery/slider app
  id: totrans-14
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Create a new project in Android Studio called `Image Pager`. Use the **Empty
    Activity** template and leave all the rest of the settings at their defaults.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
- en: 'The images are in the download bundle in the [*Chapter 25*](B16773_25_ePub_RK.xhtml#_idTextAnchor430)`/Image
    Pager/drawable` folder. This next screenshot shows them in Windows File Explorer:'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 25.2 – Add images'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
- en: '](img/Figure_25.2_B16773.jpg)'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
- en: Figure 25.2 – Add images
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
- en: Add the images to the `drawable` folder in the Project Explorer in Android Studio
    or you could add more interesting images, perhaps some photos you have taken.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
- en: Implementing the layout
  id: totrans-21
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: For a simple image paging app, we use the `PagerAdapter` class. We can think
    of this as being like `RecyclerAdapter` but for images as it will handle the display
    of an array of images in a `ViewPager` widget. This is much like how `RecyclerAdapter`
    handles the display of the contents of an `ArrayList` in a `ListView`. All we
    need to do is override the appropriate methods.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
- en: 'To implement an image gallery with `PagerAdapter`, we first need a `ViewPager`
    widget in our main layout. So you can see precisely what is required, here is
    the actual XML code for `activity_main.xml`. Edit `activity_main.xml` to look
    exactly like this:'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  id: totrans-24
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: The class named `androidx.ViewPager.widget.ViewPager` is the class that makes
    this functionality available in Android versions that were released before `ViewPager`.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
- en: Next, a bit like how we needed a layout to represent a list item, we need a
    layout to represent an item, in this case, an image, in `ViewPager`. Create a
    new layout file in the usual way and call it `pager_item.xml`. Add a single `ImageView`
    with an ID of `imageView`.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
- en: 'Use the visual designer to achieve this or copy the following XML into `pager_item.xml`:'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  id: totrans-28
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: Now we can make a start on our `PagerAdapter` class.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
- en: Coding the PagerAdapter class
  id: totrans-30
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Next, we need to extend `PagerAdapter` to handle images. Create a new class
    called `ImagePagerAdapter` and make it extend `PagerAdapter`.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
- en: Add the following imports to the top of the `ImagePagerAdapter` class. We often
    rely on using the *Alt* + *Enter* shortcut to add imports. We are doing things
    slightly differently this time because there are some very similarly named classes
    that will not suit our objectives.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
- en: 'Add the following imports to the `ImagePagerAdapter` class:'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  id: totrans-34
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: Here is the class declaration with the `extends...` code added as well as a
    couple of member variables. These variables are a `Context` object that we will
    use shortly and an `int` array called `images`. The reason for having an `int`
    array for images is that we will store `int` identifiers for each of the images.
    We'll see how this works in a few code blocks time. The last member variable is
    a `LayoutInflater` instance, which you can probably guess will be used to inflate
    each of the instances of `pager_item.xml`.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
- en: 'Extend the `PagerAdapter` class and add the member variables we have just discussed:'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  id: totrans-37
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: Now we need a constructor that sets up `ImagerPagerAdapter` by receiving the
    `Context` from the `MainActivity` class as well as the `int` array for the images
    and initializing the member variables with them.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
- en: 'Add the constructor method to the `ImagePagerAdapter` class:'
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  id: totrans-40
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'Now we must override the required methods of `PagerAdapter`. Immediately after
    the previous code, add the overridden `getCount` method, which simply returns
    the number of image IDs in the array. This method is used internally by the class:'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE5]'
  id: totrans-42
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'Now we must override the `isViewFromObject` method, which returns a Boolean
    depending upon whether the current `View` instance is the same or associated with
    the current `Object` as passed in as a parameter. Again, this is a method that
    is used internally by the class. Immediately after the previous code, add this
    `Override` method:'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE6]'
  id: totrans-44
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: Now we must override the `instantiateItem` method; this is where we get most
    of the work that concerns us done. First, we declare a new `ImageView` object,
    and then we initialize our `LayoutInflater` member. Next, we use the `LayoutInflater`
    instance to declare and initialize a new `View` instance from our `pager_item.xml`
    layout file.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
- en: After this, we get a reference to the `ImageView` widget inside the `pager_item.xml`
    layout. We can now add the appropriate image as the content of the `ImageView`
    widget based on the `position` parameter of the `instantiateItem` method and the
    appropriate ID integer from the `images` array.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
- en: Finally, we add the layout to the `PagerAdapter` instance with the `addView`
    method and return from the method.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
- en: 'Add the method we have just discussed:'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE7]'
  id: totrans-49
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: The last method we must override is the `destroyItem` method, which the class
    can call when it needs to remove an appropriate item based on the value of the
    `position` parameter.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
- en: 'Add the `destroyItem` method after the previous code and before the closing
    curly brace of the `ImagePagerAdapter` class:'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE8]'
  id: totrans-52
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: As we saw when coding the `ImagePagerAdapter` class, there is very little to
    it. It is just a case of properly implementing the overridden methods that the
    `ImagePagerAdapter` class uses to help make things work smoothly behind the scenes.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
- en: Now we can code the `MainActivity` class, which will use our `ImagePagerAdapter`
    implementation.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
- en: Coding the MainActivity class
  id: totrans-55
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Finally, we can code our `MainActivity` class. As with the `ImagePagerAdapter`
    class, for clarity, add the following `import` statements manually to the `MainActivity.java`
    class before the class declaration as shown next:'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE9]'
  id: totrans-57
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: We need a few member variables. Unsurprisingly, we need a `ViewPager` instance,
    which will be used to hold a reference to the `ViewPager` in our layout. Also,
    we need an `ImagePagerAdapter` reference for the class we have just coded. We
    also need an `int` array to hold an array of image IDs.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
- en: 'Adapt the `MainActivity` class to be as follows:'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE10]'
  id: totrans-60
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: All the rest of the code goes in the `onCreate` method. We initialize our `int`
    array with each of the images that we added to the `drawable-xhdpi` folder.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
- en: We initialize the `ViewPager` in the usual way with the `findViewById` method.
    We also initialize our `ImagePagerAdapter` instance by passing in a reference
    of the `MainActivity` class and the `images` array, as required by the constructor
    that we coded previously. Finally, we bind the adapter to the pager with the `setAdapter`
    method.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
- en: 'Code the `onCreate` method to look just like this next code:'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE11]'
  id: totrans-64
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: Now we are ready to run the app.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
- en: Running the gallery app
  id: totrans-66
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Here we can see the first image from our `int` array:'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 25.3 – First image'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
- en: '](img/Figure_25.3_B16773.jpg)'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
- en: Figure 25.3 – First image
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
- en: 'Swipe a little right and left to see the smooth, pleasing way the images transition:'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 25.4 – Swipe to view images'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
- en: '](img/Figure_25.4_B16773.jpg)'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
- en: Figure 25.4 – Swipe to view images
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
- en: That's it for this chapter. Let's review what we have done.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
- en: Summary
  id: totrans-76
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In this chapter, we saw how we can use pagers for simple image galleries with
    just a few lines of code and some very simple layouts. We achieved this so easily
    because of the `ImagePagerAdapter` class.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们看到了如何使用分页器来创建简单的图库，只需几行代码和一些非常简单的布局。我们之所以能够如此轻松地实现这一点，是因为有了`ImagePagerAdapter`类。
- en: In the next chapter, we will look at another really cool UI element that is
    used in many of the latest Android apps, probably because it looks great and is
    a real pleasure, as well as extremely practical, to use. The `NavigationView`
    layout will enable us to design and implement different layouts with entirely
    different behavior (code). Let's take a look at the `NavigationView` layout.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，我们将看到另一个非常酷的UI元素，它在许多最新的Android应用程序中使用，可能是因为它看起来很棒，而且非常实用，使用起来非常愉快。`NavigationView`布局将使我们能够设计和实现具有完全不同行为（代码）的不同布局。让我们来看看`NavigationView`布局。
