- en: Archiving and Compressing Files
  prefs: []
  type: TYPE_NORMAL
- en: In this chapter, you will learn how to put a group of files together into a
    single archive. You will also learn how to compress an archive file using various
    compression methods.
  prefs: []
  type: TYPE_NORMAL
- en: Creating an archive
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Let''s create a backup for all the bash scripts in the `/home/elliot` directory.
    As the `root` user, create a directory named `backup` in `/root`:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: 'To create an archive, we use the tape archive command `tar`. The general syntax
    to create an archive is as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: The `-c` option is the shorthand notation of `--create`, which creates the archive.
    The `-f` option is the shorthand notation of `--file`, which specifies the archive
    name.
  prefs: []
  type: TYPE_NORMAL
- en: 'Now let''s create an archive named `scripts.tar` in `/root/backup` for all
    the bash scripts in `/home/elliot`. To do that, we first change to the `/home/elliot`
    directory:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: 'Then we run the command:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: 'This will create the archive file `scripts.tar` in `/root/backup`, and there
    will be no command output:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs: []
  type: TYPE_PRE
- en: 'We could have also added the verbose option `-v` to see the files that are
    being archived:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE5]'
  prefs: []
  type: TYPE_PRE
- en: Viewing archive contents
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'You may want to see the contents of an archive. To do that, you can use the
    `-t` option along with the `-f` option followed by the archive you wish to view:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE6]'
  prefs: []
  type: TYPE_PRE
- en: 'For example, to view the contents of the archive `scripts.tar` that we just
    created, you can run the command:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE7]'
  prefs: []
  type: TYPE_PRE
- en: As you can see, it listed all the files in the `scripts.tar` archive.
  prefs: []
  type: TYPE_NORMAL
- en: Extracting archive files
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'You may also want to extract files from an archive. To demonstrate, let''s
    create a directory named `myscripts` in `/root`:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE8]'
  prefs: []
  type: TYPE_PRE
- en: 'To extract files from an archive, we use the `-x` option along with the `-f`
    option, followed by the archive name. Then, we use the `-C` option followed by
    the destination directory as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE9]'
  prefs: []
  type: TYPE_PRE
- en: 'So to extract all the files in the `scripts.tar` archive to the `/root/myscripts`
    directory, you can run the following command:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE10]'
  prefs: []
  type: TYPE_PRE
- en: The `-x` option is the shorthand notation of `--extract`, which extracts the
    files from the archive. We also used the `-C` option, which basically changes
    to the `/root/myscripts` directory before carrying out any operation, and thus
    the files are extracted to `/root/myscripts` instead of the current directory.
  prefs: []
  type: TYPE_NORMAL
- en: 'Now let''s verify that the files were indeed extracted to the `/root/myscripts`
    directory:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE11]'
  prefs: []
  type: TYPE_PRE
- en: And sure enough, we see all our bash scripts in the `/root/myscripts` directory!
  prefs: []
  type: TYPE_NORMAL
- en: Compressing with gzip
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Grouping files in an archive doesn't save disk space on its own. We would need
    to compress an archive to save disk space. Numerous compression methods are available
    for us to use on Linux. However, we are only going to cover the three most popular
    compression methods.
  prefs: []
  type: TYPE_NORMAL
- en: 'The most popular compression method on Linux is arguably `gzip`, and the upside
    is that it''s really fast. You can compress an archive file with `gzip` by using
    the `-z` option with the `tar` command as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE12]'
  prefs: []
  type: TYPE_PRE
- en: 'So to compress the `scripts.tar` archive into a `gzip`-compressed archive named
    `scripts.tar.gz`, you first need to change to the `/root/backup` directory and
    then run the following command:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE13]'
  prefs: []
  type: TYPE_PRE
- en: 'Now if you list the contents of the `backup` directory, you will see the newly
    created `gzip`-compressed archive `scripts.tar.gz`:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE14]'
  prefs: []
  type: TYPE_PRE
- en: 'The magic happened by using the `-z` option, which compressed the archive with
    the `gzip` compression method. And that''s it! Notice how it''s very similar to
    creating an archive: we just added the `-z` option – that''s the only difference.'
  prefs: []
  type: TYPE_NORMAL
- en: 'Now let''s run the `file` command on both archives:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE15]'
  prefs: []
  type: TYPE_PRE
- en: 'As you can see, the `file` command detects the type of both archives. Now let’s
    compare the size (in bytes) of both archives:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE16]'
  prefs: []
  type: TYPE_PRE
- en: 'The compressed archive `scripts.tar.gz` is way smaller in size as we expected
    compared to the uncompressed archive `scripts.tar`. If you want to extract the
    files in the compressed archive `scripts.tar.gz` to `/root/myscripts`, you can
    run:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE17]'
  prefs: []
  type: TYPE_PRE
- en: Notice it is exactly the same as the way that you would extract the contents
    of an uncompressed archive.
  prefs: []
  type: TYPE_NORMAL
- en: Compressing with bzip2
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '`bzip2` is another popular compression method used on Linux. On average, `bzip2` is
    slower than `gzip`; however, `bzip2` does a better job of compressing files to
    smaller sizes.'
  prefs: []
  type: TYPE_NORMAL
- en: 'You can compress an archive with `bzip2` compression by using the `-j` option
    with the `tar` command as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE18]'
  prefs: []
  type: TYPE_PRE
- en: Notice the only difference here is that we use the `-j` option for `bzip2` compression
    instead of `-z` for `gzip` compression.
  prefs: []
  type: TYPE_NORMAL
- en: 'So to compress the `scripts.tar` archive into a `bzip2`-compressed archive
    named `scripts.tar.bz2`, you first need to change to the  `/root/backup`directory
    and then run the following command:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE19]'
  prefs: []
  type: TYPE_PRE
- en: 'Now if you list the contents of the `backup` directory, you will see the newly
    created `bzip2`-compressed archive `scripts.tar.bz2`:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE20]'
  prefs: []
  type: TYPE_PRE
- en: 'Let''s run the `file` command on the `bzip2`-compressed archive `scripts.tar.bz2`:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE21]'
  prefs: []
  type: TYPE_PRE
- en: 'It correctly detects the type of compression method used for the archive `scripts.tar.bz2`.
    Awesome – now let''s compare the size (in bytes) of the `gzip`-compressed archive
    `scripts.tar.gz` and the `bzip2`-compressed archive `scripts.tar.bz2`:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE22]'
  prefs: []
  type: TYPE_PRE
- en: 'Notice that the `bzip2`-compressed archive `scripts.tar.bz2` is smaller than
    the `gzip`-compressed archive `scripts.tar.gz`. If you want to extract the files
    in the compressed archive `scripts.tar.bz2` to `/root/myscripts`, you can run:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE23]'
  prefs: []
  type: TYPE_PRE
- en: Notice it is exactly the same as the way that you would extract the contents
    of a `gzip`-compressed archive.
  prefs: []
  type: TYPE_NORMAL
- en: Compressing with xz
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: The `xz` compression method is yet another popular compression method used on
    Linux. On average, `xz` compression does the best job out of all three compression
    methods in reducing (compressing) the file sizes.
  prefs: []
  type: TYPE_NORMAL
- en: 'You can compress an archive with `xz` compression by using the `-J` option
    with the `tar` command as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE24]'
  prefs: []
  type: TYPE_PRE
- en: 'Notice here we use the uppercase letter `J` with `xz` compression. So to compress
    the `scripts.tar` archive into an `xz`-compressed archive named `scripts.tar.xz`,
    you first need to change to the `/root/backup` directory and then run the following
    command:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE25]'
  prefs: []
  type: TYPE_PRE
- en: 'Now if you list the contents of the `backup` directory, you will see the newly
    created `xz`-compressed archive `scripts.tar.xz`:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE26]'
  prefs: []
  type: TYPE_PRE
- en: 'Let''s run the file command on the `xz`-compressed archive `scripts.tar.xz`:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE27]'
  prefs: []
  type: TYPE_PRE
- en: It correctly detects the type of compression method used for the archive `scripts.tar.xz`.
  prefs: []
  type: TYPE_NORMAL
- en: Measuring performance
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'You can use the `time` command to measure the time it takes a command (or a
    program) to finish executing. The general syntax for the `time` command is as
    follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE28]'
  prefs: []
  type: TYPE_PRE
- en: 'For example, to measure how long it takes for the `date` command to finish
    executing, you can run the following command:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE29]'
  prefs: []
  type: TYPE_PRE
- en: It just took four milliseconds to run the `date` command on my system; this
    is quite fast!
  prefs: []
  type: TYPE_NORMAL
- en: 'The `gzip` compression method is the fastest of all three compression methods;
    well, let''s see if I am lying or telling the truth! Change to the `/root/backup`
    directory:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE30]'
  prefs: []
  type: TYPE_PRE
- en: 'Now let''s see how long it takes to create a `gzip`-compressed archive file
    for all the files in `/boot`:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE31]'
  prefs: []
  type: TYPE_PRE
- en: 'On my system, it took `gzip` 4.717 seconds to run! Now let''s measure the time
    it takes to create a `bzip2`-compressed archive of the same directory `/boot`:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE32]'
  prefs: []
  type: TYPE_PRE
- en: 'It took `bzip2` an enormous `19.306` seconds to run! You can see how `gzip`
    compression is much faster than `bzip2`. Now let''s see the time it takes to create
    an `xz`-compressed archive of the same directory `/boot`:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE33]'
  prefs: []
  type: TYPE_PRE
- en: It almost took `xz` a full minute! We can conclude that `gzip` is definitely
    the fastest of all three compression methods we have discussed.
  prefs: []
  type: TYPE_NORMAL
- en: 'Finally, let''s check the size (in bytes) of the three compressed archives:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE34]'
  prefs: []
  type: TYPE_PRE
- en: As you can see, `xz` did the best job of compressing the files. `bzip2` claimed
    second place, and `gzip` came in last.
  prefs: []
  type: TYPE_NORMAL
- en: Knowledge check
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'For the following exercises, open up your Terminal and try to solve the following
    tasks:'
  prefs: []
  type: TYPE_NORMAL
- en: Create a `gzip` archive named `var.tar.gz` in `/root` for all the files in `/var`.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Create a `bzip2` archive named `tmp.tar.bz2` in `/root` for all the files in
    `/tmp`.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Create an `xz` archive named `etc.tar.xz` in `/root` for all the files in `/etc`.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
