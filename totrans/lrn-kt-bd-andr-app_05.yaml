- en: Type Checks and Null Safety
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: As mentioned in [Chapter 1](3223f31b-0cc1-4b69-96ed-a626f77315bf.xhtml)*, Setting
    Up for Android Development*, one of the great features that Kotlin brings to the
    table is **Null safety**. In this chapter, we will learn about what makes Kotlin
    a null-safe language and how we can take full advantage of it.
  prefs: []
  type: TYPE_NORMAL
- en: 'By the end of this chapter, we will have learned about:'
  prefs: []
  type: TYPE_NORMAL
- en: Non-nullable and nullable types
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The safe call operator
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The Elvis operator
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The `!!` operator
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The safe and unsafe cast operators
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Null safety
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: One of the most common pain points developers have with Java and a number of
    other languages has to do with accessing a member of a null reference. In most
    languages, this results in a null reference exception at runtime. Most Java developers
    know this as the `NullPointerException`.
  prefs: []
  type: TYPE_NORMAL
- en: 'Kotlin is designed to eliminate the possibility of running into null reference,
    exceptions as much as possible. As stated in [Chapter 1](3223f31b-0cc1-4b69-96ed-a626f77315bf.xhtml), *Setting
    Up for Android Development*, there are only four possible reasons why you could
    run into a `NullPointerException` in Kotlin:'
  prefs: []
  type: TYPE_NORMAL
- en: An external Java code
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: An explicit call to throw `NullPointerException`
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Usage of the `!!` operator (we'll learn more about this operator later)
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Data inconsistency regarding initialization
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: So how does Kotlin ensure this?
  prefs: []
  type: TYPE_NORMAL
- en: Nullable and non-nullable types
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: A **nullable type** is a reference that is allowed to hold a `null` value while
    a non-nullable type is a reference that cannot hold a `null` value.
  prefs: []
  type: TYPE_NORMAL
- en: 'Kotlin''s type system is designed to distinguish between these two types of
    references. Nullable types are declared by appending a `?` at the end of the type. For
    example:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: 'There are a number of things to take note of in the previous code:'
  prefs: []
  type: TYPE_NORMAL
- en: '`name` cannot be assigned a `null` value because it is a non-nullable type'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`gender`, on the other hand, can be assigned a `null` value because it is declared
    as a nullable type'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Accessing a member method or property of `gender` cannot be done in the same
    way as accessing one of the `name` member methods or properties
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'There are a number of ways to access a method or property of a nullable type.
    You can check for `null` and access the method or property in the condition. For
    example:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: 'The compiler keeps track of the results of the `null` check and therefore allows
    the call to `length` with the body of the `if` condition. This is an example of
    a **smart cast**:'
  prefs: []
  type: TYPE_NORMAL
- en: Using the safe call operator (`?.`)
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Using the Elvis operator (`?:`)
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Using the `!!` operator
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Performing a smart cast
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Smart cast is a smart feature in Kotlin where the compiler tracks the results
    in an `if` statement and performs casts automatically when needed.
  prefs: []
  type: TYPE_NORMAL
- en: Safe call operator
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Another way of accessing a method or property of a nullable type is by using
    the safe call operator:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: In the preceding code, if the gender is not `null`, the value of `len` will
    be the result of `gender.length`. Otherwise, the value of `len` will be `null`.
  prefs: []
  type: TYPE_NORMAL
- en: Using the safe call operator is great if you don't need to perform any actions
    when `gender` is `null`. What if we want to assign `len` a different value when
    `gender` is `null`? We can combine the safe call operator with the **Elvis operator**
    for that.
  prefs: []
  type: TYPE_NORMAL
- en: The Elvis operator
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'The Elvis operator is similar to the ternary `if` operator in Java. It''s a
    way of simplifying an `if-else` statement. For example:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: 'The code can be simplified to:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs: []
  type: TYPE_PRE
- en: In the previous code, the value of `len` will be `0` if `gender?.length` evaluates to
    `null`.
  prefs: []
  type: TYPE_NORMAL
- en: The !! operator
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'What if we don''t care about running into a null pointer exception? Then we
    can make use of the `!!` operator. For example:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE5]'
  prefs: []
  type: TYPE_PRE
- en: This will result in a null pointer exception if `gender` is `null`.
  prefs: []
  type: TYPE_NORMAL
- en: Only use the `!!` operator if you're either certain of the value of the variable
    or you don't care about running into a null pointer exception.
  prefs: []
  type: TYPE_NORMAL
- en: Type checks
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Just like in Java, you can confirm the type of a variable. In Kotlin, this
    is done using the `is` operator. For example:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE6]'
  prefs: []
  type: TYPE_PRE
- en: Just as with the `null` check from earlier, the compiler keeps track of the
    results of the type check and automatically casts `gender` to a `String`, therefore
    allowing the call to `gender.length`. This is called a smart cast.
  prefs: []
  type: TYPE_NORMAL
- en: Cast operator
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'To cast a variable to another type, you have to use the cast operator (`as`):'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE7]'
  prefs: []
  type: TYPE_PRE
- en: 'The cast operator will throw an error if the variable you''re trying to cast
    is not of the type you''re trying to cast it to. To prevent this, you can make
    use of the **safe cast operator **(`as?`):'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE8]'
  prefs: []
  type: TYPE_PRE
- en: The safe cast operator does not throw an error but returns a `null` if the cast
    is not possible.
  prefs: []
  type: TYPE_NORMAL
- en: Summary
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In this chapter, we learned about the different ways Kotlin helps make your
    code null safe. There are different operators used in Kotlin to achieve this and
    we covered how to use them.
  prefs: []
  type: TYPE_NORMAL
- en: In the next chapter, we will complete work on our TicTacToe game while learning
    about functions and lambdas in Kotlin.
  prefs: []
  type: TYPE_NORMAL
