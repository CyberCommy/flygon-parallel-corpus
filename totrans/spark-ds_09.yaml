- en: Chapter 9. Visualizing Big Data
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Proper data visualization has solved many business problems in the past without
    much statistics or machine learning being involved. Even today, with so many technological
    advancements, applied statistics, and machine learning, proper visuals are the
    end deliverables for business users to consume information or the output of some
    analyses. Conveying the right information in the right format is something that
    data scientists yearn for, and an effective visual is worth a million words. Also,
    representing the models and the insights generated in a way that is easily consumable
    by the business is extremely important. Nonetheless, exploring big data visually
    is very cumbersome and challenging. Since Spark is designed for big data processing,
    it also supports big data visualization along with it. There are many tools and
    techniques that have been built on Spark for this purpose.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
- en: The previous chapters outlined how to model structured and unstructured data
    and generate insights from it. In this chapter, we will look at data visualization
    from two broad perspectives-one is from a data scientist's perspective—where visualization
    is the basic need to explore and understand the data effectively, and the other
    is from a business user's perspective, where the visuals are end deliverables
    to the business and must be easily comprehendible. We will explore various data
    visualization tools such as *IPythonNotebook* and *Zeppelin* that can be used
    on Apache Spark.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
- en: 'As a prerequisite for this chapter, a basic understanding of SQL and programming
    in Python, Scala, or other such frameworks, is nice to have. The topics covered
    in this chapter are listed as follows:'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
- en: Why visualize data?
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: A data engineer's perspective
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: A data scientist's perspective
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: A business user's perspective
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Data visualization tools
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: IPython notebook
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Apache Zeppelin
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Third-party tools
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Data visualization techniques
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Summarizing and visualizing
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Subsetting and visualizing
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Sampling and visualizing
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Modeling and visualizing
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Why visualize data?
  id: totrans-17
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Data visualization deals with representing data in a visual form so as to enable
    people to understand the underlying patterns and trends. Geographical maps, the
    bar and line charts of the seventeenth century, are some examples of early data
    visualizations. Excel is perhaps a familiar data visualization tool that most
    of us have already used. All data analytics tools have been equipped with sophisticated,
    interactive data visualization dashboards. However, the recent surge in big data,
    streaming, and real-time analytics has been pushing the boundaries of these tools
    and they seem to be bursting at the seams. The idea is to make the visualizations
    look simple, accurate, and relevant while hiding away all the complexity. As per
    the business needs, any visualization solution should ideally have the following
    characteristics:'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
- en: Interactivity
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Reproducibility
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Control over the details
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Apart from these, if the solution allows users to collaborate over the visuals
    or reports and share with each other, then that would make up an end-to-end visualization
    solution.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
- en: Big data visualization in particular poses its own challenges because we may
    end up with more data than pixels on the screen. Manipulating large data usually
    requires memory- and CPU-intensive processing and may have long latency. Add real-time
    or streaming data to the mix and the problem becomes even more challenging. Apache
    Spark is designed from the ground up just to tackle this latency by parallelizing
    CPU and memory usage. Before exploring the tools and techniques to visualize and
    work with big data, let's first understand the visualization needs of data engineers,
    data scientists, and business users.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
- en: A data engineer's perspective
  id: totrans-24
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Data engineers play a crucial role in almost every data-driven requirement:
    sourcing data from different data sources, consolidating them, cleaning and preprocessing
    them, analyzing them, and then the final reporting with visuals and dashboards.
    Their activities can be broadly stated as follows:'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
- en: Visualize the data from different sources to be able to integrate and consolidate
    it to form a single data matrix
  id: totrans-26
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Visualize and find various anomalies in the data, such as missing values, outliers
    and so on (this could be while scraping, sourcing, ETLing, and so on) and get
    those fixed
  id: totrans-27
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Advise the data scientists on the properties and characteristics of the dataset
  id: totrans-28
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Explore various possible ways of visualizing the data and finalize the ones
    that are more informative and intuitive as per the business requirement
  id: totrans-29
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Observe here that the data engineers not only play a key role in sourcing and
    preparing the data, but also take a call on the most suitable visualization outputs
    for the business users. They usually work very closely to the business as well
    to have a very clear understanding on the business requirement and the specific
    problem at hand.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
- en: A data scientist's perspective
  id: totrans-31
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: A data scientist's need for visualizing data is different from that of data
    engineers. Please note that in some businesses, there are professionals who play
    a dual role of data engineers and data scientists.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
- en: 'Data scientists need to visualize data to be able to take the right decisions
    in performing statistical analysis and ensure proper execution of the analytics
    projects. They would like to slice and dice data in various possible ways to find
    hidden insights. Let''s take a look at some example requirements that a data scientist
    might have to visualize the data:'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
- en: See the data distribution of the individual variables
  id: totrans-34
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Visualize outliers in the data
  id: totrans-35
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Visualize the percentage of missing data in a dataset for all variables
  id: totrans-36
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Plot the correlation matrix to find the correlated variables
  id: totrans-37
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Plot the behavior of residuals after a regression
  id: totrans-38
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: After a data cleaning or transformation activity, plot the variable again and
    see how it behaves
  id: totrans-39
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Please note that some of the things just mentioned are quite similar to the
    case of data engineers. However, data scientists could have a more scientific/statistical
    intention behind such analyses. For example, data scientists may see an outlier
    from a different perspective and treat it statistically, but a data engineer might
    think of the various options that could have triggered this.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
- en: A business user's perspective
  id: totrans-41
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'A business user''s perspective is completely different from that of data engineers
    or data scientists. Business users are usually the consumers of information! They
    would like to extract more and more information from the data, and for that, the
    correct visuals play a key role. Also, most business questions are more complex
    and causal these days. The old-school reports are no longer enough. Let''s look
    at some example queries that business users would like to extract from reports,
    visuals, and dashboards:'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
- en: Who are the high-value customers in so-and-so region?
  id: totrans-43
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: What are the common characteristics of these customers?
  id: totrans-44
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Predict whether a new customer would be high-value
  id: totrans-45
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Advertising in which media would give maximum ROI?
  id: totrans-46
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: What if I do not advertise in a newspaper?
  id: totrans-47
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: What are the factors influencing a customer's buying behavior?
  id: totrans-48
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Data visualization tools
  id: totrans-49
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Out of the many different visualization options, choosing the right visual depends
    on specific requirements. Similarly, selecting a visualization tool depends on
    both the target audience and the business requirement.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
- en: Data scientists or data engineers would prefer a more interactive console for
    quick and dirty analysis. The visuals they use are usually not intended for business
    users. They would like to dissect the data in every possible way to get more meaningful
    insights. So, they usually prefer a notebook-type interface that supports these
    activities. A notebook is an interactive computational environment where they
    can combine code chunks and plot data for explorations. There are notebooks such
    as **IPython**/**Jupyter** or **DataBricks**, to name a few available options.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
- en: Business users would prefer a more intuitive and informative visual that they
    can share with each other or use to generate reports. They expect to receive the
    end result through visuals. There are hundreds and thousands of tools, including
    some popular ones such as **Tableau**, that businesses use; but quite often, developers
    have to custom-build specific types for some unique requirements and expose them
    through web applications. Microsoft's **PowerBI** and open source solutions such
    as **Zeppelin** are a few examples.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
- en: IPython notebook
  id: totrans-53
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The IPython/Jupyter notebook on top of Spark's **PySpark** API is an excellent
    combination for data scientists to explore and visualize the data. The notebook
    internally spins up a new instance of the PySpark kernel. There are other kernels
    available; for example, the Apache **Toree** kernel can be used to support Scala
    as well.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
- en: For many data scientists, it is the default choice because of its capability
    of integrating text, code, formula, and graphics in one JSON document file. The
    IPython notebook supports `matplotlib`, which is a 2D visualization library that
    can produce production-quality visuals. Generating plots, histograms, scatterplots,
    charts, and so on becomes easy and simple. It also supports the `seaborn` library,
    which is actually built upon matplotlib but is easy to use as it provides higher
    level abstraction and hides the underlying complexities.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
- en: Apache Zeppelin
  id: totrans-56
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Apache Zeppelin is built upon JVM and integrates well with Apache Spark. It
    is a browser-based or frontend-based open source tool that has its own notebook.
    It supports Scala, Python, R, SQL, and other graphical modules to serve as a visualization
    solution not only to business users but also to data scientists. In the following
    section on visualization techniques, we will take a look at how Zeppelin supports
    Apache Spark code to generate interesting visuals. You need to download Zeppelin
    ([https://zeppelin.apache.org/](https://zeppelin.apache.org/)) in order to try
    out the examples.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
- en: Third-party tools
  id: totrans-58
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: There are many products that support Apache Spark as the underlying data processing
    engine and are built to fit in the organizational big data ecosystem. While leveraging
    the processing power of Spark, they provide the visualization interface that supports
    a variety of interactive visuals, and they also support collaboration. Tableau
    is one such example of a tool that leverages Spark.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
- en: Data visualization techniques
  id: totrans-60
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Data visualization is at the center of every stage in the data analytics life
    cycle. It is especially important for exploratory analysis and for communicating
    results. In either case, the goal is to transform data into a format that's efficient
    for human consumption. The approach of delegating the transformation to client-side
    libraries does not scale to large datasets. The transformation has to happen on
    the server side, sending only the relevant data to the client for rendering. Most
    of the common transformations are available in Apache Spark out of the box. Let's
    have a closer look at these transformations.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
- en: Summarizing and visualizing
  id: totrans-62
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '**Summarizing and visualizing** is a technique used by many **Business Intelligence**
    (**BI**) tools. Since summarization will be a concise dataset regardless of the
    size of the underlying dataset, the graphs look simple enough and easy to render.
    There are various ways to summarize the data such as aggregating, pivoting, and
    so on. If the rendering tool supports interactivity and has drill-down capabilities,
    the user gets to explore subsets of interest from the complete data. We will show
    how to do the summarization rapidly and interactively with Spark through the Zeppelin
    notebook.'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
- en: The following image shows the Zeppelin notebook with source code and a grouped
    bar chart. The dataset contains 24 observations with sales information of two
    products, **P1** and **P2**, for 12 months. The first cell contains code to read
    a text file and register data as a temporary table. This cell uses the default
    Spark interpreter using Scala. The second cell uses the SQL interpreter which
    is supported by out-of-the-box visualization options. You can switch the chart
    types by clicking on the right icon. Note that the visualization is similar for
    either Scala or Python or R interpreters.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
- en: 'Summarization examples are as follows:'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
- en: 'The source code to read data and register as a SQL View:'
  id: totrans-66
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '**Scala (default)**:'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
- en: '![Summarizing and visualizing](img/image_09_001.jpg)'
  id: totrans-68
  prefs: []
  type: TYPE_IMG
- en: '**PySpark**:'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
- en: '![Summarizing and visualizing](img/image_09_002.jpg)'
  id: totrans-70
  prefs: []
  type: TYPE_IMG
- en: '**R**:'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
- en: '![Summarizing and visualizing](img/image_09_003.jpg)'
  id: totrans-72
  prefs: []
  type: TYPE_IMG
- en: All three are reading the data file and registering as a temporary SQL view.
    Note that minor differences exist in the preceding three scripts. For example,
    we need to remove the header row for R and set the column names. The next step
    is to produce the visualization, which works from the `%sql` interpreter. The
    following first picture shows the script to produce the quarterly sales for each
    product. It also shows the chart types available out of the box, followed by the
    settings and their selection. You can collapse the settings after making selections.
    You can even make use of Zeppelin's in-built dynamic forms, say to accept a product
    during runtime. The second picture shows the actual output.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
- en: The script to produce quarterly sales for two products:![Summarizing and visualizing](img/image_09_004.jpg)
  id: totrans-74
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The output produced:![Summarizing and visualizing](img/image_09_005.jpg)
  id: totrans-75
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: We have seen Zeppelin's inbuilt visualization in the preceding example. But
    we can use other plotting libraries as well. Our next example utilizes the PySpark
    interpreter with matplotlib in Zeppelin to draw a histogram. This example code
    computes bin intervals and bin counts using RDD's histogram function and brings
    in just this summarized data to the driver node. Frequency is provided as weights
    while plotting the bins to give the same visual understanding as a normal histogram
    but with very low data transfer.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
- en: 'The histogram examples are as follows:'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
- en: '![Summarizing and visualizing](img/image_09_006.jpg)'
  id: totrans-78
  prefs: []
  type: TYPE_IMG
- en: 'This is the generated output (it may come as a separate window):'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
- en: '![Summarizing and visualizing](img/image_09_007.jpg)'
  id: totrans-80
  prefs: []
  type: TYPE_IMG
- en: In the preceding example of preparing histograms, note that the bucket counts
    could be parameterized using the inbuilt dynamic forms support.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
- en: Subsetting and visualizing
  id: totrans-82
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Sometimes, we may have a large dataset but we may be interested only in a subset
    of it. Divide and conquer is one approach where we explore a small portion of
    data at a time. Spark allows data subsetting using SQL-like filters and aggregates
    on row-column datasets as well as graph data. Let us perform SQL subsetting first,
    followed by a GraphX example.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
- en: The following example takes bank data available with Zeppelin and extracts a
    few relevant columns of data related to managers only. It uses the `google visualization
    library` to plot a bubble chart. The data was read using PySpark. Data subsetting
    and visualization are carried out using R. Note that we can choose any of the
    interpreters to these tasks and the choice here was just arbitrary.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
- en: 'The data subsetting example using SQL is as follows:'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
- en: Read data and register the SQL view:![Subsetting and visualizing](img/image_09_008.jpg)
  id: totrans-86
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Subset managers' data and show a bubble plot:![Subsetting and visualizing](img/image_09_009.jpg)
  id: totrans-87
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'The next example demonstrates some GraphX processing that uses data provided
    by the **Stanford Network Analysis Project** (**SNAP**). The script extracts a
    subgraph covering a given set of nodes. Here, each node represents a Facebook
    ID and an edge represents a connection between the two nodes (or people). Further,
    the script identifies direct connections for a given node (id: 144). These are
    the level 1 nodes. Then it identifies the direct connections to these *level 1
    nodes*, which form *level 2 nodes* to the given node. Even though a second-level
    contact may be connected to more than one first-level contact, it is shown only
    once thereby forming a connection tree without crisscrossing edges. Since the
    connection tree may have too many nodes, the script limits up to three connections
    at level 1 as well as level 2, thereby showing only 12 nodes under the given root
    node (one root + three level 1 nodes + three of each level 2 nodes).'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
- en: '**Scala**'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  id: totrans-90
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: Note
  id: totrans-91
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Note the use of `z.put` and `z.get`. This is a mechanism to exchange data between
    cells/interpreters in Zeppelin.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
- en: Now that we have created a data frame with level 1 contacts and their direct
    contacts, we are all set to draw the tree. The following script uses the graph
    visualization library igraph and Spark R.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
- en: 'Extract nodes and edges. Plot the tree:'
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
- en: '![Subsetting and visualizing](img/image_09_010.jpg)'
  id: totrans-95
  prefs: []
  type: TYPE_IMG
- en: 'The preceding script gets parent nodes from the nodes table, which are the
    parents of level 2 nodes as well as direct connections to the given head node.
    Ordered pairs of head nodes and level 1 nodes are created and assigned to `edges1`.
    The next step explodes the array of level 2 nodes to form one row per each array
    element. The data frame thus obtained is transposed and pasted to form edge pairs.
    Since paste converts data into strings, they are reconverted to numeric. These
    are the level 2 edges. The level 1 and level 2 edges are concatenated to form
    a single list of edges. These are fed to form the graph as shown next. Note that
    the smudge in `headNode` is 144, though not visible in the following figure:'
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
- en: '![Subsetting and visualizing](img/image_09_011.jpg)'
  id: totrans-97
  prefs: []
  type: TYPE_IMG
- en: Connection tree for the given node
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
- en: Sampling and visualizing
  id: totrans-99
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Sampling and visualizing has been used by statisticians for a long time. Through
    sampling techniques, we take a portion of the dataset and work on it. We will
    show how Spark supports different sampling techniques such as **random sampling**,
    **stratified sampling**, and **sampleByKey**, and so on. The following example
    is created using the Jupyter notebook, PySpark kernel, and `seaborn` library.
    The data file is the bank dataset provided by Zeppelin. The first plot shows the
    balance for each education category. The colors indicate marital status.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
- en: 'Read data and take a random sample of 5%:'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
- en: '![Sampling and visualizing](img/image_09_012.jpg)'
  id: totrans-102
  prefs: []
  type: TYPE_IMG
- en: 'Render data using `stripplot`:'
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
- en: '![Sampling and visualizing](img/image_09_013.jpg)'
  id: totrans-104
  prefs: []
  type: TYPE_IMG
- en: 'The preceding example showed a random sample of available data, which is much
    better than completely plotting the population. But if the levels in the categorical
    variable of interest (in this case, `education`) are too many, then this plot
    becomes hard to read. For example, if we want to plot the balance for job instead
    of `education`, there will be too many strips, making the picture look cluttered.
    Instead, we can take desired sample of desired categorical levels only and then
    examine the data. Note that this is different from subsetting because we will
    not be able to specify the sample ratio in normal subsetting using SQL `WHERE`
    clauses. We need to use `sampleByKey` for that, as shown next. The following example
    takes only two jobs and with specific sampling ratios:'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
- en: '![Sampling and visualizing](img/image_09_014.jpg)'
  id: totrans-106
  prefs: []
  type: TYPE_IMG
- en: Stratified sampling
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
- en: Modeling and visualizing
  id: totrans-108
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Modeling and visualizing are possible with Spark''s **MLLib** and **ML** modules.
    Spark''s unified programming model and diverse programming interfaces enable combining
    these techniques into a single environment to get insights from the data. We have
    already covered most of the modeling techniques in the previous chapters. However,
    here are a few examples for your reference:'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
- en: '**Clustering**: K-means, Gaussian Mixture Modeling'
  id: totrans-110
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Classification and regression**: Linear model, Decision tree, Naïve Bayes,
    SVM'
  id: totrans-111
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Dimensionality reduction**: Singular value decomposition, Principal component
    analysis'
  id: totrans-112
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Collaborative Filtering**'
  id: totrans-113
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Statistical testing**: Correlations, Hypothesis testing'
  id: totrans-114
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'The following example takes a model from the [Chapter 7](ch07.xhtml "Chapter 7. 
    Extending Spark with SparkR"), *Extending Spark with SparkR*, which tries to predict
    the students'' pass or fail results using a Naïve Bayes model. The idea is to
    make use of the out-of-the-box functionality provided by Zeppelin and inspect
    the model behavior. So, we load the data, perform data preparation, build the
    model, and run the predictions. Then we register the predictions as an SQL view
    so as to harness inbuilt visualization:'
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  id: totrans-116
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: '![Modeling and visualizing](img/image_09_015.jpg)'
  id: totrans-117
  prefs: []
  type: TYPE_IMG
- en: The next step is to write the desired SQL query and define the appropriate settings.
    Note the use of the UNION operator in SQL and the way the match column is defined.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
- en: 'Define SQL to view model performance:'
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
- en: '![Modeling and visualizing](img/image_09_016.jpg)'
  id: totrans-120
  prefs: []
  type: TYPE_IMG
- en: 'The following picture helps us understand where the model prediction deviates
    from the actual data. Such visualizations are helpful in taking business users''
    inputs since they do not require any prior knowledge of data science to comprehend:'
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
- en: '![Modeling and visualizing](img/image_09_017.jpg)'
  id: totrans-122
  prefs: []
  type: TYPE_IMG
- en: Visualize model performance
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
- en: We usually evaluate statistical models with error metrics, but visualizing them
    graphically instead of seeing the numbers makes them more intuitive because it
    is usually easier to understand a diagram than numbers in a table. For example,
    the preceding visualization can be easily understood by people outside the data
    science community as well.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
- en: Summary
  id: totrans-125
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In this chapter, we explored most of the widely used visualization tools and
    techniques supported on Spark in a big data setup. We explained some of the techniques
    with code snippets for better understanding of visualization needs at different
    stages of the data analytics life cycle. We also saw how business requirements
    are satisfied with proper visualization techniques by addressing the challenges
    of big data.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
- en: The next chapter is the culmination of all the concepts explained till now .
    We will walk through the Complete Data Analysis Life Cycle through an example
    dataset.
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
- en: References
  id: totrans-128
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '21 Essential Data Visualization Tools: [http://www.kdnuggets.com/2015/05/21-essential-data-visualization-tools.html](http://www.kdnuggets.com/2015/05/21-essential-data-visualization-tools.html)'
  id: totrans-129
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Apache Zeppelin notebook home page: [https://zeppelin.apache.org/](https://zeppelin.apache.org/)'
  id: totrans-130
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Jupyter notebook home page: [https://jupyter.org/](https://jupyter.org/)'
  id: totrans-131
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Jupyter笔记本主页：[https://jupyter.org/](https://jupyter.org/)
- en: 'Using IPython Notebook with Apache Spark: [http://hortonworks.com/hadoop-tutorial/using-ipython-notebook-with-apache-spark/](http://hortonworks.com/hadoop-tutorial/using-ipython-notebook-with-apache-spark/)'
  id: totrans-132
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用Apache Spark的IPython Notebook：[http://hortonworks.com/hadoop-tutorial/using-ipython-notebook-with-apache-spark/](http://hortonworks.com/hadoop-tutorial/using-ipython-notebook-with-apache-spark/)
- en: 'Apache Toree, which enables interactive workloads between applications and
    Spark cluster. Can be used with jupyter to run Scala code: [https://toree.incubator.apache.org/](https://toree.incubator.apache.org/)'
  id: totrans-133
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Apache Toree，可在应用程序和Spark集群之间进行交互式工作负载。可与jupyter一起使用以运行Scala代码：[https://toree.incubator.apache.org/](https://toree.incubator.apache.org/)
- en: 'GoogleVis package using R: [https://cran.rproject.org/web/packages/googleVis/vignettes/googleVis_examples.html](https://cran.rproject.org/web/packages/googleVis/vignettes/googleVis_examples.html)'
  id: totrans-134
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用R的GoogleVis软件包：[https://cran.rproject.org/web/packages/googleVis/vignettes/googleVis_examples.html](https://cran.rproject.org/web/packages/googleVis/vignettes/googleVis_examples.html)
- en: 'GraphX Programming Guide: [http://spark.apache.org/docs/latest/graphx-programming-guide.html](http://spark.apache.org/docs/latest/graphx-programming-guide.html)'
  id: totrans-135
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: GraphX编程指南：[http://spark.apache.org/docs/latest/graphx-programming-guide.html](http://spark.apache.org/docs/latest/graphx-programming-guide.html)
- en: 'Going viral with R''s igraph package: [https://www.r-bloggers.com/going-viral-with-rs-igraph-package/](https://www.r-bloggers.com/going-viral-with-rs-igraph-package/)'
  id: totrans-136
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用R的igraph软件包进行病毒式传播：[https://www.r-bloggers.com/going-viral-with-rs-igraph-package/](https://www.r-bloggers.com/going-viral-with-rs-igraph-package/)
- en: 'Plotting with categorical data: [https://stanford.edu/~mwaskom/software/seaborn/tutorial/categorical.html#categorical-tutorial](https://stanford.edu/~mwaskom/software/seaborn/tutorial/categorical.html#categorical-tutorial)'
  id: totrans-137
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用分类数据绘图：[https://stanford.edu/~mwaskom/software/seaborn/tutorial/categorical.html#categorical-tutorial](https://stanford.edu/~mwaskom/software/seaborn/tutorial/categorical.html#categorical-tutorial)
- en: Data source citations
  id: totrans-138
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 数据来源引用
- en: '**Bank data source (citation)**'
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: '**银行数据来源（引用）**'
- en: '[Moro et al., 2011] S. Moro, R. Laureano and P. Cortez. Using Data Mining for
    Bank Direct Marketing: An Application of the CRISP-DM Methodology'
  id: totrans-140
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[Moro等人，2011] S. Moro，R. Laureano和P. Cortez。使用数据挖掘进行银行直接营销：CRISP-DM方法论的应用'
- en: In P. Novais et al. (Eds.), Proceedings of the European Simulation and Modelling
    Conference - ESM'2011, pp. 117-121, Guimarães, Portugal, October, 2011\. EUROSIS
  id: totrans-141
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在P. Novais等人（编），欧洲模拟与建模会议 - ESM'2011论文集，第117-121页，葡萄牙吉马良斯，2011年10月。EUROSIS
- en: Available at [pdf] [http://hdl.handle.net/1822/14838](http://hdl.handle.net/1822/14838)
  id: totrans-142
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 可在[pdf] [http://hdl.handle.net/1822/14838](http://hdl.handle.net/1822/14838)找到
- en: '[bib] http://www3.dsi.uminho.pt/pcortez/bib/2011-esm-1.txt'
  id: totrans-143
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[bib] http://www3.dsi.uminho.pt/pcortez/bib/2011-esm-1.txt'
- en: '**Facebook data Source (citation)**'
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: '**Facebook数据来源（引用）**'
- en: J. McAuley and J. Leskovec. Learning to Discover Social Circles in Ego Networks.
    NIPS, 2012.
  id: totrans-145
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: J. McAuley和J. Leskovec。学习在自我网络中发现社交圈。NIPS，2012年。
