- en: Introduction to Linux
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Linux简介
- en: An **operating system** (**OS**) is a special piece of software running on your
    computer to make it possible to start and run programs such as Microsoft Word
    and Excel. Besides that, it handles your computer's input and output for you and
    delivers filesystem and hardware control. Examples of operating systems you may
    already know are Windows, macOS, iOS, or Android.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: '**操作系统**（**OS**）是一种特殊的软件，运行在您的计算机上，使得启动和运行诸如Microsoft Word和Excel之类的程序成为可能。除此之外，它还为您处理计算机的输入和输出，并提供文件系统和硬件控制。您可能已经了解的操作系统的例子有Windows、macOS、iOS或Android。'
- en: 'In this chapter, we''ll cover the following topics:'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将涵盖以下主题：
- en: An overview of the Linux system
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Linux系统概述
- en: Virtualization
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 虚拟化
- en: Installing VirtualBox and CentOS
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安装VirtualBox和CentOS
- en: Working with VirtualBox
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用VirtualBox
- en: Connecting VMs through SSH
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过SSH连接虚拟机
- en: An overview of the Linux system
  id: totrans-8
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Linux系统概述
- en: Linux is not the name of a specific and full working OS, but implements only
    the essential inner core of an OS, which is referred to as the kernel. Most types
    of Linux OS do not cost anything, but provide thousands of programs and software
    to use completely free of charge. Most of these programs are also open source,
    which means you can view the exact blueprint of how the program has been created
    and it can be changed by anyone. One very important area in which Linux is very
    popular and is used heavily is managing many network services. These are programs
    that run in the background of your Linux server, continuously waiting for external
    events to respond with some kind of action or information. Examples are popular
    internet services such as a web server, which presents websites to the user; main
    servers for email communications; and also database servers to store and deliver
    any kind of data. As mentioned before, Linux is only the name of the kernel part,
    not a full working OS. To make it complete, you need to bundle it together with
    all kinds of programs, which is then referred to as a **distribution**.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: Linux不是特定和完整工作的操作系统的名称，而是仅实现操作系统的基本内核，称为内核。大多数类型的Linux操作系统都是免费的，但提供成千上万的程序和软件，完全免费使用。其中大多数程序也是开源的，这意味着您可以查看程序的确切蓝图，以及任何人都可以更改它。Linux非常流行并且被广泛使用的一个非常重要的领域是管理许多网络服务。这些是在Linux服务器后台运行的程序，不断等待外部事件以响应某种操作或信息。例如，流行的互联网服务如Web服务器，用于向用户呈现网站；用于电子邮件通信的主服务器；以及用于存储和传递任何类型数据的数据库服务器。如前所述，Linux只是内核部分的名称，而不是完整的工作操作系统。要使其完整，您需要将其与各种程序捆绑在一起，然后称为**发行版**。
- en: Nowadays, one can choose between an insane amount of different Linux distributions,
    all designed for a special purpose and all with their own pros and cons. The main
    difference between them is the software selected and bundled together with the
    Linux kernel. The most important Linux distribution families are Red Hat- and
    Debian-based Linux distributions. CentOS is one of the most important free Red
    Hat-based Linux server distributions out there at the moment. It's a very stable,
    secure, and reliable OS, which is why it's often used in running very critical
    networking services in enterprise environments. Also, it's good to know that the
    development of this OS is very strong and updates are well selected and suitably
    tested. The first chapter of this book is about installing Linux; here we will
    be starting easy by introducing you to the concepts of virtualization. Then, we
    will create a new CentOS 7 **virtual machine** (**VM**) using a free virtualization
    software called VirtualBox.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 如今，人们可以在众多不同的Linux发行版中进行选择，每个都设计用于特定目的，各自具有优缺点。它们之间的主要区别在于所选软件与Linux内核捆绑在一起。最重要的Linux发行版家族是基于Red
    Hat和Debian的Linux发行版。CentOS是目前最重要的免费Red Hat基础Linux服务器发行版之一。它是一个非常稳定、安全和可靠的操作系统，因此经常用于在企业环境中运行非常关键的网络服务。此外，值得知道的是，该操作系统的开发非常强大，更新也经过精心选择和适当测试。本书的第一章是关于安装Linux；在这里，我们将通过向您介绍虚拟化的概念来轻松开始。然后，我们将使用名为VirtualBox的免费虚拟化软件创建一个新的CentOS
    7 **虚拟机**（**VM**）。
- en: Virtualization
  id: totrans-11
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 虚拟化
- en: In this section, we will give you an overview of the concepts of virtualization.
    We will also show you how to work with VirtualBox, and afterward show you how
    you can install your first CentOS 7 virtual machine in VirtualBox. It is a very
    hot topic and the core IT skill at the moment is virtualization.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 在这一部分，我们将为您概述虚拟化的概念。我们还将向您展示如何使用VirtualBox，并在此之后向您展示如何在VirtualBox中安装您的第一个CentOS
    7虚拟机。虚拟化是一个非常热门的话题，目前的核心IT技能就是虚拟化。
- en: Simply put, it is a technology to run separate operating systems parallel to
    your main operating system on the same computer. For example, if you are currently
    working on a Windows computer, you can run another operating system such as Linux
    or macOS in parallel to a simple Windows application on your desktop. Modern virtualization
    software does not even limit you to run only one parallel OS, but you can run
    multiple systems in parallel. The limits are only defined by your own computer
    hardware. The applications for virtualization technology in modern IT are endless,
    and you will find them everywhere. The advantages can range from shifting IT infrastructure
    paradigms to undoing changes to your operating systems, which is quite ideal for
    beginners.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 简而言之，虚拟化是一种技术，可以在同一台计算机上并行运行独立的操作系统。例如，如果您目前正在使用Windows计算机，您可以在桌面上并行运行另一个操作系统，如Linux或macOS，以及一个简单的Windows应用程序。现代虚拟化软件甚至不限制您只能运行一个并行操作系统，而是可以并行运行多个系统。限制仅由您自己的计算机硬件定义。现代IT中虚拟化技术的应用是无穷无尽的，您将在各个领域找到它们。优势可以从转移IT基础设施范式到撤消操作系统更改，这对初学者来说非常理想。
- en: In cloud computing or modern data centers, powerful virtualization server clusters
    are running many different operating systems simultaneously, instead of using
    dedicated server hardware. If you wanted to use Linux before the age of virtualization,
    you needed access to dedicated physical computers. Also, most beginners will mess
    up their new Linux installation several times when starting out on Linux. Oftentimes,
    such system changes can be hard to reboot and the only efficient and useful consequence
    is to reinstall a complete system when getting stuck. Virtualization gets rid
    of all these problems. We will use it for conveniently working with all the examples
    throughout the entire chapter thanks to its powerful features such as cloning,
    taking snapshots, or creating images, which also eliminates the fear of breaking
    something. At the moment, there is a broad range of different virtualization products
    available for both desktop and non-graphical server environments to choose from,
    both in the commercial and open source sector.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 在云计算或现代数据中心中，强大的虚拟化服务器集群同时运行许多不同的操作系统，而不是使用专用服务器硬件。如果您在虚拟化时代之前想要使用Linux，您需要访问专用的物理计算机。此外，大多数初学者在开始使用Linux时会多次搞砸他们的新Linux安装。通常，这种系统更改可能很难重新启动，唯一有效和有用的后果就是在卡住时重新安装完整系统。虚拟化摆脱了所有这些问题。由于其强大的功能，例如克隆、拍摄快照或创建图像，我们将在整个章节中方便地使用它来处理所有示例，这也消除了破坏某些东西的恐惧。目前，桌面和非图形服务器环境都有广泛的不同虚拟化产品可供选择，无论是商业还是开源领域。
- en: At the core level, all of these different virtualization products have the same
    basic features and common definitions, which we need to make clear before we can
    dive deeper. When we talk about operating systems running in parallel to your
    physical machine's operating system, we will refer to them as VMs, or virtual
    machines, from this point forward. In the same context, our main operating system
    running our physical machine which runs the virtualization software is called
    the **host system** or **hypervisor**. The VMs running on this host are called
    the **guest systems** or **guests**. Copying and cloning is one of the most important
    features of virtualization. This can save you precious time, for example, if you
    need another identical machine or to make your work more portable. Just copy the
    image to your laptop or a different data center and you're done. The portable
    copy of a VM is also called an **image**. Another awesome feature is taking snapshots
    of your VM. Taking such a snapshot only takes a few seconds but will save the
    complete and current state of your VM at any given point in time. This is very
    useful if you want to preserve a given version of your VM you may later want to
    revert to. Another feature different virtualization products have in common are
    the types of supported network modes.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 在核心级别，所有这些不同的虚拟化产品都具有相同的基本功能和共同的定义，我们需要在深入研究之前搞清楚。当我们谈论在物理机操作系统的同时运行的操作系统时，我们将从现在开始称它们为VM或虚拟机。在同样的上下文中，运行虚拟化软件的主要操作系统称为主机系统或hypervisor。在此主机上运行的VM称为客户系统或客户。复制和克隆是虚拟化的最重要功能之一。这可以节省宝贵的时间，例如，如果您需要另一台相同的机器或使您的工作更具可移植性。只需将图像复制到笔记本电脑或不同的数据中心，您就完成了。虚拟机的便携式副本也称为图像。另一个令人敬畏的功能是拍摄虚拟机的快照。拍摄这样的快照只需要几秒钟，但会保存虚拟机在任何给定时间点的完整和当前状态。如果您想保留虚拟机的特定版本，以便以后恢复，这将非常有用。不同虚拟化产品共有的另一个特性是支持的网络模式类型。
- en: 'The different modes a VM can use to connect to a network can be as follows:'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 虚拟机连接到网络的不同模式可以如下：
- en: '**NAT**: All incoming and outgoing network traffic of your guest VM will go
    through the host network adapter. This means that the VM is not visible in the
    network we are currently on and we only see our host''s MAC and IP addresses.'
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: NAT：您的虚拟机的所有传入和传出网络流量都将通过主机网络适配器进行。这意味着该虚拟机在当前网络中不可见，我们只能看到主机的MAC和IP地址。
- en: '**Bridged**: This network mode means the VM exposes itself and connects to
    the surrounding physical network as if it were a normal physical machine with
    its own unique MAC address. A DHCP server in this network will give the machine
    its own IP address that differs from the host machine.'
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 桥接：这种网络模式意味着虚拟机会像正常的物理机一样暴露自己并连接到周围的物理网络，具有自己独特的MAC地址。此网络中的DHCP服务器将为该机器提供与主机机器不同的IP地址。
- en: '**Host-only**: This means that the VM can only communicate with and is visible
    to its host and not the rest of the network.'
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 主机模式：这意味着虚拟机只能与其主机通信并对其可见，而不能与网络的其他部分通信。
- en: '**Specific virtual network**: This is a very great feature where you can define
    private and isolated subnet works, independent of the surrounding physical network,
    and then associate VMs to it. This can be useful so that only VMs can see and
    talk to other machines, which are in the same virtual network.'
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 特定虚拟网络：这是一个非常好的功能，您可以在周围物理网络之外定义私有和隔离的子网，并将虚拟机关联到它。这可能很有用，以便只有虚拟机可以看到并与其他在同一虚拟网络中的机器进行通信。
- en: Installing VirtualBox and CentOS
  id: totrans-21
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安装VirtualBox和CentOS
- en: 'In this section, we will show you how to install the free virtualization software
    called **VirtualBox**, before creating a new CentOS 7 VM. We will also finish
    very important post-installation tasks, which we will need to perform in the upcoming
    sections. Installation of VirtualBox is really straightforward. Executable installers
    are available for every major operating system. The following are the steps to
    install VirtualBox:'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将向您展示如何安装名为VirtualBox的免费虚拟化软件，然后创建一个新的CentOS 7虚拟机。我们还将完成非常重要的后安装任务，这些任务将在接下来的部分中执行。安装VirtualBox非常简单。可用于每个主要操作系统的可执行安装程序。安装VirtualBox的步骤如下：
- en: Open your favorite web browser and navigate to [https://www.virtualbox.org/](https://www.virtualbox.org/).
    Now, click on the download button that is clearly visible on the home page.
  id: totrans-23
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select a target host OS of your choice. In our example, we will select Windows.
  id: totrans-24
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on Windows hosts to start the download. Also, don't forget to download
    the VirtualBox extension pack that you can find on the same Downloads page.
  id: totrans-25
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: This is a package that will provide better USB support, among other useful features.
    After the download has finished, open the downloaded installer to run it and install
    it using the default settings.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
- en: Now, let's create a new CentOS 7 VM in VirtualBox. In order to do so, we first
    need to download the CentOS 7 Minimal ISO file version 1611 from the official
    CentOS website ([https://www.centos.org/](https://www.centos.org/)). This contains
    only the most important software packages needed to run a non-graphical Linux
    server, which is exactly what we want.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
- en: 'The following are the steps for creating a new CentOS 7 VM:'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
- en: Open a web browser and navigate to [https://www.centos.org/](https://www.centos.org/).
    Navigate to Get CentOS Now | Minimal ISO.
  id: totrans-29
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: On the next screen, select the download URL near to your current location for
    fast download speed. I'm currently located in Germany, so my actual download URL
    will most likely be different than yours if you're somewhere else.
  id: totrans-30
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Wait until the download has finished.
  id: totrans-31
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: On a modern and fast computer, you can install a fully working operating system
    such as CentOS 7 inside VirtualBox within a few minutes.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
- en: 'Run VirtualBox on your system. Now, let''s reproduce the following steps to
    install our first CentOS 7 VM:'
  id: totrans-33
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on the New button to create a new VM. If you type the VM Name as `CentOS
    7`, VirtualBox will recognize the two other fields, Type and Version, to be Linux
    and Red Hat (64-bit) correctly for you.
  id: totrans-34
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on the Next button to proceed to the next step.
  id: totrans-35
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Now, select how much memory or RAM your VM must have. If you don't want any
    performance issues for your host system, stay in the green area displayed to you
    in the Memory size window.
  id: totrans-36
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: For a basic headless server, which means a non-graphical server, at least 2
    GB of RAM is recommended. Don't worry, you can change this setting later too.
  id: totrans-37
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on the Next button and on the next screen leave the default settings as
    is. Now, click on Create.
  id: totrans-38
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select the VDI option and click on Next. Now, on this screen, stay with the
    Dynamically allocated option. Click on Next.
  id: totrans-39
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: On the next screen, double the virtual hard disk size to `16 GB`, as `8 GB`
    is way too little for our work.
  id: totrans-40
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Finally, click on the Create button to create a fresh and empty VM ready for
    installation of CentOS 7.
  id: totrans-41
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Now, let''s install CentOS 7 in our empty VM:'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
- en: Select our CentOS 7 server VM and click on the green Start button to start it.
    Here, our downloaded CentOS 7 ISO file will be used as a virtual CD-ROM by VirtualBox
    and this is where it can be booted or started from.
  id: totrans-43
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: To do this, click on the small folder symbol and navigate the file browser to
    your downloaded CentOS 7 Minimal ISO file, and then click on the Start button.
  id: totrans-44
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Now, your VM will present you with a text-based start menu, where we will use
    the up arrow key on the keyboard to select Install CentOS Linux 7 and then press
    *Enter* to start the installer.
  id: totrans-45
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: After waiting for some time, you will be presented with the first graphical
    installation screen.
  id: totrans-46
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Before we click or type something into the VM window for the first time, we
    need to know how we can switch back to our host system once we are in. If you
    click once on the guest window, a popup will show up telling you how you can switch
    controls back and forth.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
- en: Select the installer language. In our example, we used the default English language.
  id: totrans-48
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: This is not the language of your CentOS 7 installation. We will set this type
    of information on the next screen.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
- en: Click on Continue. Now, we are on the main installation screen, where we can
    customize our installation. You will need to wait until all the items have been
    loaded.
  id: totrans-50
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Here, all the items which are marked with an exclamation mark need to be done
    before we can proceed with the installation, but you can also do optional settings
    here like setting your location information.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
- en: Next, we need to set the installation destination. Click on INSTALLATION DESTINATION.
    As we are using an empty VM, we will use the full hard disk for installation,
    which is the default, so just click on Done which is present at the top-left side
    of the screen.
  id: totrans-52
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Before we start the actual installation, let's quickly enable our Ethernet network
    card here, so we don't have to do this post installation using the command line.
    If you are behind a proxy, you can also add this kind of information here in this
    menu. Click on Done if you're ready.
  id: totrans-53
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Now, let's click on Begin Installation. While the installation is ongoing, set
    a strong and secure password for the administrator or root account, which is the
    account that has all the rights and control over a system. Click on Done after
    setting up the strong password.
  id: totrans-54
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Now, from the same screen, you can create a normal user account for your everyday
    work.
  id: totrans-55
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The first rule of any secure Linux system is never work with the root user unless
    you need to.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
- en: Click on Done after creating the new user account.
  id: totrans-57
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Now wait until the installation has finished. Once the installation is finished,
    click on the Reboot button to restart your system.
  id: totrans-58
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Pressing the *Enter* key on the start screen will always select and use the
    latest kernel.
  id: totrans-59
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Now, wait until you get a login screen in this window, which is also called
    our **Service Terminal**.
  id: totrans-60
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Log in using the `root` user and password you set during the installation.
  id: totrans-61
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Then, type the following command in the Terminal and press the *Enter* key:'
  id: totrans-62
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE0]'
  id: totrans-63
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: This command will install all the latest software updates available for your
    CentOS 7 installation, as the installer media does not have them included.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
- en: If you get a new error while this command is running, something must be wrong
    with your internet connection, so troubleshoot internet connectivity on your host
    system.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
- en: If the core of the CentOS 7 system, which is called the **kernel**, has been
    updated, we need to reboot the system. So, type `reboot` in the Terminal, and
    then press *Enter*. After rebooting again, press the *Enter* key then wait for
    the login screen to load and log in again.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
- en: 'Next, we type in another two commands, which will clear out all our free space
    so that we can create a smaller backup image of the system. Now, type the following
    command with administrative/root access in the Terminal:'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  id: totrans-68
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: '![](img/dd89f9b1-6c49-4d9c-bd2e-d1777de8164d.png)'
  id: totrans-69
  prefs: []
  type: TYPE_IMG
- en: Now, press the *Enter* key. This command will override all the free space of
    your Linux filesystem by creating one big file containing only zeros until the
    disk is full. This will take some time, so you will need to be patient. If this
    command outputs some text, it has been finished. You can ignore the error output
    as this is the expected behavior.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
- en: 'Finally, for setting up SSH port forwarding, we need to write down the actual
    IP address of our VM''s connected network adapter. Run the following command:'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  id: totrans-72
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: Press *Enter* and, in the output line type in the IP address, which is the value
    after the word `inet`. In our example, it's `10.0.2.15`.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
- en: 'To shut down the VM, use the following command and then press the *Enter* key:'
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  id: totrans-75
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: Working with VirtualBox
  id: totrans-76
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In this section, we will learn the most important steps needed to properly work
    with the VirtualBox. Note that most of the settings discussed here can be directly
    translated from VirtualBox to any other desktop virtualization software such as
    KVM, VMware, Workstation, or Parallels Desktop.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
- en: 'Let''s follow these steps to export the VM image:'
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
- en: Navigate your cursor to the top-left corner of the Oracle VM VirtualBox Manager
    screen. Here, click on the File menu and in the drop-down menu select Export Appliance....
  id: totrans-79
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: In the same drop-down menu, you'll find another menu item called Import Appliance...,
    which allows you to import an image file once it has been created.
  id: totrans-80
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Now, click on Export Appliance... to start the process.
  id: totrans-81
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: In the Export Virtual Appliance screen, select the VM you want to create an
    image of and then click on Next.
  id: totrans-82
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Now, on the Storage settings screen leave the default settings as it is and
    then click on Next again.
  id: totrans-83
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Again, on the Appliance settings screen, we don't want to change anything, so
    click on the Export button to start the process. This will take some time, so
    you will need to be patient.
  id: totrans-84
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: After the export process has been completed, let's examine what the resulting
    file will look like.
  id: totrans-85
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Go to the location where VirtualBox has exported your file (usually, you''ll
    find it in the `Documents` folder) and then right-click and select the Properties...
    option to view the file''s properties:'
  id: totrans-86
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/84e27e87-2606-4198-be4b-93ece918959e.png)'
  id: totrans-87
  prefs: []
  type: TYPE_IMG
- en: As you can see, the exported VM size is over 600 MB in size, which is pretty
    awesome. This image file could now be copied to a backup location or transferred
    to another machine or data center for running it. The next thing we should do
    before working with our VM is also make a snapshot from the current state right
    after installation, so we can revert to the status quo whenever we need to.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
- en: 'Follow these steps to create a snapshot of the VM:'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
- en: Select the appropriate VM and then click on the Snapshots option for your marked
    VM. Give it a suitable name and an optional description.
  id: totrans-90
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The next thing we want to do here is create some exact copies of our VM so that
    we have multiple CentOS 7 servers. To do this, right-click on the VM and select
    the Clone... option. Give it a suitable name and mark the option named Reinitialize
    the MAC address of all network cards, so it will be seen as a unique machine in
    our network.
  id: totrans-91
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: On the Clone type windows, select Full clone and click on Next to continue.
    Now, click on the Clone button while leaving the default option selected.
  id: totrans-92
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Repeat the previous steps to create another fully cloned VM.
  id: totrans-93
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Now, let''s demonstrate the power of working with snapshots. A snapshot should
    always be taken before doing something risky. For example, start one of our CentOS
    7 VMs and log in to the system. Now, let''s imagine we want to work on the `/boot`
    directory, where the Linux kernels reside. This is a critical directory, so it''s
    a good idea to create a snapshot of the current VM state before proceeding:'
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/d48ee046-1913-4a74-a58a-256d28f88b26.png)'
  id: totrans-95
  prefs: []
  type: TYPE_IMG
- en: 'In the previous screenshot, you can see that I''ve made a severe mistake. I
    completely deleted the whole kernel directory, so the directory is now empty.
    What will happen if I restart the system now? Let''s see:'
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/bf467dd6-3550-4fbb-925a-537770181535.png)'
  id: totrans-97
  prefs: []
  type: TYPE_IMG
- en: As you can see in the previous screenshot, I cannot boot without any kernel
    and the system is now completely unresponsive, and this gets really hard to fix.
    What is the best solution for this problem? Reverting to the state of your last
    snapshot.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
- en: 'Perform the following steps to revert the VM state to the previous snapshot:'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
- en: 'First shut down your VM. Now, select the snapshot of your choice and then click
    on the Restore button. This will ask you if you want to create a snapshot of the
    current state. If we don''t want to do this, then we click on the Restore button,
    as shown in the following screenshot:'
  id: totrans-100
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/e3e6cd80-c64a-4825-84cf-816ead02378b.png)'
  id: totrans-101
  prefs: []
  type: TYPE_IMG
- en: 'Now, you can start the VM. As you can see from the following screenshot, we
    are just about to execute the `delete` command:'
  id: totrans-102
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/009ab1bc-88f1-436b-8356-4e05c96f302c.png)'
  id: totrans-103
  prefs: []
  type: TYPE_IMG
- en: If we start the machine again, all the problems are gone and we are back where
    we were before deleting the kernel files. It is recommended to use the snapshot
    feature often since it can save your precious time.
  id: totrans-104
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Finally, we can easily adjust our VM''s hardware parameters if we need to,
    as shown in the following screenshot:'
  id: totrans-105
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/78ae2521-726f-4e1b-b095-44527e0b4f62.png)'
  id: totrans-106
  prefs: []
  type: TYPE_IMG
- en: Before making any hardware changes, ensure that you shut down the VM and then
    proceed.
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
- en: You can only do this on a part of the machine. Select your VM of choice and
    click on Settings and then on System, where you can adjust your memory. Also,
    you can adjust your virtual process here. Click on Display to change the Video
    Memory settings. Under Storage, you can attach virtual hard disks or create new
    ones. Under Network, you can create new network adapters for your VM and choose
    between different network modes. Under USB, select USB 2.0 (EHCI) Controller so
    that we can connect a physical USB device to our VM properly if we want to.
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
- en: Connecting VMs through SSH
  id: totrans-109
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Working with your new Linux OS using its Terminal window through the VirtualBox
    user interface will get you started and can be used for configuring the most basic
    settings of your new server. A more convenient, efficient, and professional way
    of accessing your server''s command line is by using a terminal emulator program
    and SSH. A terminal emulator is an external program running outside VirtualBox
    in a separate window on your OS. It can be used exactly the same way as your server''s
    main black and white Terminal:'
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/f63d8094-3876-4c70-8f94-f9fac7a7018f.png)'
  id: totrans-111
  prefs: []
  type: TYPE_IMG
- en: It has a lot of convenient features, such as easy copy and paste in clipboards
    from your OS window and customizing font size and colors. Also, it uses tabs for
    better navigation, but how can you communicate with such a terminal emulator from
    your server? This is done using a client-server connection. The terminal emulator
    running on your host machine will be declined; we will connect to the CentOS 7
    server to execute commands on it. Such a connection can be done using SSH. This
    is a system for remotely accessing and using Linux servers. It uses strong encryption
    for secure connections. As SSH is one of the most fundamental core services for
    communication on any Linux server, it is already installed and enabled on CentOS
    7\. All we need to do is run an SSH client within our terminal emulator program,
    which can connect and communicate with any server running the SSH service on Linux
    and macOS, a terminal emulator program, and an open source, as a stage client
    is already installed by default and ready to use.
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
- en: On Windows, you need to install the program PuTTY, which contains not only the
    SSH client program, but is also a fully operational terminal emulator. Before
    we can access the CentOS 7 SSH service, we need to make its correct network address
    available to the host system where our terminal emulator is running. A correct
    network connection for communicating between a client and server always consists
    of an IP address, or domain name, bundled together with a specific port number.
    The domain name or IP is like a house number, whereas the port number is like
    the exact apartment number in that house. We always need both values for the correct
    delivery of network packages. By default, the ports of any guest VM are not available
    to the outside host system, so we first need to create the link between the host
    and the guest by using a feature that is called **port forwarding**. SSH, by default,
    is running on port `22`, but this low port number cannot be used for forwarding
    to by non admin users or route users. As we are running VirtualBox as a normal
    user, we need to forward port `22` to a user port higher than `1024`.
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
- en: 'In our example, we use port `2222`. To do this, perform the following steps:'
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
- en: Select your VM of choice and navigate to the Settings option. Click on the Network
    tab.
  id: totrans-115
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Explore the Advanced option. Now, click on the Port Forwarding button to create
    a new port forwarding rule.
  id: totrans-116
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'In the Port Forwarding Rules window, click on the Adds new port forwarding
    rule button. Now, use the `127.0.0.1` IP for the Host IP section, which is the
    IP of the localhost, then the Host Port, `2222`. For the Guest IP section, type
    `10.0.2.15` and Guest Port `22`, as illustrated in the following screenshot:'
  id: totrans-117
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/aca9aac7-0be6-4362-8fc0-7e861efd7dbc.png)'
  id: totrans-118
  prefs: []
  type: TYPE_IMG
- en: Click on OK to create this rule.
  id: totrans-119
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Repeat the same for the other two CentOS 7 VMs we cloned earlier. Make sure
    to use different host ports so that we can create distinct network endpoint connections
    for every host.
  id: totrans-120
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The first CentOS 7 VM server can now be accessed using the IP `127.0.0.1` with
    port `2222`, the second at port `2223`, and the third at port `2224`. Now, start
    all three of your CentOS 7 VMs.
  id: totrans-121
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Open your favorite terminal emulator, for example, xterm, GNOME Terminal, or
    (as is in my example) the Xfce4 Terminal.
  id: totrans-122
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'To log in to your first CentOS 7 server using the terminal emulator, use the
    root credentials. Type the following command in the Terminal window:'
  id: totrans-123
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE4]'
  id: totrans-124
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: Press the *Enter* key. This command will connect your local SSH client to the
    SSH server running at the IP address `127.0.0.1` on port `2222`, which gets redirected
    to your VM's network address `10.0.2.15` at port `22`.
  id: totrans-125
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: When prompted, type `yes` in the Terminal, if you are logging into the server
    for the first time.
  id: totrans-126
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Now, enter the credentials of the root user you set during installation.
  id: totrans-127
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Here, we can now work and type commands as we would on the real Terminal screen.
    We can also log into the other two CentOS 7 VMs using the other two ports.
  id: totrans-128
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: To exit the SSH session, type in `exit` and press *Enter*.
  id: totrans-129
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: On a Windows system, you can use the free program named PuTTY to do exactly
    the same operations.
  id: totrans-130
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Just open the PuTTY graphical user interface, type in the SSH server's IP address,
    `127.0.0.1`, and use port `2222` for connection. Now, use the root account to
    access the VM.
  id: totrans-131
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: After setting up port forwarding, the easiest way is to use the free SCP program
    available on Mac or Linux. On Windows, you need to download PSCP.
  id: totrans-132
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'To download a file called `/etc/passwd` from the CentOS 7 VM guest to the host
    using the root user in the current directory, type the following command:'
  id: totrans-133
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE5]'
  id: totrans-134
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'When asked, type in your root password. Now we can view the file locally:'
  id: totrans-135
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/3c35fec6-0326-4903-a313-e3297605db72.png)'
  id: totrans-136
  prefs: []
  type: TYPE_IMG
- en: The other way around to upload a local file called `my-local-file`, filled with
    some random data to the server, and type `scp -P 2222 my-local-file root@127.0.0.1:~`.
  id: totrans-137
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Press *Enter*, and type your root's password. The file has now been uploaded
    to the server into the `/home` folder, which is specified by the `~`.
  id: totrans-138
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Summary
  id: totrans-139
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In this chapter, we've covered the introductory concepts of Linux and VirtualBox.
    We started off by gaining an understanding of the working principle of an operating
    system and progressed towards virtualization. Next, we covered the installation
    of VirtualBox and CentOS. Then, we learned how to work with VirtualBox and connected
    it using SSH.
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
- en: In the next chapter, we'll understand the workings of the command line.
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
