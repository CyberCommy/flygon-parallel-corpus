- en: Preface
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: The growing complexity and scalability of real-world applications has led to
    a transition from monolithic architecture to microservices architecture. Kubernetes
    has become the de facto orchestration platform for deploying microservices. As
    a developer-friendly platform, Kubernetes enables different configurations to
    suit different use cases, making it the primary choice among most DevOps engineers.
    The openness and highly configurable nature of Kubernetes increases its complexity.
    Increased complexity leads to misconfigurations and security issues, which if
    exploited, can cause a significant economic impact on an organization. If you
    are planning to use Kubernetes in your environment, this book is for you.
  prefs: []
  type: TYPE_NORMAL
- en: In this book, you'll learn about how to secure your Kubernetes cluster. We briefly
    introduce Kubernetes in the first two chapters (we expect you to have a basic
    understanding of Kubernetes before you begin). We then discuss the default configurations
    of different Kubernetes components and objects. Default configurations in Kubernetes
    are often insecure. We discuss different ways to configure your cluster correctly
    to ensure that it is secure. We dive deep to explore different built-in security
    mechanisms, such as admission controllers, security contexts, and network policies,
    that are provided by Kubernetes to help secure your cluster. We also discuss some
    open source tools that complement the existing toolkits in Kubernetes to improve
    the security of your cluster. Finally, we look at some real-world examples of
    attacks and vulnerabilities in Kubernetes clusters and discuss how to harden your
    cluster to prevent such attacks.
  prefs: []
  type: TYPE_NORMAL
- en: With this book, we hope you will be able to deploy complex applications in your
    Kubernetes clusters securely. Kubernetes is evolving quickly. With the examples
    that we provide, we hope you will learn how to reason about the right configurations
    for your environment.
  prefs: []
  type: TYPE_NORMAL
- en: Who this book is for
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: This book is for DevOps/DevSecOps professionals who have started adopting Kubernetes
    as their main deployment/orchestration platform and have a basic understanding
    of Kubernetes. The book is also for developers who'd like to learn how to secure
    and harden a Kubernetes cluster.
  prefs: []
  type: TYPE_NORMAL
- en: What this book covers
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '[*Chapter 1*](B15566_01_Final_ASB_ePub.xhtml#_idTextAnchor020), *Kubernetes
    Architecture,* introduces the basics of Kubernetes components and Kubernetes objects.'
  prefs: []
  type: TYPE_NORMAL
- en: '[*Chapter 2*](B15566_02_Final_ASB_ePub.xhtml#_idTextAnchor049), *Kubernetes
    Networking,* introduces Kubernetes'' networking model and dives deep into the
    communication among microservices.'
  prefs: []
  type: TYPE_NORMAL
- en: '[*Chapter 3*](B15566_03_Final_ASB_ePub.xhtml#_idTextAnchor091), *Threat Modeling,*
    discusses important assets, threat actors in Kubernetes, and how to conduct threat
    modeling for applications deployed in Kubernetes.'
  prefs: []
  type: TYPE_NORMAL
- en: '[*Chapter 4*](B15566_04_Final_ASB_ePub.xhtml#_idTextAnchor108), *Applying the
    Principle of Least Privilege in Kubernetes,* discusses the security control mechanisms
    in Kubernetes that help in implementing the principle of least privilege in two
    areas: the least privilege of Kubernetes subjects and the least privilege of Kubernetes
    workloads.'
  prefs: []
  type: TYPE_NORMAL
- en: '[*Chapter 5*](B15566_05_Final_ASB_ePub.xhtml#_idTextAnchor144), *Configuring
    Kubernetes Security Boundaries,* discusses the security domains and security boundaries
    in Kubernetes clusters. Also, it introduces security control mechanisms to strengthen
    security boundaries.'
  prefs: []
  type: TYPE_NORMAL
- en: '[*Chapter 6*](B15566_06_Final_ASB_ePub.xhtml#_idTextAnchor170), *Securing Cluster
    Components,* discusses the sensitive configurations in Kubernetes components,
    such as `kube-apiserver`, `kubelet`, and so on. It introduces the use of `kube-bench`
    to help identify misconfigurations in Kubernetes clusters.'
  prefs: []
  type: TYPE_NORMAL
- en: '[*Chapter 7*](B15566_07_Final_ASB_ePub.xhtml#_idTextAnchor186), *Authentication,
    Authorization, and Admission Control,* discusses the authentication and authorization
    mechanisms in Kubernetes. It also introduces popular admission controllers in
    Kubernetes.'
  prefs: []
  type: TYPE_NORMAL
- en: '[*Chapter 8*](B15566_08_Final_ASB_ePub.xhtml#_idTextAnchor249), *Securing Kubernetes
    Pods,* discusses hardening images with CIS Docker Benchmark. It introduces Kubernetes
    security contexts, Pod Security Policies, and `kube-psp-advisor`, which helps
    to generate Pod security policies.'
  prefs: []
  type: TYPE_NORMAL
- en: '[*Chapter 9*](B15566_09_Final_ASB_ePub.xhtml#_idTextAnchor277), *Image Scanning
    in DevOps Pipelines,* introduces the basic concepts of container images and vulnerabilities.
    It also introduces the image scanning tool Anchore Engine and how it can be integrated
    into DevOps pipelines.'
  prefs: []
  type: TYPE_NORMAL
- en: '[*Chapter 10*](B15566_10_Final_ASB_ePub.xhtml#_idTextAnchor305), *Real-Time
    Monitoring and Resource Management of a Kubernetes Cluster,* introduces built-in
    mechanisms such as resource request/limits and LimitRanger. It also introduces
    built-in tools like Kubernetes Dashboard and metrics server, and third-party monitoring
    tools, such as Prometheus and a data visualization tool called Grafana.'
  prefs: []
  type: TYPE_NORMAL
- en: '[*Chapter 11*](B15566_11_Final_ASB_ePub.xhtml#_idTextAnchor324), *Defense in
    Depth,* discusses various topics related to defense in depth: Kubernetes auditing,
    high availability in Kubernetes, secret management, anomaly detection, and forensics.'
  prefs: []
  type: TYPE_NORMAL
- en: '[*Chapter 12*](B15566_12_Final_ASB_ePub.xhtml#_idTextAnchor369), *Analyzing
    and Detecting Crypto-Mining Attacks,* introduces the basic concepts of cryptocurrency
    and crypto mining attacks. It then discusses a few ways to detect crypto mining
    attacks with open source tools such as Prometheus and Falco.'
  prefs: []
  type: TYPE_NORMAL
- en: '[*Chapter 13*](B15566_13_Final_ASB_ePub.xhtml#_idTextAnchor409), *Learning
    from Kubernetes CVEs,* discusses four well-known Kubernetes CVEs and some corresponding
    mitigation strategies. It also introduces the open source tool `kube-hunter`,
    which helps identify known vulnerabilities in Kubernetes.'
  prefs: []
  type: TYPE_NORMAL
- en: To get the most out of this book
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Before starting this book, we expect you to have a basic understanding of Kubernetes.
    While reading this book, we expect you to look at Kubernetes with a security mindset.
    This book has a lot of examples of hardening and securing Kubernetes workload
    configurations and components. In addition to trying out the examples, you should
    also reason about how these examples map to different use cases. We discuss how
    to use different open source tools in this book. We hope you spend more time understanding
    the features provided by each tool. Diving deep into different features provided
    by the tools will help you understand how to configure each tool for different
    environments:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](image/Preface_table.jpg)'
  prefs: []
  type: TYPE_IMG
- en: If you are using the digital version of this book, we advise you to type the
    code yourself or access the code via the GitHub repository (link available in
    the next section). Doing so will help you avoid any potential errors related to
    the copying/pasting of code.
  prefs: []
  type: TYPE_NORMAL
- en: Download the example code files
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: You can download the example code files for this book from your account at [www.packt.com](http://www.packt.com).
    If you purchased this book elsewhere, you can visit [www.packtpub.com/support](http://www.packtpub.com/support)
    and register to have the files emailed directly to you.
  prefs: []
  type: TYPE_NORMAL
- en: 'You can download the code files by following these steps:'
  prefs: []
  type: TYPE_NORMAL
- en: Log in or register at [www.packt.com](http://www.packt.com).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select the **Support** tab.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on **Code Downloads**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Enter the name of the book in the **Search** box and follow the onscreen instructions.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Once the file is downloaded, please make sure that you unzip or extract the
    folder using the latest version of:'
  prefs: []
  type: TYPE_NORMAL
- en: WinRAR/7-Zip for Windows
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Zipeg/iZip/UnRarX for Mac
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 7-Zip/PeaZip for Linux
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The code bundle for the book is also hosted on GitHub at [https://github.com/PacktPublishing/Learn-Kubernetes-Security](https://github.com/PacktPublishing/Learn-Kubernetes-Security).
    In case there's an update to the code, it will be updated on the existing GitHub
    repository.
  prefs: []
  type: TYPE_NORMAL
- en: We also have other code bundles from our rich catalog of books and videos available
    at [https://github.com/PacktPublishing/](https://github.com/PacktPublishing/).
    Check them out!
  prefs: []
  type: TYPE_NORMAL
- en: Code in Action
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Code in Action videos for this book can be viewed at [https://bit.ly/2YZKCJX](https://bit.ly/2YZKCJX).
  prefs: []
  type: TYPE_NORMAL
- en: Download the color images
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'We also provide a PDF file that has color images of the screenshots/diagrams
    used in this book. You can download it here: [http://www.packtpub.com/sites/default/files/downloads/9781839216503_ColorImages.pdf](http://www.packtpub.com/sites/default/files/downloads/9781839216503_ColorImages.pdf).'
  prefs: []
  type: TYPE_NORMAL
- en: Conventions used
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: There are a number of text conventions used throughout this book.
  prefs: []
  type: TYPE_NORMAL
- en: '`Code in text`: Indicates code words in text, database table names, folder
    names, filenames, file extensions, pathnames, dummy URLs, user input, and Twitter
    handles. Here is an example: "This attribute is also available in `PodSecurityContext`,
    which takes effect at the pod level."'
  prefs: []
  type: TYPE_NORMAL
- en: 'A block of code is set as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: 'When we wish to draw your attention to a particular part of a code block, the
    relevant lines or items are set in bold:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: 'Any command-line input or output is written as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: '**Bold**: Indicates a new term, an important word, or words that you see onscreen.
    For example, words in menus or dialog boxes appear in the text like this. Here
    is an example: "The screenshot shows the CPU usage of the **insecure-nginx** pod
    monitored by Prometheus and Grafana."'
  prefs: []
  type: TYPE_NORMAL
- en: Tips or important notes
  prefs: []
  type: TYPE_NORMAL
- en: Appear like this.
  prefs: []
  type: TYPE_NORMAL
