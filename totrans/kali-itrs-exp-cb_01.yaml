- en: Chapter 1. Getting Started - Setting Up an Environment
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'In this chapter, we will cover the basic tasks related to setting up Kali Linux
    for first time use. The recipes include:'
  prefs: []
  type: TYPE_NORMAL
- en: Installing Kali Linux on Cloud - Amazon AWS
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Installing Kali Linux on Docker
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Installing NetHunter on OnePlus One
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Installing Kali Linux on a virtual machine
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Customizing Kali Linux for faster package updates
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Customizing Kali Linux for faster operations
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Configuring remote connectivity services - HTTP, TFTP, and SSH
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Configuring Nessus and Metasploit
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Configuring third-party tools
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Installing Docker on Kali Linux
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Introduction
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Kali Linux was a complete revamp of the most popular Linux penetration testing
    distribution, Backtrack. Kali Linux 2.0 launched on August 11, 2015, is an improved
    version of Kali Linux, which features brand new kernel 4.0, and is based on the
    Jessie version of Debian with improved hardware and wireless driver coverage,
    support for a variety of desktop environments (GNOME, KDE, XFCE, MATE, e17, LXDE,
    and i3wm) and tools, and the list goes on.
  prefs: []
  type: TYPE_NORMAL
- en: If you are upgrading to Kali Linux 2.0 from Kali Linux, there is a good news.
    The good news is that now we have a rolling distribution. For example, the Kali
    Linux core gets updated continuously.
  prefs: []
  type: TYPE_NORMAL
- en: Kali Linux has got everything you will need for penetration testing and security
    assessment without thinking of downloading, installing, and setting up the environment
    for each tool in your arsenal. Kali Linux 2.0 includes over 300 security tools.
    You can now get the most preferred security tools by professionals all over the
    world, all at one place installed, configured, and ready to use.
  prefs: []
  type: TYPE_NORMAL
- en: All security tools have been logically categorized and mapped to the testers
    performing a combination of steps while assessing a target, for example, reconnaissance,
    scanning, exploitation, privilege escalation, maintaining access, and covering
    tracks.
  prefs: []
  type: TYPE_NORMAL
- en: Security tools are usually expensive but Kali Linux is free. The biggest advantage
    of using Kali is that it contains open source or community versions of various
    commercial security products.
  prefs: []
  type: TYPE_NORMAL
- en: 'Kali Linux 2.0 now supports even more hardware devices than ever. Since ARM-based
    systems are getting cheaper and readily available, running Kali Linux on these
    devices is now possible with ARMEL and ARMHF support. Currently, Kali Linux can
    be used for the following ARM Devices:'
  prefs: []
  type: TYPE_NORMAL
- en: Raspberry Pi (Raspberry Pi 2, Raspberry Pi A/B+, and Raspberry Pi A/B+ TFT)
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: CompuLab - Utilite and Trim-Slice
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: BeagleBone Black
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: ODROID U2/X2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Chromebook - HP, Acer and Samsung
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Cubieboard 2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: CuBox (CuBox and CuBox-i)
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Nexus 5 (Kali Nethunter)
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Odroid (U2, XU, and XU3)
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: USBArmory
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: RioTboard
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: FriendlyARM
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: BananaPi
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Installing Kali Linux on Cloud - Amazon AWS
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Almost 2 years ago, Kali Linux has been listed in Amazon EC2 Marketplace. It
    was a really good news for penetration testers, as they can setup their very own
    Kali Linux in **Amazon AWS Infrastructure** and use for penetration testing, moreover
    it is even eligible for Free Tier, wherein you can use it to set up your EC2 instance
    for $0, as long as you stay within the designated limits, which is fair enough.
  prefs: []
  type: TYPE_NORMAL
- en: The steps provided in this recipe will help you in setting up an instance running
    a Kali Linux on Amazon AWS EC2 console securely within minutes.
  prefs: []
  type: TYPE_NORMAL
- en: Getting ready
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'For this recipe, you require:'
  prefs: []
  type: TYPE_NORMAL
- en: An Amazon AWS Account
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Minimum 2 GB RAM, if you want to run Metasploit
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: How to do it...
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Perform the following steps for this recipe:'
  prefs: []
  type: TYPE_NORMAL
- en: Once you have the Amazon AWS account created, login to [https://aws.amazon.com](https://aws.amazon.com)
    and navigate to **Amazon Web Services** dashboard as shown in the following screenshot.
    Go to **EC2** | **Launch Instance**:![How to do it...](img/image_01_001.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You will need to select **Amazon Machine Image (AMI)** as shown in the following
    screenshot:![How to do it...](img/image_01_002.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on the **AWS Marketplace** option and search for Kali Linux on **AWS Marketplace**
    as shown in the following screenshot:![How to do it...](img/image_01_003.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on **Select** and then click on **Continue** as shown in the following
    screenshot:![How to do it...](img/image_01_004-1.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Now you are on the screen displayed in step 2\. Here you can select an instance
    type; be informed that only **t1.micro** and **t2.micro** will be eligible for
    free tier. However, running Metasploit requires minimum 2 GB RAM. For this you
    can opt for **t2.small** or**t2.medium** as per your budget as shown in the following
    screenshot:![How to do it...](img/image_01_005-1.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on **Review and Launch**. You will see a popup window asking you to use
    SSD as your boot volume. Select **Make general purpose (SSH)...(recommended)**
    and click on **Next**, as shown in the following screenshot:![How to do it...](img/image_01_006-1.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You will be directly taken to step 7 for review, as shown in the following screenshot:![How
    to do it...](img/image_01_007.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You will first see the warning, which is to improve your instance security;
    click on **6\. Configure Security Group**, as shown in the following screenshot:![How
    to do it...](img/image_01_008-1.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on the **Source** listbox and select **My IP**, it will automatically
    detect your public IP range. Click on **Review and Launch**. Note that it would
    only work if you have a dedicated public IP. If you have a dynamic IP, you will
    need to login back to the AWS console and allow your updated IP address:![How
    to do it...](img/image_01_009-1.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: As you can see, there is a warning that says you are not eligible for free usage
    tier since we have selected **m2.medium** for minimum 2GB RAM:![How to do it...](img/image_01_010-1.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on **Launch**; here you need to create a new key pair before and download
    it before you can proceed, as shown in the following screenshot:![How to do it...](img/image_01_011-1.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Once you have downloaded the key pair, go ahead and click on **Launch Instances**,
    as shown in the following screenshot:![How to do it...](img/image_01_012-1.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: How it works...
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '**EC** in EC2 stands for **elastic computing**, and the short answer is bringing
    up a virtual server in the cloud. Amazon AWS has a collection of all the popular
    OS images already available and all you need to do is select the one you need
    for your requirement, followed by the hardware requirement. Based on your OS and
    the hardware configuration you selected, AWS will provision that hardware configuration
    and install that OS. You can select the type of storage you want, traditional
    or SSD, and then attach/de-attach the hard drive based on your requirement. Best
    of all, you only pay for the time you want to use it, and when you stop the EC2
    machine, AWS will free up those resources and add them back its stock, that''s
    how flexible AWS is. Now, it''s time for a quick recap of what we did in this
    recipe. As a prerequisite, you need to first create an amazon AWS account, which
    is very easy to create. Then, step 1 shows you how to select EC2\. Steps 2 and
    3 show how to search and select Kali Linux''s minimal image. In step 4, you get
    to read everything that Kali Linux AMI has to offer, the basic requirements and
    the user login information. Step 5 shows you how to select an instance type depending
    on your requirement and budget. In steps 6 to 7 you will go through the simple
    wizard while choosing the default recommended SSD to boot from. Step 8 shows you
    the final page with warnings and points you should take care of or be aware of.
    In step 9, you choose to set up a security group on SSH protocol port `22` only
    to allow you from a specific IP range that belongs to you. In step 10, you are
    shown the review page, where based on your instance type selection it informs
    you whether you are eligible for free tier or not. In step 11, you create a new
    SSH Key pair and download it on your local machine. In step 12, you finally click
    on launch to start the instance.'
  prefs: []
  type: TYPE_NORMAL
- en: There's more...
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Having Kali Linux installed in Amazon AWS infrastructure with a public IP address,
    with just few clicks, can prove to be very helpful during external penetration
    testing. As you know, we have selected and installed Kali Linux's minimal image
    for use in AWS infrastructure, due to which our installation does not have any
    tools installed by default.
  prefs: []
  type: TYPE_NORMAL
- en: In our next recipe, we will cover how to use SSH and setup Kali Linux on Amazon
    AWS box for use. In this recipe, we will also solve few problems that you might
    face while updating the repository and installing Kali Linux tools and setting
    up GUI and installing all the required tools we will need for use.
  prefs: []
  type: TYPE_NORMAL
- en: Installing Kali Linux on Docker
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: I think a little introduction about Docker is justified here. Docker is a new
    open source container technology, released in March 2013 that automates the deployment
    of applications inside self-sufficient software containers. Docker (built on top
    of Linux containers) provides a much simpler way of managing multiple containers
    on a single machine. Think of it as a virtual machine but it is more lightweight
    and efficient.
  prefs: []
  type: TYPE_NORMAL
- en: The beauty of this is that you can install Kali Linux on almost any system,
    which can run Docker. Let's say, for example, you want to run Kali on Digital
    Ocean droplet but it does not let you spin-off a Kali Linux directly like it does
    for Ubuntu. But now, you can simply spin-off Ubuntu or centos on digital ocean
    and install Docker on it and pull the Kali Linux Docker image and you are good
    to go.
  prefs: []
  type: TYPE_NORMAL
- en: Since Docker provides another layer of abstraction, it is beneficial from security
    standpoint as well. Let's say, if you are running an apache server that is hosting
    an application, you can simply create a Docker container for this and run it.
    Even if your application gets compromised, the attacker would be self-contained
    within the Docker image only and will not be able to harm your host operating
    system.
  prefs: []
  type: TYPE_NORMAL
- en: Having said all that, now with installing Docker on your machine, for the purpose
    of demonstration we will be installing Docker on a Mac operating system.
  prefs: []
  type: TYPE_NORMAL
- en: Getting ready
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'For this recipe, you will need the following things:'
  prefs: []
  type: TYPE_NORMAL
- en: Connection to the Internet
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: An installed Virtualbox
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: How to do it...
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Perform the following steps for this recipe:'
  prefs: []
  type: TYPE_NORMAL
- en: To install Docker on Mac operating system, you need to download and install
    Docker toolbox from [https://www.docker.com/docker-toolbox](https://www.docker.com/docker-toolbox)
    . On running this installer on your mac, you will setup the Docker environment;
    the toolbox will install Docker Client, Machine, Compose (Mac only), Kitematic
    and VirtualBox.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Once the installation is done, go to **Applications** | **Docker** | **Docker
    Quickstart Terminal.app** or simply open the Launchpad and click on Docker Quickstart,
    When you double-click on the application, you will see the terminal window as
    shown in the following screenshot:![How to do it...](img/image_01_013-1.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'To check whether your installation has succeeded, you can run the following
    command:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: 'You will see the following output if your installation succeeded:'
  prefs: []
  type: TYPE_NORMAL
- en: '![How to do it...](img/image_01_014-1.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Now, let's go to Docker hub ( [https://hub.docker.com](https://hub.docker.com)
    ) and search for `Kali Linux` image, as shown in the following screenshot:![How
    to do it...](img/image_01_015-1.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'As you can see, the official Kali image is available; we will use the following
    command to pull and run it in our Docker:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: Now, you have your minimal base version of Kali Linux running in Docker; there
    are no tools added to this image, you can install them as per your need or you
    can refer to [https://www.kali.org/news/kali-linux-metapackages/](https://www.kali.org/news/kali-linux-metapackages/)
    .
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Let's say, you just want to run only Metasploit; for that you can search for
    `kali Metasploit` image on the hub and install the one with the highest number
    of pulls so far, as shown in the following screenshot:![How to do it...](img/image_01_016-1.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Pull the image using the following command; but before you do that, note that
    this is not an official image. Therefore, it is at your discretion whether you
    want to trust this image:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: 'Then, run the Docker image with the `docker run` command as shown:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: 'The output will be as shown in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![How to do it...](img/image_01_017-1.jpg)'
  prefs: []
  type: TYPE_IMG
- en: 'Once the framework is prepared it is unpacked and executed, it should look
    as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '![How to do it...](img/image_01_018-1.jpg)'
  prefs: []
  type: TYPE_IMG
- en: 'As you can see, you have Metasploit updated and running. But this is not it;
    all the changes you have made are not permanent, until you commit the changes.
    Once you commit the changes, you can pick up next time from where you left off.
    To commit the changes, open another console window and type the following command:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs: []
  type: TYPE_PRE
- en: On running this command, you will see the following output, as shown in the
    following screenshot:![How to do it...](img/image_01_019.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'To commit the changes, you need to enter the command in the following format:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE5]'
  prefs: []
  type: TYPE_PRE
- en: 'On successful commit, you will see the following output:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE6]'
  prefs: []
  type: TYPE_PRE
- en: How it works...
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: In this recipe, we need Virtualbox already installed as a prerequisite, and
    we downloaded and installed the Docker toolbox. Once Docker toolbox is installed,
    simply open the **Docker Quickstart Terminal.app** and pull the image you want
    to run, you can search for the desired image from [https://hub.docker.com](https://hub.docker.com)
    and use the `docker run` command to run it. Once you have performed your operations,
    simply commit the changes with the `docker commit` command.
  prefs: []
  type: TYPE_NORMAL
- en: Here, we have used the `-i` and `-t` switches. For interactive processes (such
    as a shell), you must use `-i` `-t` together in order to allocate a **teletype**
    (**TTY**) for the container process. The`-i` `-t` switches is often written `-it`.
  prefs: []
  type: TYPE_NORMAL
- en: There's more...
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: You can learn more about Docker at [https://www.docker.com](https://www.docker.com)
    . To search for public images, you can visit [https://hub.docker.com](https://hub.docker.com)
    . To install Kali Linux meta-packages, you can visit [https://www.kali.org/news/kali-linux-metapackages/](https://www.kali.org/news/kali-linux-metapackages/)
    .
  prefs: []
  type: TYPE_NORMAL
- en: Installing NetHunter on OnePlus One
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Kali Linux NetHunter is the first open source network pen testing platform for
    nexus and one plus devices. In this chapter, we will see how to install Kali Linux
    NetHunter on One Plus One.
  prefs: []
  type: TYPE_NORMAL
- en: Before we begin, make sure you backup your device data before proceeding to
    do any of the following.
  prefs: []
  type: TYPE_NORMAL
- en: Getting ready
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'In order to commence with this, you will require the following:'
  prefs: []
  type: TYPE_NORMAL
- en: A OnePlus One device, 64 GB
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: A USB cable
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Any Windows operating system
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: NetHunter Windows Installer
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Active Internet connection
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: How to do it...
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Perform the following steps for this recipe:'
  prefs: []
  type: TYPE_NORMAL
- en: Download the Kali NetHunter Windows Installer at [http://www.nethunter.com/download/](http://www.nethunter.com/download/)
    , you will see the following page:![How to do it...](img/image_01_020.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Install the downloaded setup, as shown in the following screenshot:![How to
    do it...](img/image_01_021.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Once the installation is complete, run the shortcut created on the desktop:![How
    to do it...](img/image_01_022.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Once the application loads, make sure you check for any updates. If there are
    none, click on the **Next** button:![How to do it...](img/image_01_023.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Now we will select the device for rooting. Our recipe sticks to OnePlus, so
    let's select the **ONEPLUSONE-BACON (A0001) - 64GB** option and click on **Next**:![How
    to do it...](img/image_01_024.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Now we will be prompted to install drivers, these are drivers for the laptop/PC
    to communicate with the mobile device over a USB connection. Click on **Install****Drivers...**
    to commence the installation process. Once the installation is done, click on
    **Test Drivers...** to make sure that the drivers are working correctly, as shown
    in the following screenshot:![How to do it...](img/image_01_025.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Once the drivers are installed correctly, proceed by clicking on **Next** and
    now we will come across the installer configuration. Here, it is recommended to
    proceed with **Install Official Kali Linux NetHunter**. In case you have a custom
    NetHunter, proceed with the second option but be careful with the compatibility
    issues:![How to do it...](img/image_01_026.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Clicking on **Next**, we will be coming on the **Download Files** option where
    the application will determine the available packages with us and the missing
    files can be obtained with the help of the **Download + Update All File Dependencies**
    option. In case you get stuck or any file is not getting downloaded, you can simply
    Google the filename and download it and put it in the folder where the application
    was installed:![How to do it...](img/image_01_027.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Once all the dependencies are made available, make sure you do the following:![How
    to do it...](img/image_01_028.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: After this has been done, we can proceed with unlocking the bootloader. Click
    on **Unlock Device Bootloader**. Make sure to back up all the important data from
    the device before you start from this point onwards:![How to do it...](img/image_01_029.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The phone will go in the **Fastboot** mode and proceed with its unlocking. Once
    that is done, proceed to the next step of flashing the stock ROM. This is a new
    ROM that will be mounted on your device to keep the compatibility with Kali Linux
    NetHunter. Click on **Flash Stock...** as shown in the following screenshot:![How
    to do it...](img/image_01_030.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Once the flash stock is done, proceed to the next step and click on **Flash
    Kali Linux + Root!**, as shown in the following screenshot:![How to do it...](img/image_01_031.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The preceding step will get the Kali Linux NetHunter in your device. Once successful,
    the device will go into the TWRP recovery mode.
  prefs: []
  type: TYPE_NORMAL
- en: In the Recovery mode, click on **Reboot** and it will ask that Super user is
    not installed Swipe to install once the swipe is done the Kali linux will boot.
    Now, click on **SuperSU** and see whether it is working:![How to do it...](img/image_01_032.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Download **BusyBox** by Stephen (Stericson) and install, as shown in the following
    screenshot:![How to do it...](img/image_01_033.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on the icon called **NetHunter**, as shown in the following screenshot:![How
    to do it...](img/image_01_034.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Once you get the application running, you will be asked to grant root permissions.
    Click on **Grant** and commence to the Kali Launcher and then the terminal, as
    shown in the following screenshot:![How to do it...](img/image_01_035.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select the Kali terminal and launch **Metasploit**, as shown in the following
    screenshot:![How to do it...](img/image_01_036.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Launch **msfconsole** on the device:![How to do it...](img/image_01_037.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: How it works...
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: In this recipe, we have shown how you can install Kali Linux, which is called
    NetHunter. NetHunter is ARM which was ported to run on a non-intel processor,
    which is built on your trusted Kali Linux and tool sets. The Kali Linux NetHunter
    project is an open source Android penetration testing platform for ARM devices,
    created as a joint effort between the Kali community member **BinkyBear** and
    Offensive Security.
  prefs: []
  type: TYPE_NORMAL
- en: There's more...
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: We installed Kali NetHunter on our device and now we can perform our pen testing
    from OnePlus one, which is highly efficient in case of red team exercises, social
    engineering, or during physical security assessment.
  prefs: []
  type: TYPE_NORMAL
- en: More information for the same can be found at [http://www.nethunter.com](http://www.nethunter.com)
    .
  prefs: []
  type: TYPE_NORMAL
- en: Installing Kali Linux on a virtual machine
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Installing Kali Linux on a hard disk is the first step. The process of installing
    Kali Linux on a physical hard disk or on Virtual Hard Disk is absolutely similar.
    So, feel free to use the same steps to install Kali Linux on your physical machine.
    Needless to say that by using this method only Kali Linux 2.0 will be installed
    on your hard disk as the primary operating system.
  prefs: []
  type: TYPE_NORMAL
- en: Getting ready
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Before installing Kali Linux, you will require Kali Linux Latest ISO Image,
    which can be downloaded from [https://www.kali.org/downloads/](https://www.kali.org/downloads/)
    .
  prefs: []
  type: TYPE_NORMAL
- en: How to do it...
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Perform the following steps for this recipe:'
  prefs: []
  type: TYPE_NORMAL
- en: Open VMware on your macOS and press *command* + *N*, once the same is done we
    will see something like the following screenshot:![How to do it...](img/image_01_038-1.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select **Install from disc or image** and click on **Continue**:![How to do
    it...](img/image_01_039-1.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Drag and drop the Kali Linux 2.0 ISO, which you have just downloaded, as shown
    in the following screenshot:![How to do it...](img/image_01_040-1.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select **Debian 5 64bit** and click on **Continue**, as shown in the following
    screenshot:![How to do it...](img/image_01_041-1.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on **Customize Setting** and select the desired location to save your
    virtual machine:![How to do it...](img/image_01_042-1.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: After saving, VMware opens **Debian settings**. Open **Processors & Memory**
    and increase the RAM size to 4 GB (or based on the memory available in your laptop).
    Remember that Metasploit requires minimum 2GB of RAM to run as a prerequisite:![How
    to do it...](img/image_01_043-1.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Close the window and click on **Start** and then click inside the window. The
    cursor control will go to **Guest VM**. Scroll down and select **Graphical install**
    as shown in the following screenshot:![How to do it...](img/image_01_044-1.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select your preferred language and click on **Continue** (we chose **English**):![How
    to do it...](img/image_01_045-1.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select your country (we chose **United States**):![How to do it...](img/image_01_046-1.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select your keyboard configuration (we selected **American English**):![How
    to do it...](img/image_01_047-1.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Next, we need to configure the basic network services. Enter your preferred
    hostname (we named it `Intrusion-Exploitation`):![How to do it...](img/image_01_048-1.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Next, enter the domain name of your choice (we entered `kali.example.com`):![How
    to do it...](img/image_01_049-1.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The most important step is to enter your root password, and make sure you have
    a strong password, and that you don't forget it (use a combination of A-Z, a-z,
    0-9, and special characters):![How to do it...](img/image_01_050-1.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: In the next screen, you select your time zone (we chose **Eastern**):![How to
    do it...](img/image_01_051-1.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Next, you will be shown four options to choose from; if you have a preferred
    way of partitioning disk, you can select **Manual**. However, for easy partitioning,
    we will be using **Guided - Use Entire Disk**:![How to do it...](img/image_01_052-1.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: On the screen, you will be prompted that the entire disk space will be formatted,
    click on **Continue**:![How to do it...](img/image_01_053-1.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Next, you will be shown three options. Since we are only going to use it for
    penetration testing and not as a server or main desktop operating system, it is
    safe to select **All files in one partition**:![How to do it...](img/image_01_054-1.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You will be shown a summary of changes to be made on your disk. Select **Finish
    Partitioning and write changes to the disk** and click on **Continue**:![How to
    do it...](img/image_01_055-1.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select **Yes** and click on **Continue**:![How to do it...](img/image_01_056-1.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Next, you will be asked to configure your package manager using a network mirror.
    It allows you to update your Kali tools collection as and when they are available,
    and, in our case, we selected **Yes**:![How to do it...](img/image_01_057-1.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Next, you can enter if you have any proxy server in your network. If not, you
    can simply skip and click on **Continue**:![How to do it...](img/image_01_058-1.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Finally, you will be asked to install GRUB Bootloader to/Dev/SDA- Master Boot
    Record; select **Yes** and click on **Continue**:![How to do it...](img/image_01_059-1.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Finally, you will be asked to manually enter the device or `/dev/sda`; select
    `/dev/sda` and click on **Continue**:![How to do it...](img/image_01_060-1.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: If you see the preceding screen, it means that you have made it till the end
    and Kali installation is complete. Congratulations! Click on **Continue** and
    your system will be rebooted to bring you fresh installed Kali Linux.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: How it works...
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: In this recipe, we inserted the Kali Linux ISO and started the graphical install.
    During the graphical install, we started configuring with our preferred language,
    keyboard language, country, and timezone. From step 5 onwards, we entered the
    hostname for our Kali Linux and in step 6, we entered the domain name for our
    Kali Linux.
  prefs: []
  type: TYPE_NORMAL
- en: From steps 9 to 13, we configured the hard disk partition to use the entire
    disk for installation and created one partition for all folders since we will
    only be using it for penetration testing. Once the installation is finished, step
    14 onwards we configured Kali to use network mirrors for faster updates, configured
    any network proxy (if required) and finally installed GRUB bootloader.
  prefs: []
  type: TYPE_NORMAL
- en: Customizing Kali Linux for faster package updates
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Kali contains more than 300 security tools and system binaries. After installing
    Kali Linux, first thing you would need to do is update the Kali Linux to get the
    latest collection of security tools and features. Since Kali is based on Debian
    Linux, you can use the `apt-get update` command to update the repositories for
    the binaries and tools.
  prefs: []
  type: TYPE_NORMAL
- en: 'However, at times while updating Kali Linux, you will notice that updates can
    be slow regardless of your Internet speed and bandwidth. In this recipe, we will
    show you how you can update your source file, which your package manager refers
    to, for faster package updates:'
  prefs: []
  type: TYPE_NORMAL
- en: Getting ready
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: For this recipe, you will need a connection to the Internet with a valid IP
    address.
  prefs: []
  type: TYPE_NORMAL
- en: How to do it...
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Perform the following steps for this recipe:'
  prefs: []
  type: TYPE_NORMAL
- en: 'Open the terminal and use an editor to open the `sources.list` file:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE7]'
  prefs: []
  type: TYPE_PRE
- en: 'The default `sources.list` file looks like:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE8]'
  prefs: []
  type: TYPE_PRE
- en: 'All you need to do is to change `http` to `repo` as shown in the following
    code:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE9]'
  prefs: []
  type: TYPE_PRE
- en: Make the following changes, save the file, and exit the editor by pressing the
    *Esc* key and then type `wq!` and press *Enter*.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Now, update and upgrade your Kali using the following command; you will notice
    the difference in speed:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE10]'
  prefs: []
  type: TYPE_PRE
- en: How it works...
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Kali Linux has multiple different mirrors around the world. Based on your IP
    address location, it automatically selects the mirror closest to your location.
    Due to various reasons, these mirrors may become slow over a period of time. You
    can find the list of mirrors closest to your location at [http://http.kali.org/README.mirrorlist](http://http.kali.org/README.mirrorlist)
    . The `apt-get` command takes the list of update servers from `/etc/apt/sources.list`.
    Changes made to the `sources.list` files ensures that our Kali connects to the
    correct servers and gets served with faster updates.
  prefs: []
  type: TYPE_NORMAL
- en: Customizing Kali Linux for faster operations
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: You will be using your Kali Linux during audits and penetration testing. You
    would need your Kali Linux to be configured and customized for highest speed possible
    during those crucial testing processes. In this recipe, we will show you several
    tools that can used to optimize your Kali Linux experience.
  prefs: []
  type: TYPE_NORMAL
- en: Getting ready
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: For this recipe, you will need connection to the Internet.
  prefs: []
  type: TYPE_NORMAL
- en: How to do it...
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Perform the following steps for this recipe:'
  prefs: []
  type: TYPE_NORMAL
- en: 'Preload is a program written by Behdad Esfahbod, which runs as a daemon. This
    application closely observes the usage of frequently used applications and binaries
    and loads into memory when the system is idle. This results in faster start-up
    time because less data is fetched from the disk. You can read more about this
    application at [https://wiki.archlinux.org/index.php/Preload](https://wiki.archlinux.org/index.php/Preload)
    . To install the application, issue the following command on the terminal window:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE11]'
  prefs: []
  type: TYPE_PRE
- en: BleachBit quickly frees disk space and tirelessly guards your privacy. Frees
    cache, deletes cookies, clears Internet history, shreds temporary files, deletes
    logs, and discards junk that you didn't know existed. You can read more about
    this application at [http://bleachbit.sourceforge.net/](http://bleachbit.sourceforge.net/)
    .
  prefs: []
  type: TYPE_NORMAL
- en: 'To install the application, issue the following command on the terminal window:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE12]'
  prefs: []
  type: TYPE_PRE
- en: By default, Kali does not show all applications and scripts, which are there
    in the startup menu. Every application you installed ultimately slows down the
    booting process by starting up even if it is required or not. You can install
    Boot-Up manager and keep a close eye on what services and applications are allowed
    during the booting process. You can always disable the unnecessary services and
    applications to increase the booting speed of your Kali.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'To install the application, issue the following command on the terminal window:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE13]'
  prefs: []
  type: TYPE_PRE
- en: How it works...
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: In this recipe, we have used the `apt-get` command to install the basic system
    utilities, which can help us manage our Kali Linux resources well during our pen
    testing by keeping our Kali Linux process and start up folders optimized for highest
    performance.
  prefs: []
  type: TYPE_NORMAL
- en: Configuring remote connectivity services - HTTP, TFTP, and SSH
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: During penetration testing and auditing, we will be required to deliver payload
    on target machines from our Kali Linux. For that purpose, we will leverage basic
    network services such as HTTP, FTP, and SSH. Services such as HTTP and SSH are
    installed by default in Kali Linux but Kali does not enable any network services
    to minimize detection.
  prefs: []
  type: TYPE_NORMAL
- en: 'In this recipe, we will show you how to configure and start running services
    securely:'
  prefs: []
  type: TYPE_NORMAL
- en: Getting ready
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: For this recipe, you will need a connection to the Internet with a valid IP
    address.
  prefs: []
  type: TYPE_NORMAL
- en: How to do it...
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Perform the following steps for this recipe:'
  prefs: []
  type: TYPE_NORMAL
- en: 'Let''s begin with starting an Apache webserver. To start the Apache service,
    use the following command:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE14]'
  prefs: []
  type: TYPE_PRE
- en: 'You can verify that the service is running by browsing to the localhost using
    a browser as shown in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![How to do it...](img/image_01_061.jpg)'
  prefs: []
  type: TYPE_IMG
- en: 'To start the SSH service, SSH keys needs to be generated. Back in Backtrack
    r5, you used to generate SSH keys using the `sshd-generate` command, which is
    not available in Kali Linux. Using default SSH keys is a security risk and therefore
    a new SSH key should be generated. To generate SSH keys, you can either delete
    or backup your default keys generated by Kali Linux:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE15]'
  prefs: []
  type: TYPE_PRE
- en: 'First, we need remove run levels for SSH by issuing the following command:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE16]'
  prefs: []
  type: TYPE_PRE
- en: 'Now we need to load the default SSH run level by issuing the following command:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE17]'
  prefs: []
  type: TYPE_PRE
- en: 'Regenerate the keys:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE18]'
  prefs: []
  type: TYPE_PRE
- en: You can check whether the SSH key hashes are different now:![How to do it...](img/image_01_062.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Start the SSH service using the following command:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE19]'
  prefs: []
  type: TYPE_PRE
- en: 'You can verify that the service is running using the `netstat` command:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE20]'
  prefs: []
  type: TYPE_PRE
- en: 'Start the FTP server using the following command:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE21]'
  prefs: []
  type: TYPE_PRE
- en: 'To verify that the service is running, use the following command:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE22]'
  prefs: []
  type: TYPE_PRE
- en: 'To stop any service, you can use the following command:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE23]'
  prefs: []
  type: TYPE_PRE
- en: 'Here, `<servicename>` is the name of service required to terminate:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE24]'
  prefs: []
  type: TYPE_PRE
- en: How it works...
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: In this recipe, we have configured and started basic network services, which
    we will be using to deliver payloads to our victim machines depending on the scenario.
    We have started HTTP service, FTP service, and we have backed up default SSH keys
    and generated new SSH keys, and started the SSH service.
  prefs: []
  type: TYPE_NORMAL
- en: Configuring Nessus and Metasploit
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In this recipe, we will show you how to install, configure, and start running
    Nessus and Metasploit.
  prefs: []
  type: TYPE_NORMAL
- en: Getting ready
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: For this recipe, we will be downloading Nessus home feed and register for a
    valid license.
  prefs: []
  type: TYPE_NORMAL
- en: How to do it...
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Perform the following steps for this recipe:'
  prefs: []
  type: TYPE_NORMAL
- en: Open Firefox and go to [http://www.tenable.com/products/nessus/select-your-operating-system](http://www.tenable.com/products/nessus/select-your-operating-system)
    and select the home version. On the next page, select the operating system as
    **Debian 6 and 7** (as Kali is based on Debian Jessie) as shown in the following
    screenshot:![How to do it...](img/image_01_063.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'To install the Nessus, open the following command in the terminal and type:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE25]'
  prefs: []
  type: TYPE_PRE
- en: Now, your Nessus has been installed as shown in the following screenshot:![How
    to do it...](img/image_01_064.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Once the installation is complete, start the Nessus service using the following
    command:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE26]'
  prefs: []
  type: TYPE_PRE
- en: Open the link `https://kali:8834` as shown in the following screenshot:![How
    to do it...](img/image_01_065.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: By default, during installation, Nessus is configured for using self-signed
    certificates to encrypt the traffic between your browser and the Nessus server;
    therefore, you are seeing the page shown in the preceding screenshot. If you have
    downloaded the Nessus from a tenable website, you can consider it safe to click
    on **I understand the risk and accept the certificate** to continue and you will
    see the following page:![How to do it...](img/image_01_066.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on **Continue**, and you will be shown the initial account setup page,
    as shown in the following screenshot:![How to do it...](img/image_01_067.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Enter the username and password combination you want to create and click on
    **Continue**. On the next page, you will be required to enter the activation code
    as shown in the following screenshot:![How to do it...](img/image_01_068.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: To obtain the activation, go to [http://www.tenable.com/products/nessus-home](http://www.tenable.com/products/nessus-home)
    and fill the form on the right-hand side of the page to receive the activation
    code. You will receive your activation code on your e-mail account. Copy the activation
    and enter it on this screen and continue:![How to do it...](img/image_01_069.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Now, the Activation has been completed and Nessus will update the plugins and
    the tool will be ready for your use.
  prefs: []
  type: TYPE_NORMAL
- en: 'We now have Nessus in place. So, let''s set up Metasploit. Metasploit is installed
    by default during OS installation. To invoke, you will need to start the following
    services:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE27]'
  prefs: []
  type: TYPE_PRE
- en: Metasploit will be started as shown in the following screenshot:![How to do
    it...](img/image_01_070.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: How it works...
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: In this recipe, we have downloaded Nessus home feed and started the service.
    We completed the basic initial account setup and entered the account activation
    key to activate our home feed version of Nessus and finally updated the plugins.
  prefs: []
  type: TYPE_NORMAL
- en: Later on, we turned on PostgreSQL and Metasploit services, and finally, using
    `msfconsole` we started an instance of Metasploit.
  prefs: []
  type: TYPE_NORMAL
- en: There's more...
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Nessus is a vulnerability scanner and Metasploit is an exploitation framework
    from Rapid7\. However, most network environments require only vulnerability assessment
    and not in-depth exploitation. But, if in some cases it is needed, Metasploit
    is one of the best frameworks available. Similar to Nessus, Rapid7 has also launched
    their own vulnerability scanner called **Nexpose**. Nexpose can be configured
    to be integrated with Metasploit, which allows Metasploit to use NexPose for vulnerability
    scanning and select exploits based on the information gathered by Nexpose and
    thus it provides better experience as compared to using Nessus with Metasploit.
    For more information, visit [http://www.rapid7.in/products/nexpose/](http://www.rapid7.in/products/nexpose/)
    .
  prefs: []
  type: TYPE_NORMAL
- en: Configuring third-party tools
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In this recipe, we will install some basic third-party tools, which were there
    as part of Backtrack 5 or can be a good addition to the pen testing toolbox.
  prefs: []
  type: TYPE_NORMAL
- en: Getting ready
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: For this recipe, you will need a connection to the Internet.
  prefs: []
  type: TYPE_NORMAL
- en: How to do it...
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Perform the following steps for this recipe:'
  prefs: []
  type: TYPE_NORMAL
- en: Lazy Kali is a Bash script that is created to automate the Kali updates and
    install all other third-party tools that you might require to make Kali as your
    default operating system. You can read more about this script at [https://code.google.com/p/lazykali/](https://code.google.com/p/lazykali/)
    .
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'To download and install this script, issue the following command on the terminal
    window:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE28]'
  prefs: []
  type: TYPE_PRE
- en: When you run the `lazykali.sh` script, it shows you if the script is already
    installed, and if not, you can install it as shown in the following screenshot:![How
    to do it...](img/image_01_071.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: After self-updating the script, continue and you will see the following screen:![How
    to do it...](img/image_01_072.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Next, enter `6` to install extra tools:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Then, choose `Select All`. It will then install all the tools that will be required
    in the further recipes.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: How it works...
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: In this recipe, we have downloaded the `lazykali.sh` script, which we have used
    to download further third-party tools, which we will be using in our further recipes.
  prefs: []
  type: TYPE_NORMAL
- en: Installing Docker on Kali Linux
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In this recipe, we will be to installing and setting-up Docker on Kali Linux.
  prefs: []
  type: TYPE_NORMAL
- en: Getting ready
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: To step through this recipe, you will need a running Kali Linux in Oracle Virtualbox
    or VMware, and an Internet connection. No other prerequisites are required.
  prefs: []
  type: TYPE_NORMAL
- en: How to do it...
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'For this recipe, you need to perform the following steps:'
  prefs: []
  type: TYPE_NORMAL
- en: At the time of writing this book, Kali Linux 2.0 Rolling is based on Debian
    Wheezy and therefore these steps will only work for Debian Wheezy based Kali Linux.
    In future, if Kali is updated, then kindly check the latest steps to install Docker
    from the Docker documentation.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: In your terminal window open `/etc/apt/sources.list.d/backports.list` in your
    favorite editor. If the file doesn't exist, create it.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Remove any existing entries and add an entry for backports on Debian wheezy:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE29]'
  prefs: []
  type: TYPE_PRE
- en: 'Update the package information and ensure that APT works with the HTTPS method,
    and that CA certificates are installed:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE30]'
  prefs: []
  type: TYPE_PRE
- en: 'Add the GPG key:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE31]'
  prefs: []
  type: TYPE_PRE
- en: Open `/etc/apt/sources.list.d/docker.list` in your favorite editor. If the file
    doesn't exist, create it.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Remove any existing entries and add an entry for backports on Debian wheezy:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE32]'
  prefs: []
  type: TYPE_PRE
- en: 'Update the package information and verify that APT is pulling from the right
    repository:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE33]'
  prefs: []
  type: TYPE_PRE
- en: 'Install Docker:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE34]'
  prefs: []
  type: TYPE_PRE
- en: 'Start the Docker daemon:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE35]'
  prefs: []
  type: TYPE_PRE
- en: 'Verify that Docker is installed properly:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE36]'
  prefs: []
  type: TYPE_PRE
- en: Since, you're already logged in as `root` in your Kali Linux installation, you
    don't need to use `sudo`. But it is important to note that the `docker` daemon
    always runs as the `root` user and the `docker` daemon binds to a Unix socket
    instead of a TCP port. By default, that Unix socket is owned by the user `root`,
    and so, you will need to use the preceding commands with `sudo`, if you are not
    logged in as root.
  prefs: []
  type: TYPE_NORMAL
- en: How it works...
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: In this recipe, we have added the `docker` source list so that we can fetch
    the Docker updates every time we use the `apt-get update` command on our system.
    Then, update the `apt-get` sources and install the prerequisites required for
    installing Docker. We added the `GPG` key to ensure that whatever updates we are
    installing are valid official unchanged packages. After all this basic configuration,
    we ran a basic `apt-cache` to ensure APT is fetching the docker-engine from the
    right repository. Finally, we installed `docker-engine` using `apt-get`.
  prefs: []
  type: TYPE_NORMAL
