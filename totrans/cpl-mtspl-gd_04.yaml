- en: Information Gathering with Metasploit
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Information gathering and enumeration are the initial stages of penetration
    testing life cycle. These stages are often overlooked, and people directly end
    up using automated tools in an attempt to quickly compromise the target. However,
    such attempts are less likely to succeed.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
- en: '"Give me six hours to chop down a tree and I will spend the first four sharpening
    the axe."'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
- en: '- Abraham Lincoln'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
- en: This is a very famous quote by Abraham Lincoln which is applicable to penetration
    testing as well! The more efforts you take to gather information about your targets
    and enumerate them, the more likely you are to succeed with compromise. By performing
    comprehensive information gathering and enumeration, you will be presented with
    wealth of information about your target, and then you can precisely decide the
    attack vector in order to compromise the same.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
- en: 'The Metasploit Framework provides various auxiliary modules for performing
    both passive and active information gathering along with detailed enumeration.
    This chapter introduces some of the important information gathering and enumeration
    modules available in the Metasploit Framework:'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
- en: 'The topics to be covered are as follows:'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
- en: Information gathering and enumeration on various protocols
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Password sniffing with Metasploit
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Advanced search using Shodan
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Information gathering and enumeration
  id: totrans-10
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In this section, we'll explore various auxiliary modules within the Metasploit
    Framework that can be effectively used for information gathering and enumeration
    of various protocols such as TCP, UDP, FTP, SMB, SMTP, HTTP, SSH, DNS, and RDP.
    For each of these protocols, you will learn multiple auxiliary modules along with
    the necessary variable configurations.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
- en: Transmission Control Protocol
  id: totrans-12
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '**Transmission Control Protocol** (**TCP**) is a connection-oriented protocol
    and ensures reliable packet transmission. Many of the services such as Telnet,
    SSH, FTP, and SMTP make use of the TCP protocol. This module performs a simple
    port scan against the target system and tells us which TCP ports are open.'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
- en: 'Its auxiliary module name is `auxiliary/scanner/portscan/tcp`, and you will
    have to configure the following parameters:'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
- en: '**RHOSTS**: IP address or IP range of the target to be scanned'
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**PORTS**: Range of ports to be scanned'
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'We can see this auxiliary module in the following screenshot:'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/82886ff3-e9fb-483e-bfa4-061f96663291.jpg)'
  id: totrans-18
  prefs: []
  type: TYPE_IMG
- en: User Datagram Protocol
  id: totrans-19
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '**User Datagram Protocol** (**UDP**) is lightweight compared to TCP, however,
    not as reliable as TCP. UDP is used by services such as SNMP and DNS. This module
    performs a simple port scan against the target system and tells us which UDP ports
    are open.'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
- en: 'Its auxiliary module name is `auxiliary/scanner/discovery/udp_sweep`, and you
    will have to configure the following parameters:'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
- en: '**RHOSTS**: IP address or IP range of the target to be scanned'
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'We can see this auxiliary module in the following screenshot:'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/c2bccbaa-6851-417e-aa48-393dc9d23d2d.jpg)'
  id: totrans-24
  prefs: []
  type: TYPE_IMG
- en: File Transfer Protocol
  id: totrans-25
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '**File Transfer Protocol** (**FTP**) is most commonly used for file sharing
    between the client and server. FTP uses TCP port 21 for communication.'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
- en: 'Let''s go through some of the following FTP auxiliaries:'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
- en: '`ftp_login`: This module helps us perform a brute-force attack against the
    target FTP server.'
  id: totrans-28
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Its auxiliary module name is `auxiliary/scanner/ftp/ftp_login`, and you will
    have to configure the following parameters:'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
- en: '**RHOSTS**: IP address or IP range of the target to be scanned'
  id: totrans-30
  prefs:
  - PREF_UL
  - PREF_UL
  type: TYPE_NORMAL
- en: '**USERPASS_FILE**: Path to the file containing the username/password list'
  id: totrans-31
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: You can either create your own custom list that can be used for a brute-force
    attack, or there are many wordlists instantly available for use in Kali Linux,
    located at `|usr|share|wordlists`.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
- en: 'We can see this auxiliary module in the following screenshot:'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/afcbe40b-e557-4fdc-a864-44da7fef2066.jpg)'
  id: totrans-34
  prefs: []
  type: TYPE_IMG
- en: '`ftp_version`: This module uses the banner grabbing technique to detect the
    version of the target FTP server.'
  id: totrans-35
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Its auxiliary module name is `auxiliary/scanner/ftp/ftp_version`, and you will
    have to configure the following parameters:'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
- en: '**RHOSTS**: IP address or IP range of the target to be scanned'
  id: totrans-37
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Once you know the version of the target service, you can start searching for
    version specific vulnerabilities and corresponding exploits.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
- en: 'We can see this auxiliary module in the following screenshot:'
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/d6b73b89-ebcd-4eb0-88eb-37d4e3057a14.jpg)'
  id: totrans-40
  prefs: []
  type: TYPE_IMG
- en: '**anonymous**: Some FTP servers are misconfigured in a way that they allow
    anonymous access to remote users. This auxiliary module probes the target FTP
    server to check whether it allows anonymous access.'
  id: totrans-41
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Its auxiliary module name is `auxiliary/scanner/ftp/anonymous`, and you will
    have to configure the following parameters:'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
- en: '**RHOSTS**: IP address or IP range of the target to be scanned'
  id: totrans-43
  prefs:
  - PREF_UL
  - PREF_UL
  type: TYPE_NORMAL
- en: 'We can see this auxiliary module in the following screenshot:'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/eba2af50-d4eb-4989-82db-69f11c9fb920.jpg)'
  id: totrans-45
  prefs: []
  type: TYPE_IMG
- en: Server Message Block
  id: totrans-46
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '**Server Message Block** (**SMB**) is an application layer protocol primarily
    used for sharing files, printers, and so on. SMB uses TCP port 445 for communication.'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
- en: 'Let''s go through some of the following SMB auxiliaries:'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
- en: ': This auxiliary module probes the target to check which SMB version it''s
    running.'
  id: totrans-49
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Its auxiliary module name is `auxiliary/scanner/smb/smb_version`, and you will
    have to configure the following parameters:'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
- en: '**RHOSTS**: IP address or IP range of the target to be scanned'
  id: totrans-51
  prefs:
  - PREF_UL
  - PREF_UL
  type: TYPE_NORMAL
- en: '![](img/4ad52686-19db-479c-a12d-351e77050acf.jpg)'
  id: totrans-52
  prefs: []
  type: TYPE_IMG
- en: '`smb_enumusers`: This auxiliary module connects to the target system via the
    SMB RPC service and enumerates the users on the system.'
  id: totrans-53
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Its auxiliary module name is `auxiliary/scanner/smb/smb_enumusers`, and you
    will have to configure the following parameters:'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
- en: '**RHOSTS**: IP address or IP range of the target to be scanned'
  id: totrans-55
  prefs:
  - PREF_UL
  - PREF_UL
  type: TYPE_NORMAL
- en: Once you have a list of users on the target system, you can start preparing
    for password cracking attacks against these users.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
- en: 'We can see this auxiliary module in the following screenshot:'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/25d5286e-0605-487e-bdf3-db8cab206600.jpg)'
  id: totrans-58
  prefs: []
  type: TYPE_IMG
- en: '`smb_enumshares`: This auxiliary module enumerates SMB shares that are available
    on the target system.'
  id: totrans-59
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Its auxiliary module name is `auxiliary/scanner/smb/smb_enumshares`, and you
    will have to configure the following parameters:'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
- en: '**RHOSTS**: IP address or IP range of the target to be scanned'
  id: totrans-61
  prefs:
  - PREF_UL
  - PREF_UL
  type: TYPE_NORMAL
- en: 'We can see this auxiliary module in the following screenshot:'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/5116db90-bfb4-4ef1-aad6-7fecf5fa77d5.jpg)'
  id: totrans-63
  prefs: []
  type: TYPE_IMG
- en: Hypertext Transfer Protocol
  id: totrans-64
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: HTTP is a stateless application layer protocol used for the exchange of information
    on the World Wide Web. HTTP uses TCP port `80` for communication.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
- en: 'Let''s go through some of the following HTTP auxiliaries:'
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
- en: '`http_version`: This auxiliary module probes and retrieves the version of web
    server running on the target system. It may also give information on what operating
    system and web framework the target is running.'
  id: totrans-67
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Its auxiliary module name is `auxiliary/scanner/http/http_version`, and you
    will have to configure the following parameters:'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
- en: '**RHOSTS**: IP address or IP range of the target to be scanned'
  id: totrans-69
  prefs:
  - PREF_UL
  - PREF_UL
  type: TYPE_NORMAL
- en: 'We can see this auxiliary module in the following screenshot:'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/2b578ab7-246d-4bbc-9407-b3d0531270cc.jpg)'
  id: totrans-71
  prefs: []
  type: TYPE_IMG
- en: '`backup_file`: Sometimes, the developers and the application administrators
    forget to remove backup files from the web server. This auxiliary module probes
    the target web server for the presence of any such files that may be present since
    the administrator might forget to remove them. Such files may give out additional
    details about the target system and help in further compromise.'
  id: totrans-72
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Its auxiliary module name is `auxiliary/scanner/http/backup_file`, and you
    will have to configure the following parameters:'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
- en: '**RHOSTS**: IP address or IP range of the target to be scanned'
  id: totrans-74
  prefs:
  - PREF_UL
  - PREF_UL
  type: TYPE_NORMAL
- en: 'We can see this auxiliary module in the following screenshot:'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/17a27377-01c4-41d9-95c4-e589fbc9e946.jpg)'
  id: totrans-76
  prefs: []
  type: TYPE_IMG
- en: '`dir_listing`: Quite often the web server is misconfigured to display the list
    of files contained in the root directory. The directory may contain files that
    are not normally exposed through links on the website and leak out sensitive information.
    This auxiliary module checks whether the target web server is vulnerable to directory
    listing.'
  id: totrans-77
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Its auxiliary module name is `auxiliary/scanner/http/dir_listing`, and you
    will have to configure the following parameters:'
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
- en: '**RHOSTS**: IP address or IP range of the target to be scanned'
  id: totrans-79
  prefs:
  - PREF_UL
  - PREF_UL
  type: TYPE_NORMAL
- en: '**PATH**: Possible path to check for directory listing'
  id: totrans-80
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'We can see this auxiliary module in the following screenshot:'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/04aa3754-e638-4fcc-a39b-0bcf018a7389.jpg)'
  id: totrans-82
  prefs: []
  type: TYPE_IMG
- en: '`ssl`: Though SSL certificates are very commonly used for encrypting data in
    transit, they are often found to be either misconfigured or using weak cryptography
    algorithms. This auxiliary module checks for possible weaknesses in the SSL certificate
    installed on the target system.'
  id: totrans-83
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Its auxiliary module name is `auxiliary/scanner/http/ssl`, and you will have
    to configure the following parameters:'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
- en: '**RHOSTS**: IP address or IP range of target to be scanned'
  id: totrans-85
  prefs:
  - PREF_UL
  - PREF_UL
  type: TYPE_NORMAL
- en: 'We can see this auxiliary module in the following screenshot:'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/7768c2e9-8c1f-44c1-9fd8-b91738be6882.jpg)'
  id: totrans-87
  prefs: []
  type: TYPE_IMG
- en: '`http_header`: Most web servers are not hardened for security. This results
    in HTTP headers leaking out server and operating system version details. This
    auxiliary module checks whether the target web server is giving out any version
    information through HTTP headers.'
  id: totrans-88
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Its auxiliary module name is `auxiliary/scanner/http/http_header`, and you
    will have to configure the following parameters:'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
- en: '**RHOSTS**: IP address or IP range of the target to be scanned'
  id: totrans-90
  prefs:
  - PREF_UL
  - PREF_UL
  type: TYPE_NORMAL
- en: 'We can see this auxiliary module in the following screenshot:'
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/45a34536-f20c-4eaf-8290-c59ca7b4990e.jpg)'
  id: totrans-92
  prefs: []
  type: TYPE_IMG
- en: '`robots_txt`: Most search engines work with help of bots that spider and crawl
    the sites and index the pages. However, an administrator of a particular website
    might not want a certain section of his website to be crawled by any of the search
    bot. In this case, he uses the `robots.txt` file to tell the search bots to exclude
    certain sections of the site while crawling. This auxiliary module probes the
    target to check the presence of the `robots.txt` file. This file can often reveal
    a list of sensitive files and folders present on the target system.'
  id: totrans-93
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Its auxiliary module name is `auxiliary/scanner/http/robots_txt`, and you will
    have to configure the following parameters:'
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
- en: '**RHOSTS**: IP address or IP range of the target to be scanned'
  id: totrans-95
  prefs:
  - PREF_UL
  - PREF_UL
  type: TYPE_NORMAL
- en: 'We can see this auxiliary module in the following screenshot:'
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/367f695c-4e14-4a20-b56d-c7919102ee41.jpg)'
  id: totrans-97
  prefs: []
  type: TYPE_IMG
- en: Simple Mail Transfer Protocol
  id: totrans-98
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: SMTP is used for sending and receiving emails. SMTP uses TCP port 25 for communication.
    This auxiliary module probes the SMTP server on the target system for version
    and lists users configured to use the SMTP service.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
- en: 'Its auxiliary module name is `auxiliary/scanner/smtp/smtp_enum`, and you will
    have to configure the following parameters:'
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
- en: '**RHOSTS**: IP address or IP range of the target to be scanned'
  id: totrans-101
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**USER_FILE**: Path to the file containing a list of usernames'
  id: totrans-102
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'We can see this auxiliary module in the following screenshot:'
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/85dfc31b-f5f9-4778-9bfa-119d4fe4fc1c.jpg)'
  id: totrans-104
  prefs: []
  type: TYPE_IMG
- en: Secure Shell
  id: totrans-105
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: SSH is commonly used for remote administration over an encrypted channel. SSH
    uses TCP port 22 for communication.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
- en: 'Let''s go through some of the SSH auxiliaries:'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
- en: '`ssh_enumusers`: This auxiliary module probes the SSH server on the target
    system to get a list of users (configured to work with SSH service) on the remote
    system.'
  id: totrans-108
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Its auxiliary module name is `auxiliary/scanner/ssh/ssh_enumusers`, and you
    will have to configure the following parameters:'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
- en: '**RHOSTS**: IP address or IP range of the target to be scanned'
  id: totrans-110
  prefs:
  - PREF_UL
  - PREF_UL
  type: TYPE_NORMAL
- en: '**USER_FILE**: Path to the file containing a list of usernames'
  id: totrans-111
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'We can see this auxiliary module in the following screenshot:'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/af5bb689-5b20-478e-8563-5a485fd8f733.jpg)'
  id: totrans-113
  prefs: []
  type: TYPE_IMG
- en: '`ssh_login`: This auxiliary module performs a brute-force attack on the target
    SSH server.'
  id: totrans-114
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Its auxiliary module name is `auxiliary/scanner/ssh/ssh_login`, and you will
    have to configure the following parameters:'
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
- en: '**RHOSTS**: IP address or IP range of the target to be scanned'
  id: totrans-116
  prefs:
  - PREF_UL
  - PREF_UL
  type: TYPE_NORMAL
- en: '**USERPASS_FILE**: Path to the file containing a list of usernames and passwords'
  id: totrans-117
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'We can see this auxiliary module in the following screenshot:'
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/4b5237e1-2432-4c51-8697-0a2709bc3f84.jpg)'
  id: totrans-119
  prefs: []
  type: TYPE_IMG
- en: '`ssh_version`: This auxiliary module probes the target SSH server in order
    to detect its version along with the version of the underlying operating system.'
  id: totrans-120
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Its auxiliary module name is `auxiliary/scanner/ssh/ssh_version`, and you will
    have to configure the following parameters:'
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
- en: '**RHOSTS**: IP address or IP range of the target to be scanned'
  id: totrans-122
  prefs:
  - PREF_UL
  - PREF_UL
  type: TYPE_NORMAL
- en: 'We can see this auxiliary module in the following screenshot:'
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/32e2c16b-e57f-4bd5-bf35-fb371b53cb37.jpg)'
  id: totrans-124
  prefs: []
  type: TYPE_IMG
- en: '`detect_kippo`: Kippo is an SSH-based honeypot that is specially designed to
    lure and trap potential attackers. This auxiliary module probes the target SSH
    server in order to detect whether it''s a real SSH server or just a Kippo honeypot.
    If the target is detected running a Kippo honeypot, there''s no point in wasting
    time and effort in its further compromise.'
  id: totrans-125
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Its auxiliary module name is `auxiliary/scanner/ssh/detect_kippo`, and you
    will have to configure the following parameters:'
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
- en: '**RHOSTS**: IP address or IP range of the target to be scanned'
  id: totrans-127
  prefs:
  - PREF_UL
  - PREF_UL
  type: TYPE_NORMAL
- en: 'We can see this auxiliary module in the following screenshot:'
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/d7bfacc2-9827-45d5-9110-4d7a37b74af2.jpg)'
  id: totrans-129
  prefs: []
  type: TYPE_IMG
- en: Domain Name System
  id: totrans-130
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '**Domain Name System** (**DNS**) does a job of translating host names to corresponding
    IP addresses. DNS normally works on UDP port 53 but can operate on TCP as well.
    This auxiliary module can be used to extract name server and mail record information
    from the target DNS server.'
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
- en: 'Its auxiliary module name is `auxiliary/gather/dns_info`, and you will have
    to configure the following parameters:'
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
- en: '**DOMAIN**: Domain name of the target to be scanned'
  id: totrans-133
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'We can see this auxiliary module in the following screenshot:'
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/6dc0bdee-e99d-4717-8768-f3ba1b1ba2a6.jpg)'
  id: totrans-135
  prefs: []
  type: TYPE_IMG
- en: Remote Desktop Protocol
  id: totrans-136
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '**Remote Desktop protocol** (**RDP**) is used to remotely connect to a Windows
    system. RDP uses TCP port 3389 for communication. This auxiliary module checks
    whether the target system is vulnerable for MS12-020\. MS12-020 is a vulnerability
    on Windows Remote Desktop that allows an attacker to execute arbitrary code remotely.
    More information on MS12-020 vulnerability can be found at [https://technet.microsoft.com/en-us/library/security/ms12-020.aspx.](https://technet.microsoft.com/en-us/library/security/ms12-020.aspx)'
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
- en: 'Its auxiliary module name is `auxiliary/scanner/rdp/ms12_020`, you will have
    to configure the following parameters:'
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
- en: '**RHOSTS**: IP address or IP range of the target to be scanned'
  id: totrans-139
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'We can see this auxiliary module in the following screenshot:'
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/2428466c-a2d4-46ac-b987-0f309ac579d3.jpg)'
  id: totrans-141
  prefs: []
  type: TYPE_IMG
- en: Password sniffing
  id: totrans-142
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Password sniffing is a special type of auxiliary module that listens on the
    network interface and looks for passwords sent over various protocols such as
    FTP, IMAP, POP3, and SMB. It also provides an option to import previously dumped
    network traffic in `.pcap` format and look for credentials within.
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
- en: 'Its auxiliary module name is `auxiliary/sniffer/psnuffle`, and it can be seen
    in the following screenshot:'
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/0afba3a1-e448-4cde-b065-9fb2842c1de5.jpg)'
  id: totrans-145
  prefs: []
  type: TYPE_IMG
- en: Advanced search with shodan
  id: totrans-146
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Shodan is an advanced search engine that is used to search for internet connected
    devices such as webcams and SCADA systems. It can also be effectively used for
    searching vulnerable systems. Interestingly, the Metasploit Framework has a capability
    to integrate with Shodan to fire search queries right from msfconsole.
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
- en: 'In order to integrate Shodan with the Metasploit Framework, you first need
    to register yourself on [https://www.shodan.io](https://www.shodan.io). Once registered,
    you can get the API key from the Account Overview section shown as follows:'
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 为了将Shodan与Metasploit Framework集成，您首先需要在[https://www.shodan.io](https://www.shodan.io)上注册。注册后，您可以从以下显示的“账户概述”部分获取API密钥：
- en: '![](img/196365fb-8d37-4cb2-85ff-03e43c6afe0c.jpg)'
  id: totrans-149
  prefs: []
  type: TYPE_IMG
  zh: '![](img/196365fb-8d37-4cb2-85ff-03e43c6afe0c.jpg)'
- en: Its auxiliary module name is `auxiliary/gather/shodan_search`, and this auxiliary
    module connects to the Shodan search engine to fire search queries from `msfconsole`
    and get the search results.
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 其辅助模块名称是`auxiliary/gather/shodan_search`，该辅助模块连接到Shodan搜索引擎，从`msfconsole`发出搜索查询并获取搜索结果。
- en: 'You will have to configure the following parameters:'
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 您将需要配置以下参数：
- en: '**SHODAN_APIKEY**: The Shodan API key available to registered Shodan users'
  id: totrans-152
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**SHODAN_APIKEY**：注册Shodan用户可用的Shodan API密钥'
- en: '**QUERY**: Keyword to be searched'
  id: totrans-153
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**QUERY**：要搜索的关键词'
- en: 'You can run the `shodan_search` command to get the following result:'
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以运行`shodan_search`命令来获得以下结果：
- en: '![](img/3a8fbdb6-0685-43f2-b528-880e3b47a1de.jpg)'
  id: totrans-155
  prefs: []
  type: TYPE_IMG
  zh: '![](img/3a8fbdb6-0685-43f2-b528-880e3b47a1de.jpg)'
- en: Summary
  id: totrans-156
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: In this chapter, we have seen how to use various auxiliary modules in the Metasploit
    Framework for information gathering and enumeration. In the next chapter, we'll
    learn to perform a detailed vulnerability assessment on our target systems.
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们已经看到了如何使用Metasploit Framework中的各种辅助模块进行信息收集和枚举。在下一章中，我们将学习如何对目标系统进行详细的漏洞评估。
- en: Exercises
  id: totrans-158
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 练习
- en: 'You can try the following exercises:'
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以尝试以下练习：
- en: 'In addition to the auxiliary modules discussed in this chapter, try to explore
    and execute the following auxiliary modules:'
  id: totrans-160
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 除了本章讨论的辅助模块外，尝试探索和执行以下辅助模块：
- en: '`auxiliary/scanner/http/ssl_version`'
  id: totrans-161
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`auxiliary/scanner/http/ssl_version`'
- en: '`auxiliary/scanner/ssl/openssl_heartbleed`'
  id: totrans-162
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`auxiliary/scanner/ssl/openssl_heartbleed`'
- en: '`auxiliary/scanner/snmp/snmp_enum`'
  id: totrans-163
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`auxiliary/scanner/snmp/snmp_enum`'
- en: '`auxiliary/scanner/snmp/snmp_enumshares`'
  id: totrans-164
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`auxiliary/scanner/snmp/snmp_enumshares`'
- en: '`auxiliary/scanner/snmp/snmp_enumusers`'
  id: totrans-165
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`auxiliary/scanner/snmp/snmp_enumusers`'
- en: Use the Shodan auxiliary module to find out various internet connected devices
  id: totrans-166
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用Shodan辅助模块查找各种互联网连接设备
