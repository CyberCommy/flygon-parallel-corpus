- en: Creating the User Vuex Module, Pages, and Routes
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建用户Vuex模块、页面和路由
- en: Now, it's time to start giving the application a recognizable face. In this
    chapter, we will start developing the interaction between the user and the application.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，是时候给应用程序一个可识别的面孔了。在本章中，我们将开始开发用户与应用程序之间的交互。
- en: We will use the knowledge we've gathered from the preceding chapters to bring
    this application to life by using custom business rules, Vuex data stores, special
    application layouts, and pages that your user will be able to interact with.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将利用我们从前面章节中收集的知识，通过使用自定义业务规则、Vuex数据存储、特殊应用程序布局和用户可以交互的页面，将这个应用程序变得生动起来。
- en: In this chapter, we will learn how to create the User Vuex module so that we
    can store and manage everything related to the user and the user registration,
    login, validation, and edit pages.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将学习如何创建用户Vuex模块，以便我们可以存储和管理与用户、用户注册、登录、验证和编辑页面相关的一切。
- en: 'In this chapter, we''ll cover the following recipes:'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将涵盖以下配方：
- en: Creating the User Vuex module in your application
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在您的应用程序中创建用户Vuex模块
- en: Creating User pages and routes for your application
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为您的应用程序创建用户页面和路由
- en: Let's get started!
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们开始吧！
- en: Technical requirements
  id: totrans-8
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 技术要求
- en: In this chapter, we will be using **Node.js**, **AWS Amplify**,and **Quasar
    Framework**.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将使用**Node.js**、**AWS Amplify**和**Quasar Framework**。
- en: '**Attention, Windows users!** You need to install an `npm` package called `windows-build-tools`
    to be able to install the required packages. To do this, open PowerShell as administrator
    and execute the `> npm install -g windows-build-tools` command.'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: '**注意，Windows用户！** 您需要安装一个名为`windows-build-tools`的`npm`包，以便能够安装所需的软件包。要做到这一点，以管理员身份打开PowerShell并执行`>
    npm install -g windows-build-tools`命令。'
- en: 'To install **Quasar Framework****,** you need to open a Terminal (macOS or
    Linux) or Command Prompt/PowerShell (Windows) and execute the following command:'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 要安装**Quasar Framework**，您需要打开终端（macOS或Linux）或命令提示符/PowerShell（Windows）并执行以下命令：
- en: '[PRE0]'
  id: totrans-12
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'To install **AWS Amplify****,** you need to open a Terminal (macOS or Linux)
    or Command Prompt/PowerShell (Windows) and execute the following command:'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 要安装**AWS Amplify**，您需要打开终端（macOS或Linux）或命令提示符/PowerShell（Windows）并执行以下命令：
- en: '[PRE1]'
  id: totrans-14
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: Creating the User Vuex module in your application
  id: totrans-15
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在您的应用程序中创建用户Vuex模块
- en: Now, it's time to start storing data in our application state manager or Vuex.
    In the application context, all the data that is stored is saved within namespaces.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，是时候开始在我们的应用状态管理器或Vuex中存储数据了。在应用上下文中，存储的所有数据都保存在命名空间中。
- en: In this recipe, we will learn how to create the user Vuex module. Using our
    knowledge from the previous chapter, we will then create actions to create a new
    user, update their data, validate the user, sign in the user on Amplify, and list
    all the users on the application.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个配方中，我们将学习如何创建用户Vuex模块。利用我们从上一章中获得的知识，然后创建动作来创建新用户、更新他们的数据、验证用户、在Amplify上登录用户，并列出应用程序中的所有用户。
- en: Getting ready
  id: totrans-18
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: The prerequisite for this recipe is Node.js 12+.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 本配方的先决条件是Node.js 12+。
- en: 'The Node.js global objects that are required for this recipe are as follows:'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 本章所需的Node.js全局对象如下：
- en: '`@aws-amplify/cli`'
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`@aws-amplify/cli`'
- en: '`@quasar/cli`'
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`@quasar/cli`'
- en: To start our User Vuex store module, we will continue with the project that
    we created in [Chapter 4](ee24c1a0-5838-4f12-8056-a86f07c8af40.xhtml), *Creating
    Custom Application Components and Layouts*.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 要开始我们的用户Vuex存储模块，我们将继续使用我们在[第4章](ee24c1a0-5838-4f12-8056-a86f07c8af40.xhtml)中创建的项目，即*创建自定义应用程序组件和布局*。
- en: This recipe will be completed using GraphQL queries and mutations, as well as
    their drivers, which were written in the *Creating your first GraphQL API* and *Creating
    the AWS Amplify driver for your application* recipes of [Chapter 3](6748f2ed-6fa0-4925-8a71-199269fae4ae.xhtml),
    *Setting Up Our Chat App - AWS Amplify Environment and GraphQL*.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 这个食谱将使用GraphQL查询和突变完成，以及它们的驱动程序，这些驱动程序是在[第3章](6748f2ed-6fa0-4925-8a71-199269fae4ae.xhtml)的*创建您的第一个GraphQL
    API*和*为您的应用程序创建AWS Amplify驱动程序*食谱中编写的。
- en: How to do it...
  id: totrans-25
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做...
- en: 'We will split the creation of the User Vuex module into five parts: creating
    the **state**, **mutations**, **getters**, and **actions**, and then adding the
    module to Vuex.'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将把用户的Vuex模块的创建分为五个部分：创建**state**，**mutations**，**getters**和**actions**，然后将模块添加到Vuex中。
- en: Creating the User Vuex state
  id: totrans-27
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 创建用户的Vuex状态
- en: 'To store data on a Vuex module, we need a state that will store it for us.
    Follow these steps to create the User state:'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 要在Vuex模块上存储数据，我们需要一个将为我们存储数据的状态。按照以下步骤创建用户状态：
- en: In the `store` folder, create a new folder called `user`. Inside, create a new
    file called `state.js` and open it.
  id: totrans-29
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在`store`文件夹中，创建一个名为`user`的新文件夹。在内部，创建一个名为`state.js`的新文件并打开它。
- en: 'Create a new function called `createState`, which returns a JavaScript object
    that provides the `id`, `username`, `email`, `name`, `avatar`, `password`, `loading`, `validated`,
    and `error` properties. The `id`, `username`, `email`, `name`, and `password` properties
    will be defined as an empty `string`, while the `loading` and `validated` properties
    will be defined as `false`. `error` will be defined as `undefined` and `avatar` is
    a JavaScript object with three properties – `key`, `bucket`, and `region`:'
  id: totrans-30
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个名为`createState`的新函数，它返回一个JavaScript对象，提供`id`，`username`，`email`，`name`，`avatar`，`password`，`loading`，`validated`和`error`属性。`id`，`username`，`email`，`name`和`password`属性将被定义为空字符串，而`loading`和`validated`属性将被定义为`false`。`error`将被定义为`undefined`，`avatar`是一个具有三个属性的JavaScript对象-`key`，`bucket`和`region`：
- en: '[PRE2]'
  id: totrans-31
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'Finally, in order to export the state as a singleton and make it available
    as a JavaScript object, we need to `export default` the execution of the `createState` function:'
  id: totrans-32
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，为了将状态导出为单例并将其作为JavaScript对象可用，我们需要`export default`执行`createState`函数：
- en: '[PRE3]'
  id: totrans-33
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: Creating the User Vuex mutations
  id: totrans-34
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 创建用户的Vuex mutations
- en: 'To save any data on a state, Vuex needs a mutation. Follow these steps to create
    the User mutation that will manage the mutations for this module:'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 要在状态上保存任何数据，Vuex需要一个mutation。按照以下步骤创建将管理此模块的mutations的用户mutation：
- en: Create a new file called `types.js` inside the `store/user` folder and open
    it.
  id: totrans-36
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在`store/user`文件夹内创建一个名为`types.js`的新文件并打开它。
- en: 'In the file, export a default JavaScript object that provides the `CREATE_USER`, `SET_USER_DATA`, `CLEAR_USER`, `USER_VALIDATED`, `LOADING`,
    and `ERROR` properties. The values are the same as the properties, but they are
    formatted as strings:'
  id: totrans-37
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在文件中，导出一个默认的JavaScript对象，提供`CREATE_USER`，`SET_USER_DATA`，`CLEAR_USER`，`USER_VALIDATED`，`LOADING`和`ERROR`属性。值与属性相同，但格式为字符串。
- en: '[PRE4]'
  id: totrans-38
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: Create a new file called `mutations.js` inside the `store/user` folder and open
    it.
  id: totrans-39
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在`store/user`文件夹内创建一个名为`mutations.js`的新文件并打开它。
- en: 'Import the newly created `types.js` file and the `createState` JavaScript object from `state.js`:'
  id: totrans-40
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导入新创建的`types.js`文件和`state.js`中的`createState`JavaScript对象：
- en: '[PRE5]'
  id: totrans-41
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'Create a new function called `setLoading`, with the state as the first argument.
    Inside, we will set `state.loading` to `true`:'
  id: totrans-42
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个名为`setLoading`的新函数，状态作为第一个参数。在内部，我们将设置`state.loading`为`true`：
- en: '[PRE6]'
  id: totrans-43
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'Create a new function called `setError`, with `state` as the first argument
    and `error` as the second with a default value of `new Error()`. Inside, we will
    set `state.error` to `error` and `state.loading` to `false`:'
  id: totrans-44
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个名为“setError”的新函数，以“state”作为第一个参数，并以“error”作为第二个参数，其默认值为“new Error()”。在内部，我们将将“state.error”设置为“error”，将“state.loading”设置为“false”：
- en: '[PRE7]'
  id: totrans-45
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'Create a new function called `createUser`, with `state` as the first argument
    and a JavaScript object as the second. This JavaScript object will provide the `id`, `email`, `password`, `name`,
    and `username` properties. All of the properties will be empty strings. Inside the
    function, we will define the `state` properties as the ones we received in the
    argument of the function:'
  id: totrans-46
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个名为“createUser”的新函数，以“state”作为第一个参数，并以JavaScript对象作为第二个参数。这个JavaScript对象将提供“id”、“email”、“password”、“name”和“username”属性。所有属性都将是空字符串。在函数内部，我们将定义“state”属性为函数参数中收到的属性：
- en: '[PRE8]'
  id: totrans-47
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'Create a new function called `validateUser` with `state` as the first argument.
    Inside it, we will set the `state.validated` property to `true`, delete the `state.password` property,
    and set the `state.loading` property to `false`:'
  id: totrans-48
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个名为“validateUser”的新函数，以“state”作为第一个参数。在其中，我们将将“state.validated”属性设置为“true”，删除“state.password”属性，并将“state.loading”属性设置为“false”：
- en: '[PRE9]'
  id: totrans-49
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'Create a new function called `setUserData`, with `state` as the first argument
    and a JavaScript object as the second arguments. This object will provide the `id`, `email`, `password`, `name`,
    and `username` properties. All of them will be empty strings. `avatar` is a JavaScript
    object with three properties: `key`, `bucket`, and `region`. Inside the function,
    we will define the `state` properties as the ones we received in the argument
    of the function:'
  id: totrans-50
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个名为“setUserData”的新函数，以“state”作为第一个参数，并以JavaScript对象作为第二个参数。这个对象将提供“id”、“email”、“password”、“name”和“username”属性。它们都将是空字符串。“avatar”是一个具有三个属性的JavaScript对象：“key”、“bucket”和“region”。在函数内部，我们将定义“state”属性为函数参数中收到的属性：
- en: '[PRE10]'
  id: totrans-51
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'Create a new function called `clearUser` with `state` as the first argument.
    Then, in the function of it, we will get a new clean `state` from the `createState` function
    and iterate over the current `state`, defining the values of the `state` properties
    back to the default values:'
  id: totrans-52
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个名为“clearUser”的新函数，以“state”作为第一个参数。然后，在其中的函数中，我们将从“createState”函数获取一个新的干净的“state”，并迭代当前的“state”，将“state”属性的值重新定义为默认值：
- en: '[PRE11]'
  id: totrans-53
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'Finally, export a default JavaScript object, with the keys as the imported
    mutation types and the value as the functions that correspond to each type:'
  id: totrans-54
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，导出一个默认的JavaScript对象，其中键是导入的变异类型，值是对应于每种类型的函数：
- en: Set `MT.LOADING` to `setLoading`
  id: totrans-55
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将“MT.LOADING”设置为“setLoading”
- en: Set `MT.ERROR` to `setError`
  id: totrans-56
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将“MT.ERROR”设置为“setError”
- en: Set `MT.CREATE_USER` to `createUser`
  id: totrans-57
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将“MT.CREATE_USER”设置为“createUser”
- en: Set `MT.USER_VALIDATED` to `validateUser`
  id: totrans-58
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将“MT.USER_VALIDATED”设置为“validateUser”
- en: Set `MT.SET_USER_DATA` to `setUserData`
  id: totrans-59
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将“MT.SET_USER_DATA”设置为“setUserData”
- en: 'Set `MT.CLEAR_USER` to `clearUser`:'
  id: totrans-60
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将“MT.CLEAR_USER”设置为“clearUser”
- en: '[PRE12]'
  id: totrans-61
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: Creating the User Vuex getters
  id: totrans-62
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 创建用户Vuex getter
- en: 'To access the data stored on the state, we need to create some `getters`. Follow
    these steps to create `getters` for the user module:'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 要访问存储在状态中的数据，我们需要创建一些“getter”。按照以下步骤为用户模块创建“getter”：
- en: In a `getter` function, the first argument that that function will receive will
    always be the current `state` of the Vuex `store`.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 在“getter”函数中，该函数将始终接收到Vuex“store”的当前“state”作为第一个参数。
- en: Create a new file called `getters.js` inside the `store/user` folder.
  id: totrans-65
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在“store/user”文件夹内创建一个名为“getters.js”的新文件。
- en: 'Create a new function called `getUserId` that returns `state.id`:'
  id: totrans-66
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个名为“getUserId”的新函数，返回“state.id”：
- en: '[PRE13]'
  id: totrans-67
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'Create a new function called `getUserEmail` that returns `state.email`:'
  id: totrans-68
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个名为“getUserEmail”的新函数，返回“state.email”：
- en: '[PRE14]'
  id: totrans-69
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: 'Create a new function called `getUserUsername` that returns `state.username`:'
  id: totrans-70
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个名为`getUserUsername`的新函数，返回`state.username`：
- en: '[PRE15]'
  id: totrans-71
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: 'Create a new function called `getUserAvatar` that returns `state.avatar`:'
  id: totrans-72
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个名为`getUserAvatar`的新函数，返回`state.avatar`：
- en: '[PRE16]'
  id: totrans-73
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: 'Create a new function called `getUser` that returns a JavaScript object that
    provides the `id`, `name`, `username`, `avatar`, and `email` properties. The values
    of these properties will correspond to `state`:'
  id: totrans-74
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个名为`getUser`的新函数，返回一个提供`id`、`name`、`username`、`avatar`和`email`属性的JavaScript对象。这些属性的值将对应于`state`：
- en: '[PRE17]'
  id: totrans-75
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: 'Create a new function called `isLoading` that returns `state.loading`:'
  id: totrans-76
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个名为`isLoading`的新函数，返回`state.loading`：
- en: '[PRE18]'
  id: totrans-77
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: 'Create a new function called `hasError` that returns `state.error`:'
  id: totrans-78
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个名为`hasError`的新函数，返回`state.error`：
- en: '[PRE19]'
  id: totrans-79
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: 'Finally, export a `default` JavaScript object with the created functions (`getUserId`, `getUserEmail`, `getUserUsername`, `getUserAvatar`, `getUser`, `isLoading`, and `hasError`)
    as properties:'
  id: totrans-80
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，导出一个带有创建的函数（`getUserId`、`getUserEmail`、`getUserUsername`、`getUserAvatar`、`getUser`、`isLoading`和`hasError`）作为属性的`default`JavaScript对象：
- en: '[PRE20]'
  id: totrans-81
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: Creating the User Vuex actions
  id: totrans-82
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 创建用户Vuex操作
- en: 'Follow these steps to create the User Vuex actions:'
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 按照以下步骤创建用户Vuex操作：
- en: Create a file called `actions.js` inside the `store/user` folder and open it.
  id: totrans-84
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在`store/user`文件夹内创建一个名为`actions.js`的文件并打开它。
- en: 'First, we need to import the functions, enums, and classes that we will be
    using here:'
  id: totrans-85
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，我们需要导入这里将要使用的函数、枚举和类。
- en: Import `graphqlOperation` from the `aws-amplify` npm package.
  id: totrans-86
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从`aws-amplify`npm包中导入`graphqlOperation`。
- en: Import `getUser` and `listUsers` from the GraphQL queries.
  id: totrans-87
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从GraphQL查询中导入`getUser`和`listUsers`。
- en: Import `createUser` and `updateUser` from the GraphQL mutations.
  id: totrans-88
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从GraphQL变异中导入`createUser`和`updateUser`。
- en: Import the `signUp`, `validateUser`, `signIn`, `getCurrentAuthUser`, and `changePassword`
    functions from `driver/auth.js`.
  id: totrans-89
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从`driver/auth.js`中导入`signUp`、`validateUser`、`signIn`、`getCurrentAuthUser`和`changePassword`函数。
- en: Import `AuthAPI` from `driver/appsync`.
  id: totrans-90
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从`driver/appsync`导入`AuthAPI`。
- en: 'Import the Vuex mutation types from `./types.js`:'
  id: totrans-91
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从`./types.js`导入Vuex变异类型：
- en: '[PRE21]'
  id: totrans-92
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: 'Create a new asynchronous function called `initialLogin`. This function will
    receive a JavaScript object as the first argument. This will provide a `commit` property.
    In this function, we will get the currently authenticated user, get their data
    from the GraphQL API, and commit the user data to the Vuex store:'
  id: totrans-93
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个名为`initialLogin`的新异步函数。此函数将接收一个JavaScript对象作为第一个参数。这将提供一个`commit`属性。在这个函数中，我们将获取当前认证的用户，从GraphQL
    API获取他们的数据，并将用户数据提交到Vuex存储中：
- en: '[PRE22]'
  id: totrans-94
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: 'Create a new asynchronous function called `signUpNewUser`. This function will
    receive a JavaScript object with a `commit` property as the first argument. The
    second argument is also a JavaScript object but has the `email`, `name`, and `password` properties.
    In this function, we will execute the `signUp` function from the `auth.js` driver
    to sign up and create the user in the AWS Cognito user pool, and then commit the
    user data to the Vuex store:'
  id: totrans-95
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个名为`signUpNewUser`的新异步函数。此函数将接收一个带有`commit`属性的JavaScript对象作为第一个参数。第二个参数也是一个JavaScript对象，但具有`email`、`name`和`password`属性。在这个函数中，我们将执行`auth.js`驱动器中的`signUp`函数来注册并在AWS
    Cognito用户池中创建用户，然后将用户数据提交到Vuex存储中：
- en: '[PRE23]'
  id: totrans-96
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: 'Create a new asynchronous function called `createNewUser`. This function will
    receive a JavaScript object with the `commit` and `state` properties as the first
    argument. For the second argument, the function will receive a `code` string.
    In this function, we will fetch the user data from `state` and execute the `validateUser` function
    from the `auth.js` driver to check if the user is a valid user in the AWS Cognito user
    pool. Then we will execute the `signIn` function from `auth.js`, passing `email` and `password` as
    parameters `password` needs to be converted into an encrypted base64 string before
    we send it to the function. After that, we will fetch the authenticated user data
    and send it to the GraphQL API to create a new user:'
  id: totrans-97
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE24]'
  id: totrans-98
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: 'Create a new asynchronous function called `signInUser`. This function will
    receive a JavaScript object with the `commit` and `dispatch` properties as the
    first argument. The second argument, which is also a JavaScript object, will have
    the `email` and `password` properties. Inside this function, we will execute the `signIn` function
    from the `auth.js` driver, pass `email` and `password` as parameters, and then
    dispatch the `initialLogin` Vuex action:'
  id: totrans-99
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE25]'
  id: totrans-100
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: 'Create a new asynchronous function called `editUser`. This function will receive
    a JavaScript object with the `commit` and `state` properties as the first argument.
    The second argument, which is also a JavaScript object, will have the `username`, `name`, `avatar`, `password`,
    and `newPassword` properties. Inside this function, we will merge the `state` values
    with the new ones that we received as arguments. We will then send them to the
    GraphQL API to update the user information. Then, we will check if we have both
    the `password` and `newPasssword` properties filled in. If so, we will execute
    the `changePassword` function from the `auth.js` driver to change the user''s
    password in the AWS Cognito user pool:'
  id: totrans-101
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE26]'
  id: totrans-102
  prefs: []
  type: TYPE_PRE
  zh: '[PRE26]'
- en: 'Create a new asynchronous function called `listAllUsers`. This function will
    fetch all the users on the database and return a list:'
  id: totrans-103
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE27]'
  id: totrans-104
  prefs: []
  type: TYPE_PRE
  zh: '[PRE27]'
- en: 'Finally, we will export all the default created functions:'
  id: totrans-105
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE28]'
  id: totrans-106
  prefs: []
  type: TYPE_PRE
  zh: '[PRE28]'
- en: Adding the User module to Vuex
  id: totrans-107
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'Follow these steps to import the created User module into the Vuex state:'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
- en: Create a new file called `index.js` inside the `store/user` folder.
  id: totrans-109
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Import the `state.js`, `actions.js`, `mutation.js`, and `getters.js` files
    that we just created:'
  id: totrans-110
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE29]'
  id: totrans-111
  prefs: []
  type: TYPE_PRE
  zh: '[PRE29]'
- en: 'Create an `export default` with a JavaScript object that provides the `state`, `actions`, `mutations`, `getters`,
    and `namespaced` (set to `true`) properties:'
  id: totrans-112
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE30]'
  id: totrans-113
  prefs: []
  type: TYPE_PRE
  zh: '[PRE30]'
- en: Open the `index.js` file inside the `store `folder.
  id: totrans-114
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Import the newly created `index.js` inside the `store/user` folder:'
  id: totrans-115
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE31]'
  id: totrans-116
  prefs: []
  type: TYPE_PRE
  zh: '[PRE31]'
- en: 'In the new Vuex class instantiation, we need to add a new property called `modules` and
    define it as a JavaScript object. Then, we need to add a new `user` property – this
    will be automatically used as the value because it has the same name as the imported
    User module from the previous step:'
  id: totrans-117
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE32]'
  id: totrans-118
  prefs: []
  type: TYPE_PRE
  zh: '[PRE32]'
- en: How it works...
  id: totrans-119
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: When you declare your Vuex store, you need to create three main properties: `state`,
    `mutations`, and `actions`. These properties act as a single structure, bound
    to the Vue application through the injected `$store` prototype or the exported
    `store` variable.
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
- en: A `state` is a centralized object that holds your information and makes it available
    to be used by `mutations`, `actions`, or `components`. Changing `state` always
    requires that a synchronous function is executed through a `mutation`.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
- en: A `mutation` is a synchronous function that can change `state` and be traced.
    This means that when you're developing, you can time travel through all the executed
    `mutations` in the Vuex store.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
- en: An `action` is an asynchronous function that can be used to hold business logic,
    API calls, dispatch other `actions`, and execute `mutations`. These functions
    are the common entry points when you need to make changes to a Vuex store.
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
- en: 'A simple representation of a Vuex store can be seen in the following diagram:'
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
- en: '![](assets/f7d5f47b-8fd3-4f9e-99e2-1d7df4243318.png)'
  id: totrans-125
  prefs: []
  type: TYPE_IMG
- en: In this recipe, we created the User Vuex module. This module includes all the
    business logic that will help us manage the user in our application, from creating
    a new user to updating it.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
- en: When we looked at the Vuex actions, we used the AppSync API client to fetch
    the data and send it to our GraphQL API. We did this using the queries and mutations
    that were created by the Amplify CLI. To be able to communicate with the GraphQL
    API so that we could update the user, we fetched the data we used in the Auth
    Driver from the *Creating the AWS Amplify driver for your application* recipein [Chapter
    3](6748f2ed-6fa0-4925-8a71-199269fae4ae.xhtml), *Setting Up Our Chat App - AWS
    Amplify Environment and GraphQL*.
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
- en: Those API requests are manipulated by the Vuex mutations and stored in the Vuex
    state, which we can access through the Vuex getter.
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
- en: See also
  id: totrans-129
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: You can find out more information about Amplify's AppSync GraphQL client at [https://aws-amplify.github.io/docs/js/api#amplify-graphql-client](https://aws-amplify.github.io/docs/js/api#amplify-graphql-client).
  id: totrans-130
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: You can find out more information about Vuex at [https:/​/​vuex.​vuejs.​org/​](https://vuex.vuejs.org/).
  id: totrans-131
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: You can find out more information about Vuex modules at [https://vuex.vuejs.org/guide/modules.html](https://vuex.vuejs.org/guide/modules.html)
  id: totrans-132
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Creating User pages and routes for your application
  id: totrans-133
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: When working with a Vue application, you will need a way to manage the location
    of your users. You can handle this using a dynamic component, but the best way
    to do this is through route management.
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
- en: In this recipe, we will learn how to create our application pages with the business
    rules required for each route. We will then use route management to handle everything.
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
- en: Getting ready
  id: totrans-136
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'The prerequisites for this recipe are as follows:'
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
- en: The project we created in the previous recipe
  id: totrans-138
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Node.js 12+
  id: totrans-139
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'The Node.js global objects that are required for this recipe are as follows:'
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
- en: '`@aws-amplify/cli`'
  id: totrans-141
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`@quasar/cli`'
  id: totrans-142
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: To start our User page and routes, we will continue with the project that we
    created in the *Creating the User Vuex module on your application *recipe.
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
- en: How to do it...
  id: totrans-144
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'In this recipe, we will create all the pages that we will need for our user
    in our application: the login page, the signup page, and the user edit page.'
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
- en: Adding the Dialog plugin to Quasar
  id: totrans-146
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: To use the Quasar Dialog plugin, we need to add it to the configuration file.
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
- en: 'Open the `quasar.conf.js` file inside the project root folder and find the `framework` property.
    Then, in the `plugins` property, add the `''Dialog''` string to the array so that
    Quasar loads the `Dialog` plugin when it boots the application:'
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE33]'
  id: totrans-149
  prefs: []
  type: TYPE_PRE
  zh: '[PRE33]'
- en: Creating the User login page
  id: totrans-150
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: For the User login page, we will use two of the components that we created previously: `PasswordInput` and `EmailInput`.
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
- en: Single-file component <script> section
  id: totrans-152
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 'It''s time to create the `<script>` section of the User login page:'
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
- en: In the `src/pages` folder, open the `Index.vue` file.
  id: totrans-154
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Import the `mapActions` and `mapGetters` functions from the `vuex` package:'
  id: totrans-155
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE34]'
  id: totrans-156
  prefs: []
  type: TYPE_PRE
  zh: '[PRE34]'
- en: 'Create an `export default` JavaScript object with five properties; that is, `name` (defined
    as `''Index''`), `components`, `data`, `computed`, and `methods`:'
  id: totrans-157
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE35]'
  id: totrans-158
  prefs: []
  type: TYPE_PRE
  zh: '[PRE35]'
- en: 'In the `components` property, add two new properties called `PasswordInput` and `EmailInput`.
    Define `PasswordInput` as an anonymous function with a return value of `import(''components/PasswordInput'')` and `EmailInput` as
    an anonymous function with a return value of `import(''components/EmailInput'')`:'
  id: totrans-159
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE36]'
  id: totrans-160
  prefs: []
  type: TYPE_PRE
  zh: '[PRE36]'
- en: 'In the `data` property, we will return a JavaScript object that provides two
    properties, `email` and `password`, both of which will be empty strings:'
  id: totrans-161
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE37]'
  id: totrans-162
  prefs: []
  type: TYPE_PRE
  zh: '[PRE37]'
- en: 'In the `computed` property, we will destruct the `mapGetters` function, passing
    the namespace of what module we want as the first parameter (in this case, `''user''`).
    We will pass an array of `getters` we want to import (in this case, `isLoading`)
    as the second parameter:'
  id: totrans-163
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE38]'
  id: totrans-164
  prefs: []
  type: TYPE_PRE
  zh: '[PRE38]'
- en: On the `beforeMount` lifecycle hook, we will add an `if` statement, checking
    if the `getUserId` is truthy, and then redirect the user to the `Contacts` route.
  id: totrans-165
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE39]'
  id: totrans-166
  prefs: []
  type: TYPE_PRE
  zh: '[PRE39]'
- en: 'Finally, for the `methods` property, we will destruct the `mapActions` function,
    passing the namespace of the module we want – in this case, `''user''` – as the
    first parameter. For the second parameter, we will use an array of `actions` we
    want to import – in this scenario, this is `signInUser`. Next, we need to add
    the asynchronous `onSubmit` method, which will dispatch `signInUser` and send
    the user to the `Contacts` route, and the `createAccount` method, which will send
    the user to the `SignUp` route:'
  id: totrans-167
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE40]'
  id: totrans-168
  prefs: []
  type: TYPE_PRE
  zh: '[PRE40]'
- en: Single-file component <template> section
  id: totrans-169
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 'Now, we need to add the `<template>` section to finish our page:'
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
- en: 'Create a component called `QPage` with the `class` attribute defined as `"bg-grey-1
    flex flex-center"`:'
  id: totrans-171
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE41]'
  id: totrans-172
  prefs: []
  type: TYPE_PRE
  zh: '[PRE41]'
- en: 'Inside the `QPage` component, create a `QCard` component with the `style` attribute
    defined as `"width: 350px"`:'
  id: totrans-173
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE42]'
  id: totrans-174
  prefs: []
  type: TYPE_PRE
  zh: '[PRE42]'
- en: 'Inside the `QCard` component, create a `QCardSection` with an `h6` child component that
    has the `class` attribute defined as `no-margin`:'
  id: totrans-175
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE43]'
  id: totrans-176
  prefs: []
  type: TYPE_PRE
  zh: '[PRE43]'
- en: 'Now, create a `QCardSection` with a `QForm` child component that has the class
    attribute defined as `q-gutter-md`. Inside the `QForm` component, create an `EmailInput` component,
    with the `v-model` directive bound to the `data.email`, and a `PasswordInput` component,
    with the `v-model` directive bound to the `data.password` property:'
  id: totrans-177
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE44]'
  id: totrans-178
  prefs: []
  type: TYPE_PRE
  zh: '[PRE44]'
- en: 'Then, create a `QCardActions` component with an `align` attribute defined as `right`.
    Inside, add a `QBtn` with the `label` attribute set to `"Create new Account"`, `color` set
    to `primary`, `class` set to `q-ml-sm`, `flat` set to `true`, and the `@click` event
    listener bound to the `createAccount` method. Next, create another `QBtn` component
    with the `label` attribute set to `"Login"`, `type` set to `"submit"`, `color` set
    to `primary`, and the `@click` event listener bound to the `onSubmit` method:'
  id: totrans-179
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE45]'
  id: totrans-180
  prefs: []
  type: TYPE_PRE
  zh: '[PRE45]'
- en: 'Finally, create a `QInnerLoading` component with the `:showing` attribute bound
    to `computed.isLoading`. This will need to have a `QSpinner` child component that
    provides the `size` attribute. Set this to `50px` and `color` to `primary`:'
  id: totrans-181
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE46]'
  id: totrans-182
  prefs: []
  type: TYPE_PRE
  zh: '[PRE46]'
- en: 'To run the server and see your progress, you need to open a Terminal (macOS
    or Linux) or Command Prompt/PowerShell (Windows) and execute the following command:'
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE47]'
  id: totrans-184
  prefs: []
  type: TYPE_PRE
  zh: '[PRE47]'
- en: Remember to always execute the command `npm run lint --fix`, to automatically
    fix any code lint error.
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
- en: 'Here is a preview of what the page will look like:'
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
- en: '![](assets/24406191-9d75-4c7f-80f1-f28a74bb3517.png)'
  id: totrans-187
  prefs: []
  type: TYPE_IMG
- en: Creating the User signup page
  id: totrans-188
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: For the User signup page, we will use four components that we've already created: `NameInput`, `UsernameInput`, `PasswordInput`,
    and `EmailInput`.
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
- en: Single-file component <script> section
  id: totrans-190
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 'Here, we will create the `<script>` section of the User signup page:'
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
- en: Inside the **`src/pages` **folder, create a new file called `SignUp.vue` and
    open it.
  id: totrans-192
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Import the `mapActions` and `mapGetters` functions from the `vuex` package:'
  id: totrans-193
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE48]'
  id: totrans-194
  prefs: []
  type: TYPE_PRE
  zh: '[PRE48]'
- en: 'Create an `export default` JavaScript object that provides five properties: `name` (defined
    as `''SignUp''`), `components`, `data`, `computed`, and `methods`:'
  id: totrans-195
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE49]'
  id: totrans-196
  prefs: []
  type: TYPE_PRE
  zh: '[PRE49]'
- en: 'In the `components` property, add four new properties: `NameInput`, `UsernameInput`, `PasswordInput`,
    and `EmailInput`. Define them like so:'
  id: totrans-197
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '`NameInput` as an anonymous function with a return value of `import(''components/NameInput'')`'
  id: totrans-198
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`UsernameInput` as an anonymous function with a return value of `import(''components/UsernameInput'')`'
  id: totrans-199
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`PasswordInput` as an anonymous function with a return value of `import(''components/PasswordInput'') `'
  id: totrans-200
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`EmailInput` as an anonymous function with a return value of `import(''components/EmailInput'')`'
  id: totrans-201
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'This can be seen in the following code:'
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE50]'
  id: totrans-203
  prefs: []
  type: TYPE_PRE
  zh: '[PRE50]'
- en: 'In the `data` property, we will return a JavaScript object that provides four
    properties – `name`, `username`,  `email`, and `password` – all of which will
    be empty strings:'
  id: totrans-204
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE51]'
  id: totrans-205
  prefs: []
  type: TYPE_PRE
  zh: '[PRE51]'
- en: 'In the `computed` property, we will destruct the `mapGetters` function, passing
    the namespace of what module we want – in this case, `''user''` – as the first
    parameter. For the second parameter, we will use an array of `getters` we want
    to import – in this scenario, this is `isLoading`:'
  id: totrans-206
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE52]'
  id: totrans-207
  prefs: []
  type: TYPE_PRE
  zh: '[PRE52]'
- en: 'Finally, for the `methods` property, first, we will destruct the `mapActions` function,
    passing the namespace of what module we want – in this case, `''user''` – as the
    first parameter. For the second parameter, we will pass an array of `actions` we
    want to import – in this scenario, this is `signUpNewUser`. Next, we need to add
    the asynchronous `onSubmit` method, which will dispatch `signUpNewUser` and then
    send the user to the `Validate` route, and the `onReset` method, which will clear
    the data:'
  id: totrans-208
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE53]'
  id: totrans-209
  prefs: []
  type: TYPE_PRE
  zh: '[PRE53]'
- en: Single-file component <template> section
  id: totrans-210
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 'To finish the page, we need to add the `<template>` section:'
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
- en: 'Create a `QPage` component with the `class` attribute defined as `"bg-grey-1
    flex flex-center"`:'
  id: totrans-212
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE54]'
  id: totrans-213
  prefs: []
  type: TYPE_PRE
  zh: '[PRE54]'
- en: 'Inside the `QPage` component, create a `QCard` component with the `style` attribute
    defined as `"width: 350px"`:'
  id: totrans-214
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE55]'
  id: totrans-215
  prefs: []
  type: TYPE_PRE
  zh: '[PRE55]'
- en: 'Inside the `QCard` component, create a `QCardSection` with a `h6` child component
    where the `class` attribute is defined as `no-margin`:'
  id: totrans-216
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE56]'
  id: totrans-217
  prefs: []
  type: TYPE_PRE
  zh: '[PRE56]'
- en: 'After that, create a `QCardSection` with a `QForm` child component where the
    `class` attribute is defined as `q-gutter-md`. Inside the `QForm` component, create
    a `NameInput` component with the `v-model` directive bound to `data.name`, a `UsernameInput` component
    with the `v-model` directive bound to `data.username`, an `EmailInput` component
    with the `v-model` directive bound to `data.email`, and a `PasswordInput` component
    with the `v-model` directive bound to the `data.password` property:'
  id: totrans-218
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE57]'
  id: totrans-219
  prefs: []
  type: TYPE_PRE
  zh: '[PRE57]'
- en: 'Now, create a `QCardActions` component with the `align` attribute set to `right`.
    Inside, add a `QBtn` with the `label` attribute set to `"Reset"`, `color` set
    to `primary`, `class` set to `q-ml-sm`, `flat` set to `true`, and the `@click` event
    listener bound to the `onReset` method. Then, create another `QBtn` component
    with the `label` attribute set to `"Create"`, `type` set to `"submit"`, `color` set
    to `primary`, and the `@click` event listener bound to the `onSubmit` method:'
  id: totrans-220
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE58]'
  id: totrans-221
  prefs: []
  type: TYPE_PRE
  zh: '[PRE58]'
- en: 'Finally, create a `QInnerLoading` component with the `:showing` attribute bound
    to `computed.isLoading`. This will need to have a `QSpinner` child component.
    The `size` attribute needs to be set to `50px` and `color` needs to be set to `primary`:'
  id: totrans-222
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE59]'
  id: totrans-223
  prefs: []
  type: TYPE_PRE
  zh: '[PRE59]'
- en: 'To run the server and see your progress, you need to open a Terminal (macOS
    or Linux) or Command Prompt/PowerShell (Windows) and execute the following command:'
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE60]'
  id: totrans-225
  prefs: []
  type: TYPE_PRE
  zh: '[PRE60]'
- en: Remember to always execute the command `npm run lint --fix`, to automatically
    fix any code lint error.
  id: totrans-226
  prefs: []
  type: TYPE_NORMAL
- en: 'Here is a preview of what the page will look like:'
  id: totrans-227
  prefs: []
  type: TYPE_NORMAL
- en: '![](assets/11952d7a-f53c-4afb-b56b-fd669409c0e8.png)'
  id: totrans-228
  prefs: []
  type: TYPE_IMG
- en: Creating the User validation page
  id: totrans-229
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Once the user has created an account, AWS Amplify will send an email with a
    validation pin-code that we will need to be sent back for validation purposes.
    This page will be the validation page.
  id: totrans-230
  prefs: []
  type: TYPE_NORMAL
- en: Single-file component <script> section
  id: totrans-231
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 'Follow these steps to create the `<script>` section for the User validation
    page:'
  id: totrans-232
  prefs: []
  type: TYPE_NORMAL
- en: Inside the `src/pages` folder, create a new file called `Validate.vue` and open
    it.
  id: totrans-233
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Import the `mapActions` and `mapGetters` functions from the `vuex` package,
    and `resendValidationCode` from `src/driver/auth`:'
  id: totrans-234
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE61]'
  id: totrans-235
  prefs: []
  type: TYPE_PRE
  zh: '[PRE61]'
- en: 'Create an `export default` JavaScript object that provides four properties: `name` (defined
    as `''Validate''`), `data`, `computed`, and `methods`:'
  id: totrans-236
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE62]'
  id: totrans-237
  prefs: []
  type: TYPE_PRE
  zh: '[PRE62]'
- en: 'Inside the `data` property, we will return a JavaScript object with a `code` property
    as an empty string:'
  id: totrans-238
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE63]'
  id: totrans-239
  prefs: []
  type: TYPE_PRE
  zh: '[PRE63]'
- en: 'Inside the `computed` property, we will destruct the `mapGetters` function,
    passing the namespace of what module we want – in this case, `''user''` – as the
    first parameter. For the second parameter, we will pass an array of `getters` we
    want to import – in this scenario, `isLoading` and `getUserEmail`:'
  id: totrans-240
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE64]'
  id: totrans-241
  prefs: []
  type: TYPE_PRE
  zh: '[PRE64]'
- en: 'Finally, for the `methods` property we will destruct the `mapActions` function,
    passing the namespace of what module we want – in this case, `''user''` – as the
    first parameter. For the second parameter, we will pass an array of `actions` we
    want to import – in this scenario, `createNewUser`. Next, we need to add the asynchronous `onSubmit` method,
    which will dispatch `createNewUser` and send the user to the `Index` route; the `resendCode` method,
    which will resend the user another validation code; and the `onReset` method,
    which will reset the data:'
  id: totrans-242
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE65]'
  id: totrans-243
  prefs: []
  type: TYPE_PRE
  zh: '[PRE65]'
- en: Single-file component <template> section
  id: totrans-244
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 'Follow these steps to create the `<template>` section of the User validation
    page:'
  id: totrans-245
  prefs: []
  type: TYPE_NORMAL
- en: 'Create a `QPage` component with the `class` attribute defined as `"bg-grey-1
    flex flex-center"`:'
  id: totrans-246
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE66]'
  id: totrans-247
  prefs: []
  type: TYPE_PRE
  zh: '[PRE66]'
- en: 'Inside the `QPage` component, create a `QCard` component with the `style` attribute
    defined as `"width: 350px"`:'
  id: totrans-248
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE67]'
  id: totrans-249
  prefs: []
  type: TYPE_PRE
  zh: '[PRE67]'
- en: 'Inside the `QCard` component, create a `QCardSection` with an `h6` child component and
    the `class` attribute defined as `no-margin`. Then, create a sibling element with
    the `class` attribute defined as `text-subtitle2`:'
  id: totrans-250
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE68]'
  id: totrans-251
  prefs: []
  type: TYPE_PRE
  zh: '[PRE68]'
- en: 'Create a `QCardSection` with two children components. These will be HTML elements, `P`:'
  id: totrans-252
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE69]'
  id: totrans-253
  prefs: []
  type: TYPE_PRE
  zh: '[PRE69]'
- en: 'After that, create a `QCardSection` with a `QForm` child component and the
    `class` attribute defined as `q-gutter-md`. Inside the `QForm` component, add
    the `QInput` component as a child element. Then, inside the `QInput` component,
    bind the `v-model` directive to `data.code`. Inside the `QInput` `rules` attribute,
    define the `rules` value as an array of validation that will check if any code
    has been typed in. Enable `lazy-rules` so that it will only validate after a while:'
  id: totrans-254
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE70]'
  id: totrans-255
  prefs: []
  type: TYPE_PRE
  zh: '[PRE70]'
- en: 'Now, create a `QCardActions` component with the `align` attribute set to `right`.
    Inside, add a `QBtn` with the `label` attribute set to `"Reset"`, `color` set
    to `primary`, `class` set to `q-ml-sm`, `flat` set to `true`, and the `@click` event
    listener bound to the `onReset` method. Create another `QBtn` with the `label` attribute
    set to `"Re-send code"`, `color` set to `secondary`, `class` set to `q-ml-sm`, `flat` set
    to `true`, and the `@click` event listener bound to the `resendCode` method. Finally,
    create a `QBtn` component with the `label` attribute set to `"Validate"`, `type` set
    to `"submit"`, `color` set to `primary`, and the `@click` event listener bound to
    the `onSubmit` method:'
  id: totrans-256
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE71]'
  id: totrans-257
  prefs: []
  type: TYPE_PRE
  zh: '[PRE71]'
- en: 'Finally, create a `QInnerLoading` component with the `:showing` attribute bound to `computed.isLoading`.
    It should have `QSpinner` child component with `size` set to `50px` and `color` set
    to `primary`:'
  id: totrans-258
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE72]'
  id: totrans-259
  prefs: []
  type: TYPE_PRE
  zh: '[PRE72]'
- en: 'To run the server and see your progress, you need to open a Terminal (macOS
    or Linux) or Command Prompt/PowerShell (Windows) and execute the following command:'
  id: totrans-260
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE73]'
  id: totrans-261
  prefs: []
  type: TYPE_PRE
  zh: '[PRE73]'
- en: Remember to always execute the command `npm run lint --fix`, to automatically
    fix any code lint error.
  id: totrans-262
  prefs: []
  type: TYPE_NORMAL
- en: 'Here is a preview of what the page will look like:'
  id: totrans-263
  prefs: []
  type: TYPE_NORMAL
- en: '![](assets/b8f80c2c-f928-4240-9622-205a135d67b7.png)'
  id: totrans-264
  prefs: []
  type: TYPE_IMG
- en: Creating the User edit page
  id: totrans-265
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: For the User edit page, we will use four components that we've already created: `NameInput`, `UsernameInput`, `AvatarInput`,
    and `PasswordInput`.
  id: totrans-266
  prefs: []
  type: TYPE_NORMAL
- en: Single-file component <script> section
  id: totrans-267
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 'Follow these steps to start developing the `<script>` section of the User edit
    page:'
  id: totrans-268
  prefs: []
  type: TYPE_NORMAL
- en: Inside the `src/pages` folder, create a new file called `Edit.vue` and open
    it.
  id: totrans-269
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Import the `mapActions` and `mapGetters` functions from the `vuex` package:'
  id: totrans-270
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE74]'
  id: totrans-271
  prefs: []
  type: TYPE_PRE
  zh: '[PRE74]'
- en: 'Create an `export default` JavaScript object that provides four properties: `name` (defined
    as `''SignUp''`), `data`, `computed`, and `methods`:'
  id: totrans-272
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE75]'
  id: totrans-273
  prefs: []
  type: TYPE_PRE
  zh: '[PRE75]'
- en: 'Inside the `components` property, add four new properties called `NameInput`, `UsernameInput`, `PasswordInput`,
    `AvatarInput`. Set them like so:'
  id: totrans-274
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '`NameInput` as an anonymous function with a return value of `import(''components/NameInput'')`'
  id: totrans-275
  prefs: []
  type: TYPE_NORMAL
- en: '`UsernameInput` as an anonymous function with a return value of `import(''components/UsernameInput'')`'
  id: totrans-276
  prefs: []
  type: TYPE_NORMAL
- en: '`PasswordInput` as an anonymous function with a return value of `import(''components/PasswordInput'') `'
  id: totrans-277
  prefs: []
  type: TYPE_NORMAL
- en: '`AvatarInput` as an anonymous function with a return value of `import(''components/AvatarInput'')`:'
  id: totrans-278
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE76]'
  id: totrans-279
  prefs: []
  type: TYPE_PRE
  zh: '[PRE76]'
- en: 'Inside the `data` property, we will return a JavaScript object that provides
    five properties: `name`, `username`, `avatar`,  `email`, and `password`. All of
    these will be empty strings:'
  id: totrans-280
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE77]'
  id: totrans-281
  prefs: []
  type: TYPE_PRE
  zh: '[PRE77]'
- en: 'Inside the `created` life cycle hook, define `data.name` as `getUser.name`, `data.username` as `getUser.username`, and `data.avatar` as `getUser.avatar`:'
  id: totrans-282
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE78]'
  id: totrans-283
  prefs: []
  type: TYPE_PRE
  zh: '[PRE78]'
- en: 'Inside the `computed` property, we will destruct the `mapGetters` function,
    passing the namespace of what module we want – in this case, `''user''` – as the
    first parameter. For the second parameter, we will pass an array of `getters` we
    want to import – in this scenario, `isLoading`:'
  id: totrans-284
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE79]'
  id: totrans-285
  prefs: []
  type: TYPE_PRE
  zh: '[PRE79]'
- en: 'Finally, for the `methods` property, we will destruct the `mapActions` function,
    passing the namespace of what module we want – in this case, `''user''` – as the
    first parameter. For the second parameter, we will pass an array of `actions` we
    want to import – in this scenario, `editUser`. Next, we need to add the asynchronous `onSubmit` method,
    which will dispatch `$refs.avatar.uploadFile()` and then dispatch `editUser` to
    send the user to the `Chat` route, and the `onReset` method, which will clear
    the data:'
  id: totrans-286
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE80]'
  id: totrans-287
  prefs: []
  type: TYPE_PRE
  zh: '[PRE80]'
- en: Single-file component <template> section
  id: totrans-288
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 'Follow these steps to create the `<template>` section of the User edit page:'
  id: totrans-289
  prefs: []
  type: TYPE_NORMAL
- en: 'Create a `QPage` component with the `class` attribute defined as `"bg-grey-1
    flex flex-center"`:'
  id: totrans-290
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE81]'
  id: totrans-291
  prefs: []
  type: TYPE_PRE
  zh: '[PRE81]'
- en: 'Inside the `QPage` component, create a `QCard` component with the `style` attribute
    defined as `"width: 350px"`:'
  id: totrans-292
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE82]'
  id: totrans-293
  prefs: []
  type: TYPE_PRE
  zh: '[PRE82]'
- en: 'Inside the `QCard` component, create a `QCardSection` with an `h6` child component and with
    the `class` attribute defined as `no-margin`:'
  id: totrans-294
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE83]'
  id: totrans-295
  prefs: []
  type: TYPE_PRE
  zh: '[PRE83]'
- en: 'After that, create a `QCardSection` with a `QForm` child component with the
    class attribute defined as `q-gutter-md`. Inside the `QForm` component, create
    an `AvatarInput` component with a `reference` directive defined as `avatar` and
    the `v-model` directive bound to `data.avatar`, a `NameInput` component with the `v-model` directive
    bound to `data.name`, a `UsernameInput` component with the `v-model` directive
    bound to `data.username`, an `EmailInput` component with the `v-model` directive
    bound to `data.email`, and a `PasswordInput` component with the `v-model` directive
    bound to the `data.password` property:'
  id: totrans-296
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE84]'
  id: totrans-297
  prefs: []
  type: TYPE_PRE
  zh: '[PRE84]'
- en: 'Now, create a `QCardActions` component with the `align` attribute set to `right`.
    Inside, add a `QBtn` with the `label` attribute set to `"Reset"`, `color` set
    to `primary`, `class` set to `q-ml-sm`, `flat` set to `true`, and the `@click` event
    listener bound to the `onReset` method. Then, create another `QBtn` component
    with the `label` attribute set to `"Create"`, `type` set to `"submit"`, `color` set
    to `primary`, and the `@click` event listener bound to the `onSubmit` method:'
  id: totrans-298
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE85]'
  id: totrans-299
  prefs: []
  type: TYPE_PRE
  zh: '[PRE85]'
- en: 'Finally, create a `QInnerLoading` component with the `:showing` attribute bound to `computed.isLoading`.
    It should have a `QSpinner` child component with `size` set to `50px` and `color` set
    to `primary`:'
  id: totrans-300
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE86]'
  id: totrans-301
  prefs: []
  type: TYPE_PRE
  zh: '[PRE86]'
- en: 'To run the server and see your progress, you need to open a Terminal (macOS
    or Linux) or Command Prompt/PowerShell (Windows) and execute the following command:'
  id: totrans-302
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE87]'
  id: totrans-303
  prefs: []
  type: TYPE_PRE
  zh: '[PRE87]'
- en: Remember to always execute the command `npm run lint --fix`, to automatically
    fix any code lint error.
  id: totrans-304
  prefs: []
  type: TYPE_NORMAL
- en: 'Here is a preview of what the page will look like:'
  id: totrans-305
  prefs: []
  type: TYPE_NORMAL
- en: '![](assets/2ede7f2f-961d-49d4-89d9-be1b0d4cc045.png)'
  id: totrans-306
  prefs: []
  type: TYPE_IMG
- en: Creating application routes
  id: totrans-307
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'Now that we''ve created the user pages, components, and layout, we need to
    bind everything together so that it can be accessed by the user. To do this, we
    need to create the routes and make them available so that the user can navigate
    between the pages. Follow these steps to do this:'
  id: totrans-308
  prefs: []
  type: TYPE_NORMAL
- en: Open the `routes.js` file inside the `router` folder.
  id: totrans-309
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Make the `routes` constant an empty array:'
  id: totrans-310
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE88]'
  id: totrans-311
  prefs: []
  type: TYPE_PRE
  zh: '[PRE88]'
- en: 'Add a JavaScript object with three properties, `path`, `component`, and `children`,
    to this array. The `path` property is a string and will be a static URL, the `component` property
    is an anonymous function that will return a WebPack `import` function with the
    component that will be rendered, and the `children` property is an array of components
    that will be rendered inside `path`. Each of the children components is a JavaScript
    object with the same properties, plus a new one called `name`:'
  id: totrans-312
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE89]'
  id: totrans-313
  prefs: []
  type: TYPE_PRE
  zh: '[PRE89]'
- en: 'Now, for the `/chat` URL, we need to create two new placeholder pages inside
    the `pages` folder: `Contacts.vue` and `Messages.vue`. Inside these files, create
    an empty component with the following template:'
  id: totrans-314
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE90]'
  id: totrans-315
  prefs: []
  type: TYPE_PRE
  zh: '[PRE90]'
- en: 'Inside the `message` route, we need to add two special parameters: `:id` and `path`.
    These parameters will be used to fetch a specific message between users:'
  id: totrans-316
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE91]'
  id: totrans-317
  prefs: []
  type: TYPE_PRE
  zh: '[PRE91]'
- en: 'For the `/user` URL, we will create just one child route, the `edit` route.
    Inside this route, we are using the `alias` property since `vue-router` needs
    to have a child with `path` empty for the first child rendering. We will have
    also have a `/user/edit` route available inside our application:'
  id: totrans-318
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE92]'
  id: totrans-319
  prefs: []
  type: TYPE_PRE
  zh: '[PRE92]'
- en: 'Finally, for creating new users, we need to add the `/register` URL with two
    children: `SignUp `and `Validate`. The `SignUp` route will be the main route on
    the registered URL and will be called directly when the user enters this URL.
    The `Validate` route will only be called when the user is redirected to the `/register/validate` URL:'
  id: totrans-320
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE93]'
  id: totrans-321
  prefs: []
  type: TYPE_PRE
  zh: '[PRE93]'
- en: Adding the authentication guard
  id: totrans-322
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'To validate the user authentication token every time the user enters your application,
    if the token is valid, or if the user is trying to access a route without access,
    we need to create an authentication guard for our application:'
  id: totrans-323
  prefs: []
  type: TYPE_NORMAL
- en: Create a new file called `routeGuard.js` inside the `src/boot` folder.
  id: totrans-324
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Create a `default` export asynchronous function. Inside this parameter, add
    a JavaScript object with a property named `app`. Inside the function, create a
    constant with an object restructuring of `app` that gets the `store` property.
    Then, create a `try/catch` block. In the `try` part, check if the `''user/getUserId''` gather
    isn''t present and dispatch `''user/initialLogin''`. Finally, inside the `catch`
    block, redirect the user to the `Index` route:'
  id: totrans-325
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE94]'
  id: totrans-326
  prefs: []
  type: TYPE_PRE
  zh: '[PRE94]'
- en: 'Finally, open the `quasar.conf.js` file inside the root folder of your project
    and find the `boot` property. Add the `''routerGuard''` item to the array:'
  id: totrans-327
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE95]'
  id: totrans-328
  prefs: []
  type: TYPE_PRE
  zh: '[PRE95]'
- en: How it works...
  id: totrans-329
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: In this chapter, we developed micro components such as `NameInput`, `EmailInput`, and
    so on to simplify the process of developing macro components or containers, such
    as pages.
  id: totrans-330
  prefs: []
  type: TYPE_NORMAL
- en: In this recipe, we used the components we developed in the previous recipe to
    create a complete page, such as the User login, User edit, and User registration
    pages.
  id: totrans-331
  prefs: []
  type: TYPE_NORMAL
- en: Using `vue-router` to manage the parent-child process of wrapping a page with
    a custom layout, we used the layouts we created in the previous recipes of this
    book to create the routes for our application. We made them available so that
    we can access the application as a normal web application, with custom URLs and
    routes.
  id: totrans-332
  prefs: []
  type: TYPE_NORMAL
- en: Finally, we added some authentication middleware to our main initialization
    Vue file so that we could redirect an already authenticated user. This means that
    they don't need to authenticate again when they enter the application for a second
    time.
  id: totrans-333
  prefs: []
  type: TYPE_NORMAL
- en: There's more...
  id: totrans-334
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Now, your application is ready for user registration and login. It's possible
    to navigate through the user registration pages and receive an email from Amazon
    with a verification code so that you can verify the user on the server.
  id: totrans-335
  prefs: []
  type: TYPE_NORMAL
- en: 'To check your process and see it running on your local environment, open a Terminal (macOS
    or Linux) or Command Prompt/PowerShell (Windows) and execute the following command:'
  id: totrans-336
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE96]'
  id: totrans-337
  prefs: []
  type: TYPE_PRE
  zh: '[PRE96]'
- en: Remember to always execute the command `npm run lint --fix`, to automatically
    fix any code lint error.
  id: totrans-338
  prefs: []
  type: TYPE_NORMAL
- en: See also
  id: totrans-339
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: You can find out more information about `vue-router` nested routes at [https://router.vuejs.org/guide/essentials/nested-routes.html](https://router.vuejs.org/guide/essentials/nested-routes.html).
  id: totrans-340
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: You can find out more information about `vue-router` lazy loading at [https://router.vuejs.org/guide/advanced/lazy-loading.html](https://router.vuejs.org/guide/advanced/lazy-loading.html).
  id: totrans-341
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: You can find out more information about the Quasar framework's `QInnerLoading`
    component at [https://quasar.dev/vue-components/inner-loading](https://quasar.dev/vue-components/inner-loading).
  id: totrans-342
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
