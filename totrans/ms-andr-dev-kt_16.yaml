- en: Deploying Your Application
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: It's time for the world to see your work. There are a few things left to do
    before we release it. We will do some preparation and then finally release our
    application to the Google Play store.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
- en: 'In this chapter, we will get familiar with the following topics:'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
- en: Preparing for deployment
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Code obfuscation
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Signing your application
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Publishing to Google Play
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Preparing for deployment
  id: totrans-7
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Before we release your application, it's required to do some preparation work.
    First of all, remove any unused resources or classes. Then, mute your logging!
    It's good practice to use some of the mainstream logging library. You can a create
    a wrapper around the `Log` class and, for each log output to have a condition,
    check that it must not be the `release` build type.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
- en: 'If you haven''t yet set your release configuration as debuggable, do so as
    follows:'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  id: totrans-10
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'Once you have completed this, check your manifest once again and clean it up.
    Remove any permission you don''t need anymore. In our case, we will remove this:'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  id: totrans-12
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: We added it, but never used it. The last thing we will do is check about application
    compatibility. Check that the minimum and maximum SDK versions are in accordance
    to your device targeting plans.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
- en: Code obfuscation
  id: totrans-14
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'The next step in the release process is to enable code obfuscation. Open your
    `build.gradle` configuration and update it as follows:'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  id: totrans-16
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: The configuration we just added will shrink resources and perform obfuscation.
    For the obfuscation, we will use ProGuard. ProGuard is a free Java class file
    shrinker, optimizer, obfuscator, and preverifier. It performs detection of unused
    classes, fields, methods, and attributes. It optimizes bytecode as well!
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
- en: 'In most cases, the default ProGuard configuration (the one we use) is enough
    to remove all the unused code. However, it can happen for ProGuard to remove the
    code your app actually needs! For that purpose, you must define the ProGuard configuration
    to keep those classes. Open your project''s ProGuard configuration file and append
    the following:'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  id: totrans-19
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'Here is the list of ProGuard directives you will need to add if using some
    libraries:'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
- en: 'Retorfit:'
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE4]'
  id: totrans-22
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'Okhttp3:'
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE5]'
  id: totrans-24
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'Gson:'
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE6]'
  id: totrans-26
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: Update your `proguard-rules.pro` file with these lines.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
- en: Signing your application
  id: totrans-28
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'The last step before we upload the release to the Google Play store is to generate
    a signed APK. Open your project and choose Build | Generate Signed APK:'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/49eb70fe-9f7e-4f44-b646-e425ec6b3cad.png)'
  id: totrans-30
  prefs: []
  type: TYPE_IMG
- en: 'Choose the main application module and continue by clicking on Next:'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/2c205bcd-e71f-44d2-8f4e-c50cff51b272.png)'
  id: totrans-32
  prefs: []
  type: TYPE_IMG
- en: 'Since we don''t have the key store yet, we will create a new one. Click on
    Create new... as follows:'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/e91f2daf-47ee-4d5d-a6f7-3cec3fea8bab.png)'
  id: totrans-34
  prefs: []
  type: TYPE_IMG
- en: 'Populate the data and click on OK. Click on Next and enter your master password
    if asked. Check both signatures and choose the complete flavor to build. Click
    on Finish:'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/308f8900-ff9d-4e84-9cea-0098eda58306.png)'
  id: totrans-36
  prefs: []
  type: TYPE_IMG
- en: 'Wait until the build is ready. We will also update our `build.gradle` so the
    build is signed each time we build a release:'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE7]'
  id: totrans-38
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'If it''s easier for you, you can run the build process from the terminal as
    follows:'
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE8]'
  id: totrans-40
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: In this example, we assembled the release build for the Complete application
    flavor.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
- en: Publishing to Google Play
  id: totrans-42
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'The last step in deployment will be publishing the signed release APK. Beside
    the APK, we need to provide a few more things:'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
- en: 'Screenshots--Prepare screenshots from your application. You can do this by
    doing the following: From Android Studio Logcat, click on the Screen Capture icon
    (a little camera icon). From the Preview window, click on Save. You will be asked
    to save your image:'
  id: totrans-44
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '![](img/d3dd5720-451e-41ef-a04c-7395a83ee1f8.png)'
  id: totrans-45
  prefs: []
  type: TYPE_IMG
- en: 'High resolution icon with the following specification:'
  id: totrans-46
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: PNG image of 32-bit (with alpha)
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
- en: 512 px by 512 px in dimensions
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
- en: 1024 K maximal file size
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
- en: 'Feature graphics (main banner for your application):'
  id: totrans-50
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: JPEG image or PNG of 24-bit (without alpha!)
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
- en: 1024 px by 500 px in dimensions
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
- en: 'If you publish the application as a TV application or a TV banner:'
  id: totrans-53
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: JPEG image or PNG of 24-bit (without alpha!)
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
- en: 1280p x by 720 px in dimensions
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
- en: Promo video--YouTube video (not playlist)
  id: totrans-56
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Textual description of your application
  id: totrans-57
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Log in to the developer's console ([https://play.google.com/apps/publish](https://play.google.com/apps/publish)).
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
- en: 'If you haven''t registered yet, do so. It will enable you to publish your applications.
    The main console page is displayed like this:'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/748b6eb6-26d9-4e52-8251-fa824627fccc.png)'
  id: totrans-60
  prefs: []
  type: TYPE_IMG
- en: 'We don''t have any application published yet. Click on PUBLISH AN ANDROID APP
    ON GOOGLE PLAY. A Create application dialog appears. Fill in the data and click
    on the Create button:'
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/b011a954-fe73-49a7-91a8-a0e53dc7040f.png)'
  id: totrans-62
  prefs: []
  type: TYPE_IMG
- en: 'Fill in the form data as follows:'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/e84ab21e-0d8e-4d1f-be8a-1280111c2a0d.png)'
  id: totrans-64
  prefs: []
  type: TYPE_IMG
- en: 'Upload your graphical assets as follows:'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/d7d6acff-79f1-4463-baa1-54641c122e3b.png)'
  id: totrans-66
  prefs: []
  type: TYPE_IMG
- en: 'Please see the following screenshot:'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/140beb1a-0bd4-403a-a8ca-1d6cc7ff5248.png)'
  id: totrans-68
  prefs: []
  type: TYPE_IMG
- en: 'Continue towards application categorization:'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/35705756-8468-4a8b-b092-13473aad782e.png)'
  id: totrans-70
  prefs: []
  type: TYPE_IMG
- en: 'Finish with contact information and Privacy policy:'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/1b064350-2117-4270-9c19-0deee14fb357.png)'
  id: totrans-72
  prefs: []
  type: TYPE_IMG
- en: 'When you have completed all mandatory data, scroll back to the top and click
    on the SAVE DRAFT button. From the left side, now choose App Releases. You will
    be taken to the App Releases screen, as shown in this screenshot:'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/ba919353-3b71-4629-b38e-1faffcd17d61.png)'
  id: totrans-74
  prefs: []
  type: TYPE_IMG
- en: 'Here, you have the following three options:'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
- en: Manage production
  id: totrans-76
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Manage beta
  id: totrans-77
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Manage alpha
  id: totrans-78
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Depending on the version you plan to release, choose the option that suits
    you most. We will choose MANAGE PRODUCTION and click on the CREATE RELEASE button,
    as shown here:'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/1f8dcc94-51ef-4fd8-9bd0-7db80f70d5fe.png)'
  id: totrans-80
  prefs: []
  type: TYPE_IMG
- en: 'Start filling in the data about your release:'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/ac2f0734-e8c3-4638-8ff4-38fcfaa6bca9.png)'
  id: totrans-82
  prefs: []
  type: TYPE_IMG
- en: 'First of all, add the APK you recently generated. Then continue to the bottom
    of the page and fill in the rest of the form. When you are done, click on the
    Review button to review your application release:'
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/16903c77-3eb7-4660-ae8f-0ee07e07b94d.png)'
  id: totrans-84
  prefs: []
  type: TYPE_IMG
- en: 'Before we roll our release to production, click on the Content rating link
    on the left side and then on CONTINUE, as shown in the following screenshot:'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/82efc67e-f497-45f9-b2d5-14c686fd1cc4.png)'
  id: totrans-86
  prefs: []
  type: TYPE_IMG
- en: 'Fill in your **Email address** and scroll to the lower part of the page. Choose
    your category:'
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/6af9a068-5f32-4e6f-8e1a-14fa467d75d4.png)'
  id: totrans-88
  prefs: []
  type: TYPE_IMG
- en: 'We choose UTILITY, PRODUCTIVITY, COMMUNICATION, OR OTHER; on the next screen,
    fill in the information you are asked about, as shown here:'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/f5885ed0-0798-40c1-a5b5-a53c59fff9fd.png)'
  id: totrans-90
  prefs: []
  type: TYPE_IMG
- en: 'Save your questionnaire and click on APPLY RATING:'
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/2a1a5151-25b4-41ca-9c2c-aed9617cb7fa.png)'
  id: totrans-92
  prefs: []
  type: TYPE_IMG
- en: 'Now switch to the Pricing & distribution section:'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/05cfc1cb-241a-42e5-865a-50b8573fab55.png)'
  id: totrans-94
  prefs: []
  type: TYPE_IMG
- en: 'The form is easy to populate. Follow the form and set the data you are asked
    about. When you are done, click on the Save Draft button at the top of the screen.
    You will see that the Ready to Publish link has appeared. Click on it:'
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/1f5e67ad-6b07-4a15-9a1a-e1bccb3545ac.png)'
  id: totrans-96
  prefs: []
  type: TYPE_IMG
- en: 'Click on MANAGE RELEASES, as shown in earlier screenshot. Follow the screens
    until you reach the last screen from the App Releases section. Now you can clearly
    see the START ROLLOUT TO PRODUCTION button enabled. Click on it and, when asked,
    click CONFIRM:'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/01500c44-bef2-4356-8444-d543d5eb9355.png)'
  id: totrans-98
  prefs: []
  type: TYPE_IMG
- en: 'Continued:'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/35e5cf11-d1cf-4e5b-af68-ea794787e441.png)'
  id: totrans-100
  prefs: []
  type: TYPE_IMG
- en: That is it! You have successfully published your application to the Google Play
    store!
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
- en: Summary
  id: totrans-102
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: I hope you have enjoyed this book! This was a great journey! We began from nothing
    and started with learning the basics. Then, we continued toward the medium, difficult,
    and advanced topics about Android. This chapter allowed us the final word on the
    story about Android we wanted to tell you. We did a huge amount of work! We developed
    the application and went through the whole process of deployment, step by step.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
- en: What is next? Well, the next thing you should do is think about an application
    you want to build and start making it from scratch. Take your time. Don't rush
    yourself! During the development, you will discover many things we did not mention.
    Android is tremendously big! It can take years to know the entire framework. Many
    developers don't know every part of it. You will not be the only one. Continue
    your progress and do as much code as you can. It will improve your skills and
    make all that you learned routine to you. Do not hesitate! Get into the action!
    Good luck!
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来呢？嗯，你接下来应该做的事情是考虑一个你想要构建的应用程序，并从零开始着手制作它。花点时间。不要着急！在开发过程中，你会发现很多我们没有提到的东西。安卓系统非常庞大！要了解整个框架可能需要几年的时间。许多开发者并不了解它的每一个部分。你不会是唯一一个。继续你的进步，尽可能多地编写代码。这将提高你的技能，并使你学到的所有东西变得常规化。不要犹豫！投入行动吧！祝你好运！
